{"version":3,"sources":["assets/sun.svg","assets/wb-color-logo.svg","common/actions/entityManagementActions.js","common/utilities/appStateManager.js","modules/shared/LocalStorage.js","modules/main/AppRegistration.js","common/config/getStandardApiConfig.js","common/actions/locationSearchActions.js","common/reducers/locationDetailsReducer.js","common/reducers/locationSearchReducer.js","common/reducers/userConfigReducer.js","common/reducers/entityManagementReducer.js","common/providers/RemoteConfigProvider.js","common/actions/remoteConfigActions.js","common/reducers/remoteConfigReducer.js","common/resources/appConfig.js","common/reducers/ccpaReducer.js","common/reducers/index.js","common/config/store.js","modules/shared/LoadingSpinner.js","modules/main/map.js","modules/main/MapView.js","modules/shared/WeatherIcon.js","common/utilities/date.js","modules/shared/Typography.js","common/actions/forecastAction.js","modules/shared/Spacing.js","modules/shared/Box.js","modules/shared/TemperatureLabel.js","modules/main/NowView.js","modules/daily/DailyWeatherColumn.js","modules/shared/Icon.js","generated-svg-components/ChevronLeft.js","generated-svg-components/ChevronRight.js","generated-svg-components/Search.js","generated-svg-components/WarningEmpty.js","generated-svg-components/ArrowRight.js","modules/shared/Carousel.js","modules/daily/DailyView.js","common/actions/currentStationObsAction.js","common/actions/locationDetailsAction.js","common/actions/alertsActions.js","common/actions/appActions.js","modules/shared/Popover.js","modules/shared/SearchBar.js","modules/header-bar/LocationSearch.js","modules/alerts/AlertCard.js","common/actions/logActions.js","modules/header-bar/AlertsWidget.js","modules/shared/WeatherBugLogo.js","modules/header-bar/HeaderBar.js","common/actions/ccpaActions.js","modules/main/ccpaBanner.js","common/actions/complianceActions.js","modules/main/FeedbackFormView.js","common/utilities/email.js","modules/main/FeedbackForm.js","modules/main/FeedbackBanner.js","modules/main/LegalBanner.js","modules/main/TaboolaAd.js","modules/main/TaboolaView.js","common/actions/iconActions.js","modules/hourly/Table.js","modules/hourly/HourlyItemBox.js","modules/hourly/HourlyWeatherColumn.js","modules/hourly/DayColumn.js","modules/hourly/HourlyView.js","modules/shared/ImageCache.js","common/actions/backgroundImageActions.js","modules/shared/WBBackgroundImage.js","modules/shared/WindowSize.js","modules/main/MainView.js","App.js","serviceWorker.js","index.js"],"names":["module","exports","AsyncAction","baseClasses","EntityManagementProvider","dataLayer","providers","GET_APP_INSTANCE","UPDATE_CUSTOM_USER_SETTINGS","getAppInstance","data","appInstanceId","verbose","dispatch","apiConfig","getStandardApiConfig","ENTITY_MANAGEMENT_API_URL","authId","secret","stdParameters","op","type","base","payload","updateCustomSettings","key","value","nAgt","window","navigator","userAgent","clientStrings","s","r","macosRegEx","RegExp","androidRegEx","iosRegEx","AppStateManager","Component","render","id","cs","test","toLowerCase","error","console","os","osVersion","split","exec","WB","locale","displayName","LocalStorage","getUserSelectedLocation","JSON","parse","localStorage","getItem","setUserSelectedLocation","location","setItem","stringify","getKochavaId","storage","getAppInstanceId","setCCPAOptOutStatus","optOut","getCCPAOptOutStatus","getRandomToken","randomPool","Uint8Array","crypto","getRandomValues","hex","i","length","toString","slice","toUpperCase","getSuggestedAppInstanceId","store","a","entityManagement","storedAppInstanceId","newAppInstanceId","setSuggestedAppInstanceId","getAppId","ui","browser","getAppVersion","manifest","chrome","runtime","getManifest","undefined","warn","version","_AppRegistration","componentDidMount","this","registerApp","attemptNum","isKochavaIdRequired","debug","attemptToRegister","then","success","info","setTimeout","Math","pow","catch","err","kochavaId","appVersion","appId","cultureInfo","_getUserLocale","osType","_getOs","_getOsVersion","vendors","name","props","getUsersLocation","refresh","response","countryIso2","installCountry","suggestedAppInstanceId","appInstanceInfo","app","installGuid","pushToken","actualAppInstanceId","kochava","identify","AppRegistration","connect","bindActionCreators","application","getStandardApiConfigFromStore","remoteConfig","config","baseUrl","API_BASE_URL","LOCATIONS_API_URL","TRAFFIC_API_URL","POLLEN_API_URL","AQI_API_URL","OBSERVATIONS_API_URL","FORECAST_API_URL","ALERTS_API_URL","LEGAL_API_URL","LOGGING_API_URL","ADTARGETING_API_URL","ICON_API_URL","BACKGROUND_IMAGE_API_URL","FEEDBACK_URL","AUTH_ID","AUTH_SECRET","getStore","getMapApiConfigFromStore","mapBaseUrl","WB_MAPS_BASE_URL","tileBaseUrl","WB_TILE_BASE_URL","GET_MY_LOCATION_BY_IP","getUserLocationByIP","LocationSearchProvider","searchLocationBySearchString","searchText","searchString","LOCATION_SEARCH_BY_SEARCH_STRING","searchLocation","internalSearchLocationBySearchString","searchLocationSelected","actions","GET_LOCATION_DETAILS_BY_LATLON","GET_LOCATION_DETAILS_BY_SLUG","transformToCamelCase","utilities","initialState","locationDetailsIsRefreshing","userDefaultLocationIsRefreshing","lastError","locationDetails","userDefaultLocation","locationSearchIsQuerying","locationSearchEnabled","isUserTyping","selectedLocation","locationSearchResults","temperatureUnit","PulseBaseProvider","RemoteConfigProvider","constructor","url","options","logger","super","sync","configSyncer","bind","params","syncParams","resolve","reject","responseValidator","result","pulseApi","getConfig","GET_CONFIG_SETTING","provider","isloaded","MAPBOX_ACCESS_TOKEN","APP_KEY","KOCHAVA_APP_GUID","WB_ALERTS_BASE_URL","PULSE_URL","ccpaOptStatus","rootReducer","combineReducers","reducers","webAdsDL","state","action","pending","fulfilled","rejected","locationSearch","CityName","StateCode","Country","userConfig","userSettings","ccpaReducer","configureStore","middleware","enhancers","push","promise","ReduxThunk","applyMiddleware","createStore","composeWithDevTools","ldsRing","keyframes","Container","styled","div","LoadingSpinner","Map","latitude","longitude","mapZoomInPressed","mapZoomOutPressed","mapPanToMarkerPressed","onZoomChanged","changeZoom","onPanned","updateZoomState","mapboxgl","accessToken","mapboxAccessToken","workerUrl","initialLongitude","initialLatitude","initialZoom","centerMarkerLatitude","centerMarkerLongitude","center","isNaN","initZoom","map","container","mapContainer","zoom","minZoom","maxZoom","style","touchZoomRotate","enableZoom","scrollZoom","logoPosition","attributionControl","logoControl","resize","onMapZoomListener","on","showCenterMarker","tryLocationUpdate","enableDragRotate","dragRotate","disable","enablePan","dragPan","boxZoom","doubleClickZoom","showFullscreenControl","addFullscreenControl","showNavigationControl","navigationControl","NavigationControl","addControl","markerLat","markerLon","createMarker","centerMarkerText","centerMarkerCircleColor","centerMarkerTextColor","event","newZoom","round","target","_easeOptions","setState","getZoom","getCenter","lat","lng","componentWillUnmount","remove","componentDidUpdate","prevProps","nextLatitude","nextLongitude","nextZoom","currentZoom","enable","removeControl","fullscreenControl","centerMarker","centerMarkerSpan","border","innerText","color","FullscreenControl","resizeTime","originalOnClickFullScreen","_onClickFullscreen","flyToParams","flyTo","markerText","circleColor","markerTextColor","el","document","createElement","imageSrc","width","height","className","matchMedia","matches","smallPinImageUrl","bigPinImageUrl","img","src","appendChild","position","borderRadius","textAlign","top","left","padding","paddingLeft","paddingRight","fontSize","minWidth","Marker","setLngLat","addTo","zoomTo","getLngLat","easeTo","zoomIn","zoomOut","extension","styles","mapStyle","ref","background","display","_MapView","onClick","newTab","open","locationSlugName","href","defaultLayerId","defaultZoom","LoadingContainer","currentZoomLevel","mapApiUrl","layerOpacity","stdApiParameters","tempUnit","pressureUnit","rainUnit","windUnit","MapView","Error","slugName","_WeatherIcon","children","iconUrl","WeatherIcon","ownProps","iconCode","iconEntry","icon","forecastIcons","Icons","Url","MONTHS","DAYS","Title1","h1","Title2","h2","Title3","h4","BaseText","p","css","lineClamp","Text1","Text2","attrs","weight","bold","semiBold","Text3","emphasize","getDailyForecastByLatLon","offset","units","getHourlyForecastByLatLon","space","input","join","getProperty","propName","cssName","getSpaceProperty","getSizeProperty","Box","flex","_TemperatureLabel","temperature","getTemperatureLabel","unit","getTemperatureDisplayUnit","degree","TemperatureLabel","IconImg","DisplayContainer","IconContainer","NowView","forecast","currentStationObs","hourlyForecast","hourly","nowObservation","observation","nowHighLow","highLow","nowHourlyForecast","hourlyForecastPeriod","nowForecast","high","temperatureHigh","low","temperatureLow","feelsLike","summary","summaryDescription","iconDescription","locationName","displayCompositeName","observationDate","Date","observationTimeAdjustedLocalStr","currentDate","getMonth","getDate","getFullYear","currentTime","date","rawHourNum","getHours","rawMinutesNum","getMinutes","getAmOrPm","getFormattedTime","marginBottom","flexDirection","marginRight","verticalAlign","alignItems","size","alt","justifyContent","DailyWeatherColumn","dayForecast","nightForecast","forecastDateLocalStr","dateStr","DailyItemBox","DayContainer","DescriptionContainer","NightContainerExpander","NightContainer","EmptyDailyColumn","IconComponents","ChevronLeft","fill","d","fillRule","ChevronRight","Search","WarningEmpty","ArrowRight","Icon","viewBox","Carousel","header","useState","childSize","setChildSize","isMouseDown","setIsMouseDown","draggableState","setDraggableState","translateX","setStateTranslateX","scrollableEl","useRef","setTranslateX","animated","current","scrollTo","behavior","scrollLeft","getExactTranslate","measureRef","containerRef","contentRect","containerContentRect","viewportSize","entry","maxTranslate","containerBounds","canGoNextPage","canGoPrevPage","hideNavButtons","clampTranslate","translate","clamp","onMouseDown","e","translateStart","dragStart","pageX","onMouseUp","onMouseMove","dragCurrent","deltaX","onScroll","PageButtonContainer","PageButton","isDisabled","onResize","ScrollableContainer","DailyView","dailyForecast","daily","today","setUTCHours","forecastsByDay","_","groupBy","dailyForecastPeriods","forecastEntry","hour","getTime","dailyEntries","mapValues","forecastPair","singleForecast","keys","reduce","arr","dayOffset","parseInt","times","getCurrentStationObsByLatLon","getLocationDetailsByLatLon","getAlertsByLatLon","getV1AlertsByLatLon","getAlertsLegend","MapProvider","getMapMetadata","otherResult","timeslot","ds","Result","val","loadDataForLatLong","Promise","all","Popover","isOpen","anchorElement","isCentered","PopoverPane","getOffset","direction","bottom","right","SearchBar","React","onChangeSearchTerm","text","currentTarget","localText","highlightResultIndex","selectResult","index","onSelectResult","isComponentFocused","setHighlightIndex","newHighlightIndex","searchResults","focusNextResult","min","focusPrevResult","max","handleKeyDown","keyCode","preventDefault","shiftKey","blur","placeholder","isSearching","popoverHasContent","onOutsideClick","onChangeFocus","AnchorContainer","StyledInput","onChange","onFocus","onKeyDown","RowDivider","SearchResult","isHighlighted","LocationSearchBare","debouncedSearch","runSearch","isFocused","overrideLocationName","debounce","leading","trailing","DisplayCompositeName","searchTerm","Latitude","Longitude","resp","LocationSearch","AlertCard","alert","startLabel","IssuedDateTimeLocalString","moment","format","endLabel","ExpiredDateTimeLocalString","alertProviderAbbreviation","AlertProviderId","theme","FillColor","LineColor","Circle","stroke","Content","Title","AlertTypeName","Description","logEvent","eventType","deviceid","schemaVersion","formFactor","InnerContainer","IconLabel","AlertsWidget","alerts","alertList","setIsOpen","alertColorMap","setAlertColorMap","onClickAlert","useEffect","fetchData","legendResults","legendMap","obj","item","Type","require","AlertId","WeatherBugLogo","memo","LogoImg","HeaderBar","optOutStatus","_CCPABanner","ifOptedOut","ccpaText","setCcpaText","isCCPAEnabled","useSelector","complianceInfo","ccpa","useDispatch","getComplianceInfo","changeCCPAText","Label","updateSettings","CCPABanner","span","errorStyle","ErrorMessage","FormButtonContainer","FormCancelButton","button","FormSubmitButton","OtherTextbox","textarea","EmailTextBox","FormLabel","label","TopLabel","FormSubTitle","FormHeadder","MainFormContainer","Form","form","Thankyou","FeedbackFormView","isSubmitted","handleEmailChange","handleNameChange","handleMessageChange","handleFormSubmit","isValid","userName","userEmail","comments","handleCloseButton","errorMessage","margin-top","flexGrow","margin","onSubmit","sendFeedback","FeedbackForm","setFeedbackFormOpen","setIsSubmitted","setComments","setEmail","setName","setErrorMessage","setValid","station","validateForm","valid","String","formSubmitEvent","feedbackBody","User","RawFeedbackMessage","EmailAddress","AppInstanceId","CultureInfo","Name","SignInId","App","Id","Version","Os","Device","Legal","PrivacyPolicyVersion","TermsOfUsageVersion","Location","Selected","Coordinates","City","cityName","StateProvidence","territoryName","countryIso2Code","Station","ProviderId","providerId","StationId","stationId","StationName","stationName","LocationName","Push","PushToken","FeedbackBanner","isFeedbackOpen","ClickLink","TERMS_URL","_LegalBanner","currentYear","onTermsOrPolicyClick","LegalBanner","TaboolaAd","PureComponent","modeId","containerId","placementId","targetType","isLastSnippet","cdnsStatus","_taboola","mode","placement","target_type","cdns","flush","divId","adWidth","adHeight","adStyle","maxWidth","TaboolaView","shouldRenderAdView","shouldSpan","ccpaClicked","setCcpaClicked","getAllIconUrls","iconSet","iconSize","contrast","RowItem","Table","TableRow","HourlyItemBox","HourlyWeatherColumn","hourEntry","description","precipProbability","relativeHumidity","windDirectionDegrees","windSpeed","title","wind","getWindDirection","DayColumn","dateLabel","dayOfWeek","getDay","HourlyView","hourlyEntries","hourlyEntry","cache","add","onLoad","image","Image","addEventListener","once","ImageCache","get","has","getBackgroundImageByLatLon","setId","_WBBackgroundImage","hasLoadedMap","maybeLoadBackgroundByLatLong","backgroundUrl","getImageUrlFromEntries","u","onBackgroundImageUrlLoaded","withOverlay","imageHasLoaded","TransitionGroup","component","CSSTransition","timeout","classNames","ImageView","Overlay","ContentContainer","entries","landscapeBackgrounds","filter","o","backgroundEntry","find","sid","WBBackgroundImage","backgroundImage","images","backgroundEntries","WindowSize","innerWidth","innerHeight","updateWindowDimensions","removeEventListener","_MainView","loading","isLocationLoaded","isNight","onBackgroundImageUrlFetched","includes","setupRefreshTimer","busDomain","pageName","checkForLifecycleEvents","previousLocation","localStorageKey","eventName","source","pushMessageId","results","forEach","jsonStr","jsonObj","timestamp","previousVersion","removeItem","refreshTimeout","clearTimeout","REFRESH_AFTER_MIN","renderLoading","renderMain","shouldDisplayAd","gdpr","modeIdRightRail","modeIdBelowThumbnail","ccpaStatus","LayoutContainer","ScrollContainer","MainContent","ResponsiveContent","pageTitle","sidebarContent","MainView","Storage","storageBackend","defaultExpires","enableCache","loadConfig","process","getConfigSetting","path","Boolean","hostname","match","ReactDOM","getElementById","serviceWorker","ready","registration","unregister"],"mappings":"qKAAAA,EAAOC,QAAU,IAA0B,iC,oBCA3CD,EAAOC,QAAU,IAA0B,2C,kNCQnCC,EAAgBC,cAAhBD,YACAE,EAA6BC,YAAUC,UAAvCF,yBAIKG,EAAmB,IAAIL,EAAY,oBAEnCM,GADkB,IAAIN,EAAY,mBACJ,IAAIA,EAAY,gCAuBpD,SAASO,GAAe,KAC7BC,EAD6B,cAE7BC,EAF6B,QAG7BC,GA9BsB,IAoCtB,OAAOC,IACL,MAAMC,EAAgCD,EAASE,KACvCC,EAA6DF,EAA7DE,0BAA2BC,EAAkCH,EAAlCG,OAAQC,EAA0BJ,EAA1BI,OAAQC,EAAkBL,EAAlBK,cAE7CC,EAAK,IAAIhB,EAAyBY,EAA2BC,EAAQC,GAC3E,OAAOL,EAAS,CACdQ,KAAMd,EAAiBe,KACvBC,QAASH,EAAGX,eAAeE,EAAeD,EAAMS,EAAeP,MAwB9D,SAASY,GAAqB,cACnCb,EADmC,IAEnCc,EAFmC,MAGnCC,EAHmC,QAInCd,GAvEsB,IA8EtB,OAAOC,IACL,MAAMC,EAAgCD,EAASE,KACvCC,EAA6DF,EAA7DE,0BAA2BC,EAAkCH,EAAlCG,OAAQC,EAA0BJ,EAA1BI,OAAQC,EAAkBL,EAAlBK,cAC7CC,EAAK,IAAIhB,EAAyBY,EAA2BC,EAAQC,GAC3E,OAAOL,EAAS,CACdQ,KAAMb,EAA4Bc,KAClCC,QAASH,EAAGI,qBAAqBb,EAAec,EAAKC,EAAOP,EAAeP,MC7FjF,MAAMe,EAAOC,OAAOC,UAAUC,UAGxBC,EAAgB,CACpB,CAAEC,EAAG,aAAcC,EAAG,mCACtB,CAAED,EAAG,cAAeC,EAAG,iCACvB,CAAED,EAAG,YAAaC,EAAG,+BACrB,CAAED,EAAG,YAAaC,EAAG,+BACrB,CAAED,EAAG,cAAeC,EAAG,mBACvB,CAAED,EAAG,gBAAiBC,EAAG,mBACzB,CAAED,EAAG,gBAAiBC,EAAG,gCACzB,CAAED,EAAG,gBAAiBC,EAAG,kCACzB,CAAED,EAAG,aAAcC,EAAG,6BACtB,CAAED,EAAG,aAAcC,EAAG,uBACtB,CAAED,EAAG,aAAcC,EAAG,kCACtB,CAAED,EAAG,cAAeC,EAAG,+CACvB,CAAED,EAAG,aAAcC,EAAG,eACtB,CAAED,EAAG,aAAcC,EAAG,UACtB,CAAED,EAAG,UAAWC,EAAG,YACnB,CAAED,EAAG,WAAYC,EAAG,YACpB,CAAED,EAAG,SAAUC,EAAG,UAClB,CAAED,EAAG,QAASC,EAAG,gBACjB,CAAED,EAAG,MAAOC,EAAG,uBACf,CAAED,EAAG,QAASC,EAAG,aACjB,CAAED,EAAG,QAASC,EAAG,4CACjB,CAAED,EAAG,MAAOC,EAAG,QACf,CAAED,EAAG,OAAQC,EAAG,SAChB,CAAED,EAAG,OAAQC,EAAG,SAChB,CAAED,EAAG,OAAQC,EAAG,UAChB,CACED,EAAG,aACHC,EAAG,kFAIDC,EAAa,IAAIC,OAAO,yBACxBC,EAAe,IAAID,OAAO,sBAC1BE,EAAW,IAAIF,OAAO,2BAErB,MAAMG,UAAwBC,YAGnCC,SACE,OAAO,KAGT,gBACE,IACE,IAAK,MAAMC,KAAMV,EAAe,CAC9B,IAAIW,EAAKX,EAAcU,GACvB,GAAIC,EAAGT,EAAEU,KAAKhB,GACZ,MAAI,WAAWgB,KAAKD,EAAGV,GACd,UAEAU,EAAGV,EAAEY,eAIlB,MAAOC,GACPC,QAAQD,MAAMA,IAIlB,qBAAqBE,GACnB,IAAIC,EAEJ,IACE,OAAQD,GACN,IAAK,UACH,IAAK,IAAIN,KAAMV,EAAe,CAC5B,IAAIW,EAAKX,EAAcU,GACvB,GAAIC,EAAGT,EAAEU,KAAKhB,GAAO,CACnBqB,EAAYN,EAAGV,EAAEiB,MAAM,KAAK,GAC5B,OAGJ,MAEF,IAAK,QACHD,EAAYd,EAAWgB,KAAKvB,GAAM,GAClC,MAEF,IAAK,UACHqB,EAAYZ,EAAac,KAAKvB,GAAM,GACpC,MAEF,IAAK,MACHqB,EAAYX,EAASa,KAAKvB,GAC1BqB,EAAYA,EAAU,GAAK,IAAMA,EAAU,GAAK,KAAsB,EAAfA,EAAU,IACjE,MAEF,IAAK,QACL,IAAK,aACHA,EAAY,IACZ,MAEF,QACED,EAAK,QACLC,EAAY,KAGhB,MAAOH,GACPC,QAAQD,MAAMA,GAGhB,OAAOG,EAGT,wBACE,OAAQpB,OAAOuB,IAAMvB,OAAOuB,GAAGC,QAAW,QAG5C,kCAAkCA,GAEhC,OADkBA,EAAOH,MAAM,IAAK,GACjB,GAGrB,iCAAiCG,GAE/B,OADkBA,EAAOH,MAAM,IAAK,GACjB,IAhFVX,EACJe,YAAc,kBCfRC,MAtBM,CACnBC,wBAAyB,IAChBC,KAAKC,MAAM7B,OAAO8B,aAAaC,QALX,2BAO7BC,wBAA0BC,GACjBjC,OAAO8B,aAAaI,QARA,yBAQgCN,KAAKO,UAAUF,IAE5EG,aAAc,IACLpC,OAAOqC,QAAQN,QAAQ,SAEhCO,iBAAkB,IACTtC,OAAOqC,QAAQN,QAAQ,iBAEhCQ,oBAAsBC,GACbxC,OAAO8B,aAAaI,QAhBV,eAgBgCN,KAAKO,UAAUK,IAElEC,oBAAqB,MACFb,KAAKC,MAAM7B,OAAO8B,aAAaC,QAnB/B,kBCgBrB,SAASW,IAEP,IAAIC,EAAa,IAAIC,WAAW,IAChC5C,OAAO6C,OAAOC,gBAAgBH,GAC9B,IAAII,EAAM,GACV,IAAK,IAAIC,EAAI,EAAGA,EAAIL,EAAWM,SAAUD,EACvCD,GAAOJ,EAAWK,GAAGE,SAAS,IAGhC,MAAO,UAAGH,EAAII,MAAM,EAAG,GAAhB,YAAsBJ,EAAII,MAAM,EAAG,IAAnC,YAA0CJ,EAAII,MAAM,GAAI,IAAxD,YAA+DJ,EAAII,MACxE,GACA,IAFK,YAGFJ,EAAII,MAAM,GAAI,KAAMC,cAGpB,SAAeC,EAAtB,kC,4CAAO,WAAyCC,GAAzC,mBAAAC,EAAA,2DACCxE,EAAgBuE,GAASA,EAAME,kBAAoBF,EAAME,iBAAiBzE,eAD3E,yCAGIA,GAHJ,uBAM6B2C,EAAaY,mBAN1C,YAMCmB,EAND,iDAQIA,GARJ,cAWCC,EAAmBhB,IAXpB,UAYCiB,EAA0BD,GAZ3B,iCAaEA,GAbF,6C,+BAgBQC,E,8EAAf,WAAyC5E,GAAzC,SAAAwE,EAAA,sEACQvD,OAAOqC,QAAQH,QAAQ,gBAAiBnD,GADhD,4C,sBAIO,SAAS6E,IACd,OAAK5D,QAAWA,OAAO6D,IAAO7D,OAAO6D,GAAGC,QAGlC,oCAAN,OAA2C9D,OAAO6D,GAAGC,QAAQ9C,eAFpD,KAKJ,SAAS+C,IACd,MAAMC,EACHhE,OAAOiE,QACNjE,OAAOiE,OAAOC,SACdlE,OAAOiE,OAAOC,QAAQC,aACtBnE,OAAOiE,OAAOC,QAAQC,oBACxBC,OAEeA,IAAbJ,GACF9C,QAAQmD,KACN,2GAIJ,OAD4BL,GAAYA,EAASM,SAAY,UAM/D,MAAMC,UAAyB5D,YAC7B6D,oBACEC,KAAKC,cAGPA,YAAYC,EAAqB,EAAGC,GAAgC,GAClE1D,QAAQ2D,MAAR,qBAA4BF,EAAa,EAAb,oBAA8BA,EAA9B,KAA8C,KAC1EF,KAAKK,kBAAkBF,GACpBG,KAAKC,IACJ,IAAKA,EAAS,CAEZ,GADA9D,QAAQ+D,KAAK,iCACTN,EAbO,EAeT,YADAzD,QAAQmD,KAAR,iDAdS,EAcT,cAGFa,WAAW,KACTT,KAAKC,YAAYC,EAAa,GAAG,IAChC,GAAKQ,KAAKC,IAAI,EAAGT,EAAa,OAGpCU,MAAMC,IACLpE,QAAQD,MAAM,+BAAgCqE,KAI9CR,kBAAkBF,GAAgC,GAA0B,IAAD,0JACvDlD,EAAaU,eAD0C,cACzEmD,EADyE,SAG7ErE,QAAQmD,KAAK,2BAGTmB,EAAqBzB,IAErB0B,EAAQ7B,IACR8B,EAAsBhF,EAAgBiF,iBACtCC,EAAiBlF,EAAgBmF,SACjCzE,EAAoBV,EAAgBoF,iBAAmB,UAEvDC,EAAUR,EAAY,CAAC,CAAES,KAAM,UAAWnF,GAAI0E,IAAe,GAbY,UAezC,EAAKU,MACxCC,iBAAiB,CAAEC,SAAS,IAC5BpB,KAAKqB,IACJ,GAAKA,EAIL,OAAQA,GAAYA,EAAStG,OAASsG,EAAStG,MAAMuG,kBAAgBjC,IAtBM,eAezEkC,EAfyE,iBAyB1CjD,EAA0B,EAAK4C,MAAM3C,OAzBK,eAyBzEiD,EAzByE,OA2BzEC,EAAkB,CACtBC,IAAK,CACH5F,GAAI4E,EACJnB,QAASkB,GAEXE,cACAgB,YAAaH,EACbpF,GAAI,CACF1B,KAAMmG,EACNtB,QAASlD,GAEXuF,UAAW,mEACXL,iBACAP,WAxC6E,kBA2CxE,EAAKE,MACTpH,eAAe,CACdC,KAAM0H,EACNzH,cAAeyH,EAAgBE,cAGhC3B,KAAMqB,IACL,MAAMQ,EAAsBR,EAAStG,MAAMf,cAQ3C,OAPAiB,OAAO6G,QAAQC,SAAS,CACtB/H,cAAe6H,IAGbL,IAA2BK,GAC7BjD,EAA0BiD,KAErBrB,KA1DoE,8CA8DjF3E,SACE,OAAO,MAoBJ,MAAMmG,EAAkBC,mBAhB/B,SAAkB1D,GAChB,MAAO,CACLA,YAIJ,SAAoBrE,GAClB,OAAOgI,6BACL,CACEpI,iBACAqH,oBAEFjH,KAI2B+H,CAG7BzC,GCpLIhF,EAAgB,CACpB2H,YAAatD,IACb4B,WAAYzB,KAwBP,SAASoD,EAA8B7D,GAAwC,MAAD,EAoB/EA,EAAM8D,aAAaC,OAlBPC,EAFmE,EAEjFC,aAEAC,EAJiF,EAIjFA,kBACAC,EALiF,EAKjFA,gBACAC,EANiF,EAMjFA,eACAC,EAPiF,EAOjFA,YACAC,EARiF,EAQjFA,qBACAC,EATiF,EASjFA,iBACAC,EAViF,EAUjFA,eACAC,EAXiF,EAWjFA,cACAC,EAZiF,EAYjFA,gBACAC,EAbiF,EAajFA,oBACAC,EAdiF,EAcjFA,aACAC,EAfiF,EAejFA,yBACA/I,EAhBiF,EAgBjFA,0BACAgJ,EAjBiF,EAiBjFA,aAKF,MAAO,CACLd,UACAjI,OAxBiF,EAkBjFgJ,QAOA/I,OAzBiF,EAmBjFgJ,YAOA/I,cAJK,EAMLiI,oBACAC,kBACAC,iBACAC,cACAC,uBACAC,mBACAC,iBACAC,gBACAC,kBACAC,sBAEAC,eACAC,2BACA/I,4BACAgJ,gBAIG,SAASjJ,IACd,OAAO,SAAmCF,EAAUsJ,GAClD,OAAOpB,EAA8BoB,MAIlC,SAASC,EAAyBlF,GAAoB,MAAD,EAMtDA,EAAM8D,aAAaC,OAJHoB,EAFsC,EAExDC,iBACSrJ,EAH+C,EAGxDgJ,QACa/I,EAJ2C,EAIxDgJ,YAGF,MAAO,CACLhB,QAASmB,EACTE,YATwD,EAKxDC,iBAKAvJ,SACAC,SACAC,cALK,G,MCvFDjB,EAAgBC,cAAhBD,YACKuK,EAAwB,IAAIvK,EAAY,yBAiC9C,SAAS4H,GAAiB,QAC/BlH,GAhCsB,EA+BS,QAE/BmH,GAAU,IAKV,OAAOlH,IACL,MAAMC,EAAgCD,EAASE,KACvCqI,EAAqDtI,EAArDsI,kBAAmBnI,EAAkCH,EAAlCG,OAAQC,EAA0BJ,EAA1BI,OAAQC,EAAkBL,EAAlBK,cAC3C,OAAON,EAAS,CACdQ,KAAMoJ,EAAsBnJ,KAC5BC,QAASmJ,EACPtB,EACAnI,EACAC,EACAC,EACAP,EACAmH,M,SAMO2C,E,wFAAf,WACExB,EACAjI,EACAC,EACAC,EACAP,EACAmH,GANF,eAAA5C,EAAA,6DAQQ/D,EAAK,IAAIf,YAAUC,UAAUqK,uBAAuBzB,EAASjI,EAAQC,GAR7E,SASeE,EAAGsJ,oBAAoBvJ,EAAeP,EAASmH,GAT9D,oF,sBAYO,SAAS6C,GAA6B,WAC3CC,EAD2C,QAE3CjK,GArEsB,EAmEqB,QAG3CmH,GAAU,IAMV,OAAOlH,IACL,MAAMC,EAAgCD,EAASE,KACvCqI,EAAqDtI,EAArDsI,kBAAmBnI,EAAkCH,EAAlCG,OAAQC,EAA0BJ,EAA1BI,OAAQC,EAAkBL,EAAlBK,cAC3C,OAAON,EAkBJ,SACLiK,EACA5B,EACAjI,EACAC,EACAC,EACAP,EACAmH,GAAmB,GAEnB,MAAO,CACL1G,KAAM0J,EAAiCzJ,KACvCC,QAASyJ,EAAeF,EAAc5B,EAASjI,EAAQC,EAAQC,EAAeP,EAASmH,IA5BrFkD,CACEJ,EACAzB,EACAnI,EACAC,EACAC,EACAP,EACAmH,KAQD,MAAMgD,EAAmC,IAAI7K,EAAY,oC,SAiBjD8K,E,6FAAf,WACEF,EACA5B,EACAjI,EACAC,EACAC,EACAP,EACAmH,GAPF,eAAA5C,EAAA,6DASQ/D,EAAK,IAAIf,YAAUC,UAAUqK,uBAAuBzB,EAASjI,EAAQC,GAT7E,SAUeE,EAAG4J,eAAeF,EAAc3J,EAAeP,EAASmH,GAVvE,oF,sBAaO,MAkBMmD,GAA0BrH,IAAD,CACpCxC,KAhBsC,2BAiBtCE,QAASsC,I,GCzJ8DxD,YAAU8K,QAA3EC,G,GAAAA,+BAAgCC,G,GAAAA,6BAEhCC,GAAyBC,YAAzBD,qBAcFE,GAAsB,CAC1BC,6BAA6B,EAC7BC,iCAAiC,EACjCC,eAAW3F,EACX4F,qBAAiB5F,EACjB6F,yBAAqB7F,GCHvB,MAAMwF,GAAsB,CAC1BM,0BAA0B,EAC1BC,uBAAuB,EACvBC,cAAc,EACdC,sBAAkBjG,EAClB6E,gBAAY7E,EACZkG,sBAAuB,ICpBzB,MAAMV,GAAsB,CAC1BW,gBAAiB,WCEnB,MAAMX,GAAsB,CAC1B7K,mBAAeqF,G,MCTToG,GAAsBjM,cAAtBiM,kBAIO,MAAMC,WAA6BD,GAChDE,YAAYC,EAAaC,EAAiBC,GACxCC,MAAMH,EAAK,GAAI,GAAIC,EAASC,GAC5BpG,KAAKpC,QAAQ0I,KAAb,OAAoCtG,KAAKuG,aAAaC,KAAKxG,MAGvDuG,aAAaE,GAAiB,IAAD,4JACzBrK,EAAoCqK,EAApCrK,GAAIsK,EAAgCD,EAAhCC,WAAYC,EAAoBF,EAApBE,QAASC,EAAWH,EAAXG,OAC3BC,EAAqBC,KAAaA,EAFP,SAGpB,WACXJ,EAAWtL,IACXgB,EACA,GACA,GACAuK,EACAC,EACAC,EACAH,EAAWK,UAXoB,qFAe7BC,UAAUtF,GAAmB,GAAQ,IAAD,2LAClCgF,EAAa,CACjBhF,WAEItF,EAAKe,KAAKO,UAAUgJ,GAEtBhF,GACF,WA9BiB,SA8BuBtF,GAPF,SAS3B,WAhCM,SAgCgCA,EAAIsK,GATf,sF,MCtB/BO,GAAqB,IAAIpN,EAFdC,cAAhBD,aAE0C,sB,SASnCmN,G,mFAAf,WAAyBd,EAAaxE,GAAtC,eAAA5C,EAAA,6DACQoI,EAAW,IAAIlB,GAAqBE,GAD5C,kBAESgB,EAASF,UAAUtF,IAF5B,4C,sBCLA,MAAMyD,GAAsB,CAC1BgC,UAAU,EACVvE,OCVa,CACbwE,oBACE,oGACFC,QAAS,mCACTC,iBAAkB,uDAClBrD,iBAAkB,wCAClBE,iBAAkB,sCAClBoD,mBAAoB,oCACpBC,UAAW,sCACX3D,YAAa,mCACbD,QAAS,mBAETd,aAAc,uCAEdE,gBAAiB,yCACjBC,eAAgB,wCAChBF,kBAAmB,uCACnBG,YAAa,uCACbC,qBAAsB,uCACtBC,iBAAkB,uCAClBC,eAAgB,wCAChBC,cAAe,yCACfC,gBAAiB,wCACjBC,oBAAqB,uCACrBC,aAAc,sCACdC,yBAA0B,sCAC1B/I,0BAA2B,wCC5B7B,MACMwK,GAAsB,CAC1BsC,mBAAe9H,GCuBF+H,OAVKC,0BAAgB,uCAC/B3N,YAAU4N,UACVC,YAASD,UAFqB,IAGjCrC,gBTUK,SAAyBuC,EAAe3C,GAAc4C,GAC3D,OAAQA,EAAO/M,MACb,KAAKoJ,EAAsB4D,QACzB,OAAO,2BACFF,GADL,IAEEzC,iCAAiC,IAIrC,KAAKjB,EAAsB6D,UAOzB,OANc,2BACTH,GADS,IAEZtC,oBAAqBuC,EAAO7M,QAC5BoK,UAAW,GACXD,iCAAiC,IAKrC,KAAKjB,EAAsB8D,SACzB,OAAO,2BACFJ,GADL,IAGExC,UAAWyC,EAAO7M,QAClBmK,iCAAiC,IAIrC,KAAKN,GAA+BiD,QAClC,OAAO,2BACFF,GADL,IAEE1C,6BAA6B,IAIjC,KAAKL,GAA+BkD,UAElC,OADAhD,GAAqB8C,EAAO7M,SACrB,2BACF4M,GADL,IAEEvC,gBAAiBwC,EAAO7M,QACxBoK,UAAW,GACXF,6BAA6B,IAIjC,KAAKL,GAA+BmD,SAClC,OAAO,2BACFJ,GADL,IAEEvC,qBAAiB5F,EACjB2F,UAAWyC,EAAO7M,QAClBkK,6BAA6B,IAIjC,KAAKJ,GAA6BgD,QAChC,OAAO,2BACFF,GADL,IAEE1C,6BAA6B,IAIjC,KAAKJ,GAA6BiD,UAChC,OAAO,2BACFH,GADL,IAEEvC,gBAAiBwC,EAAO7M,QACxBoK,UAAW,GACXF,6BAA6B,IAIjC,KAAKJ,GAA6BkD,SAChC,OAAO,2BACFJ,GADL,IAEEvC,qBAAiB5F,EACjB2F,UAAWyC,EAAO7M,QAClBkK,6BAA6B,IAGjC,QACE,OAAOpL,YAAU4N,SAASrC,gBAAgBuC,EAAOC,KSxFrDI,eRYK,SAAwBL,EAAe3C,GAAc4C,GAC1D,OAAQA,EAAO/M,MACb,KAAK0J,EAAiCsD,QACpC,OAAO,2BACFF,GADL,IAEErC,0BAA0B,IAG9B,KAAKf,EAAiCuD,UACpC,OAAO,2BACFH,GADL,IAEEjC,sBAAuBkC,EAAO7M,QAC9BoK,UAAW,GACXG,0BAA0B,IAG9B,KAAKf,EAAiCwD,SACpC,OAAO,2BACFJ,GADL,IAEEjC,sBAAuB,GACvBP,UAAWyC,EAAO7M,QAClBuK,0BAA0B,IAG9B,IFkFmC,0BEjFjC,OAAO,2BACFqC,GADL,IAEEjC,sBAAuB,GACvBH,uBAAuB,IAG3B,IF4EwC,+BE3EtC,OAAO,2BACFoC,GADL,IAEEnC,cAAc,EACdnB,WAAYuD,EAAO7M,UAGvB,IFsEiC,wBErE/B,OAAO,2BACF4M,GADL,IAEEtD,WAAYsD,EAAMlC,iBAClBF,uBAAuB,IAG3B,IFgEoC,2BEhEL,CAC7B,IAAInE,EAAOwG,EAAO7M,QAAQkN,SAM1B,OALIL,EAAO7M,QAAQmN,UACjB9G,GAAI,YAASwG,EAAO7M,QAAQmN,WACnBN,EAAO7M,QAAQoN,UACxB/G,GAAI,YAASwG,EAAO7M,QAAQoN,UAEvB,2BACFR,GADL,IAEEtD,WAAYjD,EACZqE,iBAAkBrE,EAClBsE,sBAAuB,GACvBF,cAAc,IAGlB,QACE,OAAOmC,IQxEXS,WPRK,SAAoBT,EAAe3C,GAAc4C,GAGlD,OAFIA,EAAO/M,KAEJ8M,GOMXnF,aHNa,CAACmF,EAAe3C,GAAc4C,KAC3C,OAAQA,EAAO/M,MACb,KAAKiM,GAAmBe,QACtB,OAAO,2BACFF,GADL,IAEEX,UAAU,IAId,KAAKF,GAAmBgB,UACtB,OAAO,2BACFH,GADL,IAEEX,UAAU,EACVvE,OAAO,2BACFkF,EAAMlF,QACNmF,EAAO7M,WAKhB,KAAK+L,GAAmBiB,SACtB,OAAO,2BACFJ,GADL,IAEEX,UAAU,IAId,QACE,OAAOW,IGrBX/I,iBNPK,SAA0B+I,EAAe3C,GAAc4C,GAC5D,OAAQA,EAAO/M,MACb,KAAKd,EAAiB+N,UACpB,OAAO,2BACFH,GADL,IAEExN,cAAeyN,EAAO7M,QAAQZ,gBAGlC,KAAKH,EAA4B8N,UAC/B,OAAO,2BACFH,GADL,IAEEU,aAAcT,EAAO7M,UAIzB,QACE,OAAO4M,IMRXW,YDlBa,CAACX,EAAe3C,GAAc4C,KAC3C,OAAQA,EAAO/M,MACb,IAPwB,sBAQtB,OAAO,2BACF8M,GADL,IAEEL,cAAeM,EAAO7M,UAI1B,QACE,OAAO4M,OEOEY,OAdf,WACE,MAAMC,EAAa,GACbC,EAAY,GASlB,OAPAD,EAAWE,KAAKC,KAChBH,EAAWE,KAAKE,KAGhBH,EAAUC,KAAKG,6BAAmBL,IAEbM,sBAAYvB,QAAa/H,EAAWuJ,iCAAuBN,K,+2BCZlF,MAAMO,GAAUC,qBAAH,MAUPC,GAAYC,WAAOC,IAAV,KAeEJ,IAiBJK,GAAiB,IAE1B,kBAACH,GAAD,KACE,8BACA,8BACA,+B,iCCjDC,MAAMI,WAAYvN,YA4BvB+J,YAAYzE,GACV6E,MAAM7E,GADW,QAEexB,KAAKwB,MAA7BkI,EAFS,EAETA,SAAUC,EAFD,EAECA,UAClB3J,KAAK8H,MAAQ,CACX4B,WACAC,aAGF3J,KAAK4J,iBAAmB5J,KAAK4J,iBAAiBpD,KAAKxG,MACnDA,KAAK6J,kBAAoB7J,KAAK6J,kBAAkBrD,KAAKxG,MACrDA,KAAK8J,sBAAwB9J,KAAK8J,sBAAsBtD,KAAKxG,MAC7DA,KAAK+J,cAAgB/J,KAAK+J,cAAcvD,KAAKxG,MAC7CA,KAAKgK,WAAahK,KAAKgK,WAAWxD,KAAKxG,MACvCA,KAAKiK,SAAWjK,KAAKiK,SAASzD,KAAKxG,MACnCA,KAAKkK,gBAAkBlK,KAAKkK,gBAAgB1D,KAAKxG,MAG7CD,oBAAqB,IAAD,oJAExB,EAAKoK,SAAW5O,OAAO4O,SACvB,EAAKA,SAASC,YAAc,EAAK5I,MAAM6I,kBACvC,EAAKF,SAASG,UAAY,+BAJF,EAWpB,EAAK9I,MALP+I,EANsB,EAMtBA,iBACAC,EAPsB,EAOtBA,gBACAC,EARsB,EAQtBA,YACAC,EATsB,EAStBA,qBACAC,EAVsB,EAUtBA,sBAEIC,EACHC,MAAMN,IAAsBM,MAAML,GAE/B,KADA,CAACD,EAAkBC,GAEnBM,EAAYD,MAAMJ,GAA6B,GAAdA,EACvC,EAAKM,IAAM,IAAI,EAAKZ,SAASV,IAAI,CAC/BuB,UAAW,EAAKC,aAChBL,SACAM,KAAMJ,EACNK,QAAS,EACTC,QAAS,GACTC,MAAO,oCACPC,gBAAiB,EAAK9J,MAAM+J,aAAc,EAC1CC,WAAY,EAAKhK,MAAM+J,WACvBE,aAAc,cACdC,oBAAoB,EACpBC,aAAa,IAIflL,WAAW,KACT,EAAKsK,IAAIa,UACR,KAEH,EAAKC,kBAAoB,EAAKd,IAAIe,GAAG,OAAQ,EAAK5B,iBAClD,EAAKa,IAAIe,GAAG,UAAW,EAAK7B,UAC5B,EAAKc,IAAIe,GAAG,UAAW,EAAK/B,eAtCJ,EAuCgC,EAAKvI,MAArDkI,EAvCgB,EAuChBA,SAAUC,EAvCM,EAuCNA,UAAWuB,EAvCL,EAuCKA,KAAMa,EAvCX,EAuCWA,iBACnC,EAAKC,kBAAkBtC,EAAUC,EAAWuB,EAAMa,GAE7C,EAAKvK,MAAMyK,kBACd,EAAKlB,IAAImB,WAAWC,UAGjB,EAAK3K,MAAM4K,WACd,EAAKrB,IAAIsB,QAAQF,UAGd,EAAK3K,MAAM+J,aACd,EAAKR,IAAIS,WAAWW,UACpB,EAAKpB,IAAIuB,QAAQH,UACjB,EAAKpB,IAAIwB,gBAAgBJ,UACzB,EAAKpB,IAAIO,gBAAgBa,WAGvB,EAAK3K,MAAMgL,uBACb,EAAKC,uBAGH,EAAKjL,MAAMkL,wBACb,EAAKC,kBAAoB,IAAI,EAAKxC,SAASyC,kBAC3C,EAAK7B,IAAI8B,WAAW,EAAKF,kBAAmB,kBAI5C,EAAKnL,MAAMuK,mBACRlB,MAAMnB,IAAcmB,MAAMlB,MACzBkB,MAAMH,IAA0BG,MAAMF,MAEpCmC,EAAYpC,GAAwBhB,EACpCqD,EAAYpC,GAAyBhB,EAC3C,EAAKqD,aACHF,EACAC,EACA,EAAKvL,MAAMyL,iBACX,EAAKzL,MAAM0L,wBACX,EAAK1L,MAAM2L,wBA9ES,8CAmF1BjD,gBAAgBkD,GACd,MAAMC,EAAU3M,KAAK4M,MAAMF,EAAMG,OAAOC,aAAatC,MACjDlL,KAAK8H,MAAMoD,OAASmC,GACtBrN,KAAKyN,SAAS,CAAEvC,KAAMmC,IAI1BtD,gBACE,GAAI/J,KAAKwB,MAAMuI,cAAe,CAC5B,MAAMmB,EAAOlL,KAAK+K,IAAI2C,UACtB1N,KAAKwB,MAAMuI,cAAcmB,IAI7BjB,WACE,GAAIjK,KAAKwB,MAAMyI,SAAU,CAAC,MAAD,EACFjK,KAAK+K,IAAI4C,YAAtBC,EADe,EACfA,IAAKC,EADU,EACVA,IACb7N,KAAKwB,MAAMyI,SAAS2D,EAAKC,IAI7BC,uBACM9N,KAAK+K,KACP/K,KAAK+K,IAAIgD,SAIPC,mBAAmBC,GAAY,IAAD,kIAC5BC,EAAe,EAAK1M,MAAMkI,SAC1ByE,EAAgB,EAAK3M,MAAMmI,UAC3ByE,EAAW,EAAK5M,MAAM0J,KACtBmD,EAAc,EAAKvG,MAAMoD,OAG3BL,MAAMqD,IAAiB,EAAKpG,MAAM4B,WAAawE,IAC/CrD,MAAMsD,IAAkB,EAAKrG,MAAM6B,YAAcwE,GAE7BC,GAAYC,IAAgBD,IAClD,EAAKpC,kBAAkBkC,EAAcC,EAAeC,EAAU,EAAK5M,MAAMuK,kBAGvE,EAAKjE,MAAMmE,mBAAqB,EAAKzK,MAAMyK,mBAC7C,EAAKwB,SAAS,CAAExB,iBAAkB,EAAKzK,MAAMyK,mBACzC,EAAKzK,MAAMyK,iBACb,EAAKlB,IAAImB,WAAWoC,SAEpB,EAAKvD,IAAImB,WAAWC,WAIpB,EAAKrE,MAAMsE,YAAc,EAAK5K,MAAM4K,YACtC,EAAKqB,SAAS,CAAErB,UAAW,EAAK5K,MAAM4K,YAClC,EAAK5K,MAAM4K,UACb,EAAKrB,IAAIsB,QAAQiC,SAEjB,EAAKvD,IAAIsB,QAAQF,WAIjB,EAAKrE,MAAMyD,aAAe,EAAK/J,MAAM+J,aACvC,EAAKkC,SAAS,CAAElC,WAAY,EAAK/J,MAAM+J,aACnC,EAAK/J,MAAM+J,YACb,EAAKR,IAAIS,WAAW8C,SACpB,EAAKvD,IAAIuB,QAAQgC,SACjB,EAAKvD,IAAIwB,gBAAgB+B,SACzB,EAAKvD,IAAIO,gBAAgBgD,WAEzB,EAAKvD,IAAIS,WAAWW,UACpB,EAAKpB,IAAIuB,QAAQH,UACjB,EAAKpB,IAAIwB,gBAAgBJ,UACzB,EAAKpB,IAAIO,gBAAgBa,YAIzB,EAAK3K,MAAMgL,wBAA0ByB,EAAUzB,wBAC7C,EAAKhL,MAAMgL,sBACb,EAAKC,wBAEL,EAAK1B,IAAIwD,cAAc,EAAKC,mBAC5B,EAAKA,uBAAoB7O,IAIzB,EAAK6B,MAAMkL,wBAA0BuB,EAAUvB,wBAC7C,EAAKlL,MAAMkL,uBACb,EAAKC,kBAAoB,IAAI,EAAKxC,SAASyC,kBAC3C,EAAK7B,IAAI8B,WAAW,EAAKF,kBAAmB,kBAE5C,EAAK5B,IAAIwD,cAAc,EAAK5B,mBAC5B,EAAKA,uBAAoBhN,IAIzB,EAAK6B,MAAMuK,mBAAqBkC,EAAUlC,oBAE1C,EAAKvK,MAAMuK,mBACRlB,MAAMqD,IAAkBrD,MAAMsD,MAC7BtD,MAAM,EAAKrJ,MAAMkJ,uBAA0BG,MAAM,EAAKrJ,MAAMmJ,yBAa5D,EAAK8D,cACP,EAAKA,aAAaV,SAEpB,EAAKW,sBAAmB/O,IAdlBmN,EAAY,EAAKtL,MAAMkJ,sBAAwBuD,EAAUvD,qBACzDqC,EAAY,EAAKvL,MAAMmJ,uBAAyBsD,EAAUtD,sBAEhE,EAAKqC,aACHF,EACAC,EACA,EAAKvL,MAAMyL,iBACX,EAAKzL,MAAM0L,wBACX,EAAK1L,MAAM2L,yBAWf,EAAK3L,MAAM0L,0BAA4Be,EAAUf,yBACjD,EAAKwB,mBAEL,EAAKA,iBAAiBrD,MAAMsD,OAA5B,cAA4C,EAAKnN,MAAM0L,wBAAvD,WAGE,EAAK1L,MAAMyL,mBAAqBgB,EAAUhB,kBAAoB,EAAKyB,mBACrE,EAAKA,iBAAiBE,UAAY,EAAKpN,MAAMyL,kBAI7C,EAAKzL,MAAM2L,wBAA0Bc,EAAUd,uBAC/C,EAAKuB,mBAEL,EAAKA,iBAAiBrD,MAAMwD,MAAQ,EAAKrN,MAAM2L,uBAzGf,8CA6GpCV,uBACEzM,KAAKwO,kBAAoB,IAAIxO,KAAKmK,SAAS2E,kBAC3CvT,OAAOiT,kBAAoBxO,KAAKwO,kBAChCjT,OAAOwT,WAAa,IAGpB,MAAMC,EAA4BhP,KAAKwO,kBAAkBS,mBACzDjP,KAAKwO,kBAAkBS,mBAAqB,KAC1CD,IACAvO,WAAW,KACTT,KAAK+K,IAAIa,UACRrQ,OAAOwT,aAGZ/O,KAAK+K,IAAI8B,WAAW7M,KAAKwO,kBAAmB,gBAG9CxC,kBAAkBtC,EAAUC,EAAWuB,EAAMa,GAC3C,GAAIrC,IAAamB,MAAMnB,IAAaC,IAAckB,MAAMlB,KACtD3J,KAAKyN,SAAS,CACZ/D,WACAC,YACAuB,SAGElL,KAAK+K,KAAK,CACRgB,GACF/L,KAAKgN,aACHhN,KAAKwB,MAAMkJ,sBAAwBhB,EACnC1J,KAAKwB,MAAMmJ,uBAAyBhB,EACpC3J,KAAKwB,MAAMyL,iBACXjN,KAAKwB,MAAM0L,wBACXlN,KAAKwB,MAAM2L,uBAGf,MAAM+B,EAAc,CAAEtE,OAAQ,CAACjB,EAAWD,IACtCwB,IAASL,MAAMK,KACjBgE,EAAYhE,KAAOA,GAErBlL,KAAK+K,IAAIoE,MAAMD,IAKrBlC,aAAatD,EAAUC,EAAWyF,EAAYC,EAAaC,GACrDtP,KAAKyO,eACPzO,KAAKyO,aAAaV,SAClB/N,KAAK0O,sBAAmB/O,GAE1B,IAAI4P,EAAKC,SAASC,cAAc,OAGhC,IAAIC,EAAUC,EAAOC,EAFrBL,EAAGM,UAAY,SAIXC,KAAW,sBAAsBC,SACnCL,EAAW1P,KAAKwB,MAAMwO,iBACtBL,EAAQ,OACRC,EAAS,SAETF,EAAW1P,KAAKwB,MAAMyO,eACtBN,EAAQ,OACRC,EAAS,QAEX,MAAMM,EAAMV,SAASC,cAAc,OACnCS,EAAIC,IAAMT,EACVQ,EAAI7E,MAAMsE,MAAQA,EAClBO,EAAI7E,MAAMuE,OAASA,EACnBL,EAAGa,YAAYF,GAEXd,IACFpP,KAAK0O,iBAAmBc,SAASC,cAAc,QAC/CzP,KAAK0O,iBAAiBE,UAAYQ,EAClCpP,KAAK0O,iBAAiBrD,MAAMgF,SAAW,WAEnCf,IACFtP,KAAK0O,iBAAiBrD,MAAMwD,MAAQS,GAGlCD,IACFrP,KAAK0O,iBAAiBrD,MAAMsD,OAA5B,cAA4CU,EAA5C,UACArP,KAAK0O,iBAAiBrD,MAAMiF,aAAe,OAC3CtQ,KAAK0O,iBAAiBrD,MAAMkF,UAAY,UAGtCT,KAAW,sBAAsBC,SACnC/P,KAAK0O,iBAAiBrD,MAAMmF,IAAM,MAClCxQ,KAAK0O,iBAAiBrD,MAAMoF,KAAO,MACnCzQ,KAAK0O,iBAAiBrD,MAAMqF,QAAU,MACtC1Q,KAAK0O,iBAAiBrD,MAAMsF,YAAc,MAC1C3Q,KAAK0O,iBAAiBrD,MAAMuF,aAAe,MAC3C5Q,KAAK0O,iBAAiBrD,MAAMwF,SAAW,OACvC7Q,KAAK0O,iBAAiBrD,MAAMyF,SAAW,SAEvC9Q,KAAK0O,iBAAiBrD,MAAMmF,IAAM,MAClCxQ,KAAK0O,iBAAiBrD,MAAMoF,KAAO,MACnCzQ,KAAK0O,iBAAiBrD,MAAMqF,QAAU,MACtC1Q,KAAK0O,iBAAiBrD,MAAMwF,SAAW,OACvC7Q,KAAK0O,iBAAiBrD,MAAMyF,SAAW,QAGzCvB,EAAGa,YAAYpQ,KAAK0O,mBAItB1O,KAAKyO,aAAe,IAAIzO,KAAKmK,SAAS4G,OAAOxB,GAC1CyB,UAAU,CAACrH,EAAWD,IACtBuH,MAAMjR,KAAK+K,KAGhBf,WAAWkB,GACLlL,KAAK8H,MAAMoD,OAASA,IACtBlL,KAAKyN,SAAS,CAAEvC,SAChBlL,KAAK+K,IAAImG,OAAOhG,IAIpBpB,wBACE,GAAI9J,KAAKyO,aAAc,CAAC,MAAD,EACAzO,KAAKyO,aAAa0C,YAA/BtD,EADa,EACbA,IAAKD,EADQ,EACRA,IACb5N,KAAK+K,IAAIqG,OAAO,CAAExG,OAAQ,CAACiD,EAAKD,SAC3B,CAAC,MAAD,EAC2B5N,KAAKwB,MAA7BkI,EADH,EACGA,SAAUC,EADb,EACaA,UAClB3J,KAAK+K,IAAIqG,OAAO,CAAExG,OAAQ,CAACjB,EAAWD,MAI1CE,mBACM5J,KAAK+K,KACP/K,KAAK+K,IAAIsG,SAIbxH,oBACM7J,KAAK+K,KACP/K,KAAK+K,IAAIuG,UAIbnV,SAAU,MACAoV,EAAcvR,KAAKwB,MAAnB+P,UADD,EAE+BvR,KAAK8H,MAAnC4B,EAFD,EAECA,SAAUC,EAFX,EAEWA,UAAWuB,EAFtB,EAEsBA,KAC7B,OACE,yBAAKG,MAAK,2BAAOmG,GAAOxG,WAAd,IAAyB4E,OAAQ5P,KAAKwB,MAAMoO,UACpD,yBAAKvE,MAAOmG,GAAOC,SAAUC,IAAKnC,GAAOvP,KAAKiL,aAAesE,IAC5DgC,GACCvR,KAAK+K,KACLwG,EACEvR,KAAK+K,IACLrB,EACAC,EACA3J,KAAK6J,kBACL7J,KAAK4J,iBACL5J,KAAK8J,sBACLoB,EACAlL,KAAKgK,cAOjB,MAAMwH,GAAS,CACbxG,UAAW,CACT2E,MAAO,OACPgC,WAAY,UACZhD,OAAQ,oBACR2B,aAAc,MACdsB,QAAS,OACTvB,SAAU,YAEZoB,SAAU,CACR7B,OAAQ,OACRD,MAAO,S,6bCnYX,MAAMkC,WAAiB3V,YAAkB,eAAD,oBACtC4V,QAAU,KACR,MAAMC,EAASxW,OAAOyW,KAAK,cAAe,UAClCC,EAAqBjS,KAAKwB,MAA1ByQ,iBACJF,GAAUA,EAAOvU,UAAYyU,IAC/BF,EAAOvU,SAAS0U,KAAhB,0CAA0DD,EAA1D,2BAIJ9V,SAAU,MAAD,EAWH6D,KAAKwB,MATP5G,EAFK,EAELA,OACAC,EAHK,EAGLA,OACAwP,EAJK,EAILA,kBACAvP,EALK,EAKLA,cACAqX,EANK,EAMLA,eACAC,EAPK,EAOLA,YACAzI,EARK,EAQLA,UACAD,EATK,EASLA,SACAmG,EAVK,EAULA,UAGF,MAAwB,kBAAbnG,GAA8C,kBAAdC,EAEvC,kBAAC0I,GAAD,CAAkBxC,UAAWA,GAC3B,kBAACrG,GAAD,OAMJ,kBAAC,GAAD,CAAWqG,UAAWA,EAAWiC,QAAS9R,KAAK8R,SAC7C,kBAAC,GAAD,CACEpI,SAAUA,EACVC,UAAWA,EACXa,gBAAiBd,EACjBa,iBAAkBZ,EAClBU,kBAAmBA,EACnB0B,kBAAkB,EAClBK,WAAW,EACXb,YAAY,EACZd,YAAa2H,EACbpC,iBAAiB,yBACjBC,eAAe,yBACfsB,UAAW,CACTxG,EACArB,EACAC,EACAE,EACAD,EACAE,EACAwI,EACAtI,IAOE,kBAAC,eAAD,CACEe,IAAKA,EACLrB,SAAUA,EACVC,UAAWA,EACX3F,WAAYhE,KAAKwB,MAAM+Q,UACvBrO,YAAalE,KAAKwB,MAAM0C,YACxBtJ,OAAQA,EACRC,OAAQA,EACR2X,aAAc,GACdC,iBAAkB3X,EAClBqX,eAAgBA,EAChBO,SAhBc,EAiBdC,aAhBkB,EAiBlBC,SAhBc,EAiBdC,SAhBc,QA0B9B,MAAMxJ,GAAYC,WAAOC,IAAV,MAST8I,GAAmB/I,WAAOC,IAAV,MA8Bf,MAAMuJ,GAAUxJ,mBAAO/G,mBAxB9B,SAAgB1D,GAAQ,MACd8D,EAAkC9D,EAAlC8D,aAAc4C,EAAoB1G,EAApB0G,gBADD,EAEqB7C,EAA8B7D,GAAhEjE,EAFa,EAEbA,OAAQC,EAFK,EAELA,OAAQC,EAFH,EAEGA,cAFH,EAGuBiJ,EAAyBlF,GAApD0T,EAHI,EAGb1P,QAAoBqB,EAHP,EAGOA,YAEtBmG,EACJ1H,GAAgBA,EAAaC,QAAUD,EAAaC,OAAOwE,oBAC7D,IAAKiD,EACH,MAAM,IAAI0I,MAAM,+BAKlB,MAAO,CACLd,iBAFA1M,GAAmBA,EAAgBA,iBAAmBA,EAAgBA,gBAAgByN,SAGtF3I,oBACAzP,SACAC,SACAC,gBACAyX,YACArO,iBAI0B3B,CAAgBsP,IAAvBvI,CAAH,MCnKpB,MAAM2J,WAAqB/W,YACzBC,SACE,OAAO6D,KAAKwB,MAAM0R,SAAS,CACzB/C,IAAKnQ,KAAKwB,MAAM2R,WAef,MAAMC,GAAc7Q,mBAV3B,SAAgB1D,EAAOwU,GAAW,MACxBC,EAAaD,EAAbC,SACFC,GAAc1U,EAAM2U,MAAQ3U,EAAM2U,KAAKC,eAAiB5U,EAAM2U,KAAKC,cAAcC,OACrF,IAAIJ,GAEN,MAAO,CACLH,QAFcI,GAAaA,EAAUI,OAMdpR,CAAgB0Q,IC5B9BW,GAAS,CACpB,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,OAEWC,GAAO,CAAC,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,O,6mCCbxD,MAAMC,GAASxK,WAAOyK,GAAV,MAONC,GAAS1K,WAAO2K,GAAV,MAONC,GAAS5K,WAAO6K,GAAV,MAObC,GAAW9K,WAAO+K,EAAV,KAGV7S,GACA,cAAeA,GACf8S,eADA,KAIwB9S,EAAM+S,YAKrBC,GAAQlL,mBAAO8K,GAAP9K,CAAH,MAMLmL,GAAQnL,mBAAO8K,IAAUM,MAAMlT,IAWnC,CACLmT,OAVInT,EAAMoT,KACD,MACEpT,EAAMqT,SACR,MAEA,QAPQvL,CAAH,KAgBD9H,GAASA,EAAMmT,QAGnBG,GAAQxL,mBAAO8K,IAAUM,MAAMlT,IASnC,CACLqN,MARIrN,EAAMuT,UACD,QAEA,6BALQzL,CAAH,KAeP9H,GAASA,EAAMqN,OC/CnB,SAASmG,IAAyB,SACvCtL,EADuC,UAEvCC,EAFuC,OAGvCsL,EAAS,EAH8B,MAIvCC,EAAQ,UAJ+B,QAKvC3a,GA1BsB,EAqBiB,QAMvCmH,GAAU,IASV,OAAOlH,IACL,MAAMC,EAAgCD,EAASE,KACvC0I,EAAoD3I,EAApD2I,iBAAkBxI,EAAkCH,EAAlCG,OAAQC,EAA0BJ,EAA1BI,OAAQC,EAAkBL,EAAlBK,cAC1C,OAAON,EACLR,YAAU8K,QAAQkQ,yBAAlB,UACKtL,EADL,YACiBC,GACf,oBACAsL,EACAC,EACA9R,EACAxI,EACAC,EACAC,EACAP,EACAmH,KAqCD,SAASyT,IAA0B,SACxCzL,EADwC,UAExCC,EAFwC,OAGxCsL,EAAS,EAH+B,MAIxCC,EAAQ,UAJgC,QAKxC3a,GA5FsB,EAuFkB,QAMxCmH,GAAU,IASV,OAAOlH,IACL,MAAMC,EAAgCD,EAASE,KACvC0I,EAAoD3I,EAApD2I,iBAAkBxI,EAAkCH,EAAlCG,OAAQC,EAA0BJ,EAA1BI,OAAQC,EAAkBL,EAAlBK,cAC1C,OAAON,EACLR,YAAU8K,QAAQqQ,0BAAlB,UACKzL,EADL,YACiBC,GACf,oBACAsL,EACAC,EACA9R,EACAxI,EACAC,EACAC,EACAP,EACAmH,KCrHD,SAAS0T,GAAMC,GACpB,MAAqB,kBAAVA,EACH,GAAN,OARa,EAQIA,EAAjB,MAEgBA,EAKPtK,IAAIqK,IAAOE,KAAK,K,qVCgB7B,MAAMC,GAAc,SAAUC,EAAkBC,GAC9C,OAAQjU,GACCgU,KAAYhU,GAAZ,UAAwBiU,EAAxB,aAAoCjU,EAAMgU,GAA1C,MAGLE,GAAmB,SAAUF,EAAkBC,GACnD,OAAQjU,GAC4B,kBAApBA,EAAMgU,IAAb,UAA0CC,EAA1C,aAAsDL,GAAM5T,EAAMgU,IAAlE,MAGLG,GAAkB,SAAUpU,GAChC,OAAQC,GACqB,kBAAhBA,EAAMD,GACT,GAAN,OAAUA,EAAV,aAAmBC,EAAMD,GAAzB,OAEM,GAAN,OAAUA,EAAV,aAAmBC,EAAMD,KAKlBqU,GAAMtM,WAAOC,IAAV,KACZgM,GAAY,WAAY,YACxBA,GAAY,UAAW,WACvBA,GAAY,aAAc,eAC1BA,GAAY,gBAAiB,kBAC7BA,GAAY,iBAAkB,mBAC9BA,GAAY,cAAe,gBAC3BA,GAAY,YAAa,cACzBA,GAAY,WAAY,aACxBI,GAAgB,SAChBA,GAAgB,UAChBJ,GAAY,WAAY,aAExB,EAAGM,UACHA,GACAvB,eADI,KAEMuB,GAGVN,GAAY,SAAU,UACtBG,GAAiB,YAAa,cAC9BA,GAAiB,cAAe,gBAChCA,GAAiB,eAAgB,iBACjCA,GAAiB,aAAc,eAE/BA,GAAiB,UAAW,WAC5BA,GAAiB,aAAc,eAC/BA,GAAiB,eAAgB,iBACjCA,GAAiB,gBAAiB,kBAClCA,GAAiB,cAAe,iBCzDpC,MAAMI,WAA0B5Z,YAC9BC,SAAU,MAAD,EAC+C6D,KAAKwB,MAAnD0R,EADD,EACCA,SAAU7X,EADX,EACWA,MAAOuW,EADlB,EACkBA,QAAS9L,EAD3B,EAC2BA,gBAE5BiQ,EAPV,SAA6B1a,GAC3B,MAAwB,kBAAVA,EAAqBqF,KAAK4M,MAAMjS,GAAS,GAAKA,EAMtC2a,CAAoB3a,GAClC4a,EAlBV,SAAmCnQ,GACjC,GAAwB,YAApBA,EACF,MAAO,IAET,GAAwB,WAApBA,EACF,MAAO,IAET,MAAM,IAAIiN,MAAM,2BAWDmD,CAA0BpQ,GAEvC,MAAwB,oBAAboN,EACFA,EAAS,CAAE6C,cAAaI,OAFlB,OAE0BF,SAEvB,aAAZrE,EACI,GAAN,OAAUmE,GAAV,OALW,QAKX,OAAiCE,GACZ,eAAZrE,EACH,GAAN,OAAUmE,GAEJ,GAAN,OAAUA,GAAV,OATW,SAenB,MAOaK,GAAmB7T,kBAPjB1D,IAEN,CACLiH,gBAFqBjH,EAAf0J,WAEsBzC,kBAIAvD,CAAgBuT,I,wlBCHhD,MAsFMzM,GAAYC,WAAOC,IAAV,MAMT8M,GAAU/M,WAAO4G,IAAV,MAIPoG,GAAmBhN,WAAOC,IAAV,MAKhBgN,GAAgBjN,WAAOC,IAAV,MAoDZ,MAAMiN,GAAUlN,mBACrB/G,kBA7Ca1D,IAAU,MACf4X,EAAiD5X,EAAjD4X,SAAUC,EAAuC7X,EAAvC6X,kBAAmBnR,EAAoB1G,EAApB0G,gBAC/BoR,EAAkBF,GAAYA,EAASG,aAAWjX,EAFlC,EAKnB+W,GAAqBA,EAAkBA,mBAAsB,GAD3CG,EAJC,EAIdC,YAAsCC,EAJxB,EAIeC,QAE/BC,EACHN,GACCA,EAAeO,sBACfP,EAAeO,qBAAqB,SACtCvX,EAcF,MAAO,CACLwX,YAbAN,GAAkBI,EACd,CACElB,YAAarV,KAAK4M,MAAMuJ,EAAed,aACvCqB,KAAML,EAAarW,KAAK4M,MAAMyJ,EAAWM,sBAAmB1X,EAC5D2X,IAAKP,EAAarW,KAAK4M,MAAMyJ,EAAWQ,qBAAkB5X,EAC1D6X,UAAWX,EAAeW,UAC1BC,QAASR,EAAkBS,yBAAsB/X,EACjD2T,SAAUuD,EAAevD,eAAY3T,EACrCgY,gBAAiBd,EAAec,sBAAmBhY,QAErDA,EAIJiY,aACErS,GACAA,EAAgBA,iBAChBA,EAAgBA,gBAAgBsS,qBAClCC,gBACGjB,GAAkB,IAAIkB,KAAKlB,EAAemB,uCAAqCrY,KAItF,SAAoBnF,GAClB,OAAOgI,6BACL,CACE2S,8BAEF3a,KAKF+H,CA1JkB,EAAG4U,cAAaW,kBAAiBF,eAAc/H,gBACjE,MAAMoI,EACJH,GAAe,UAEblE,GAAOkE,EAAgBI,YAFV,YAGXJ,EAAgBK,UAHL,aAGmBL,EAAgBM,eAC9CC,EAAcP,GAxBtB,SAA0BQ,GACxB,MAAM,GAAN,QASkBC,EATGD,EAAKE,WAUnBD,EAAa,KAAO,EAAI,GAAKA,EAAa,IAVjD,aAKqBE,EALkCH,EAAKI,cAMpDD,GAAiB,EAAI,IAAM,IAAMA,GANzC,YAaF,SAAmBF,GACjB,OAAOA,EAAa,GAAK,KAAO,KAd6CI,CAC3EL,EAAKE,aAIT,IAAuBC,EAIHF,EAcqBK,CAAiBd,GAExD,OAAKX,EAWH,kBAAC,GAAD,CAAWtH,UAAWA,GACpB,kBAAC+F,GAAD,CAAKiD,aAAc,GACjB,kBAAC7E,GAAD,KAAS4D,IAGX,kBAAChC,GAAD,CAAKiD,aAAc,EAAGjH,QAAQ,OAAOkH,cAAc,OACjD,kBAAClD,GAAD,CAAKmD,YAAa,GAChB,kBAACtE,GAAD,KAAQwD,IAEV,kBAACxD,GAAD,KAAQ4D,IAGV,kBAACzC,GAAD,CAAKhE,QAAQ,OAAOkH,cAAc,OAChC,kBAAClD,GAAD,CAAKC,KAAM,GACT,kBAACS,GAAD,KACE,kBAACF,GAAD,CAAkB/a,MAAO8b,EAAYpB,aAClC,EAAGA,cAAaI,SAAQF,UACvB,kBAACnC,GAAD,KACGiC,EACD,0BACE1K,MAAO,CAAEwF,SAAU,GAAImI,cAAe,MAAO3I,SAAU,WAAYG,IAAK,IAEvE2F,EACAF,MAOX,kBAACL,GAAD,KACoC,kBAA1BuB,EAAYK,WAClB,kBAAC5B,GAAD,CAAKiD,aAAc,IACjB,kBAACpE,GAAD,mBACa,kBAAC2B,GAAD,CAAkB/a,MAAO8b,EAAYK,cAKtD,kBAAC/C,GAAD,UACK,IACH,kBAAC2B,GAAD,CACE/a,MAAmC,kBAArB8b,EAAYC,KAAoBD,EAAYC,KAAO,OAChE,IAJL,OAKO,IACL,kBAAChB,GAAD,CACE/a,MAAkC,kBAApB8b,EAAYG,IAAmBH,EAAYG,IAAM,UAMvE,kBAAC1B,GAAD,CAAKhE,QAAQ,OAAOkH,cAAc,SAASjD,KAAM,EAAGoD,WAAW,UAC7D,kBAAC3C,GAAD,KACE,kBAACC,GAAD,KACE,kBAACnD,GAAD,CAAa8F,KAAK,QAAQ5F,SAAU6D,EAAY7D,UAC7C,EAAGnD,SAAU,kBAACkG,GAAD,CAAS8C,IAAKhC,EAAY7D,SAAUnD,IAAKA,OAI7D,kBAACsE,GAAD,KAAQ0C,EAAYQ,oBArExB,kBAAC,GAAD,CAAW9H,UAAWA,GACpB,kBAAC+F,GAAD,CAAKhE,QAAQ,OAAOqH,WAAW,SAASG,eAAe,SAASxJ,OAAO,QACrE,kBAACpG,GAAD,UA6IaF,CAAH,M,y/CCjLb,MAAM+P,WAA2Bnd,YACtCC,SAAU,MAAD,EACgC6D,KAAKwB,MAApC8X,EADD,EACCA,YAAaC,EADd,EACcA,cACfjB,EAAO,IAAIP,MAAMuB,GAAeC,GAAeC,sBAC/CC,EAAO,UAAM7F,GAAO0E,EAAKJ,YAAlB,YAAiCI,EAAKH,WACnD,OACE,kBAACuB,GAAD,KACE,kBAAC9D,GAAD,CAAKlF,QAAS,EAAGkB,QAAQ,OAAOwH,eAAe,UAC7C,kBAAC3E,GAAD,KAAQgF,IAGTH,GACC,kBAACK,GAAD,KACE,kBAAC/D,GAAD,CAAKiD,aAAc,IACjB,kBAACrE,GAAD,KACE,kBAAC4B,GAAD,CAAkB/a,MAAOie,EAAYvD,gBAIzC,kBAAC,GAAD,KACE,kBAAC3C,GAAD,CAAa8F,KAAK,QAAQ5F,SAAUgG,EAAYhG,UAC7C,EAAGnD,SAAU,kBAAC,GAAD,CAASA,IAAKA,MAIhC,kBAACyJ,GAAD,KACE,kBAAC9E,GAAD,CAAOP,UAAW,GAAI+E,EAAY5B,sBAKxC,kBAACmC,GAAD,KACE,kBAACC,GAAD,CAAgBtJ,IAAK8I,EAAc,GAAK,GACtC,kBAAC1D,GAAD,CAAKiD,aAAc,IACjB,kBAACrE,GAAD,KACG+E,GAAiB,kBAACnD,GAAD,CAAkB/a,MAAOke,EAAcxD,gBAI7D,kBAAC,GAAD,KACGwD,GACC,kBAACnG,GAAD,CAAa8F,KAAK,QAAQ5F,SAAUiG,EAAcjG,UAC/C,EAAGnD,SAAU,kBAAC,GAAD,CAASA,IAAKA,MAKlC,kBAACyJ,GAAD,KACGL,GAAiB,kBAACzE,GAAD,CAAOP,UAAW,GAAIgF,EAAc7B,yBASpE,MAAMgC,GAAepQ,WAAOC,IAAV,MAUZoQ,GAAerQ,WAAOC,IAAV,MAUZsQ,GAAyBvQ,WAAOC,IAAV,MAStBuQ,GAAiBxQ,WAAOC,IAAV,KAOhB/H,GAAU,QAASA,EAAT,eAAyBA,EAAMgP,IAA/B,OAA0C,IAGlDoJ,GAAuBtQ,WAAOC,IAAV,MAQpB8M,GAAU/M,WAAO4G,IAAV,MAIPqG,GAAgBjN,WAAOC,IAAV,MAYNwQ,GAAmB,WAC9B,OACE,kBAACL,GAAD,KACE,kBAACC,GAAD,MACA,kBAACG,GAAD,Q,qIC3IN,MAAME,GAAiB,CACrBC,YCVqBzY,GACrB,uCAAKmO,MAAO,GAAIC,OAAQ,IAAQpO,GAC9B,0BACE0Y,KAAK,OACLC,EAAE,4DACFC,SAAS,aDMbC,aEXsB7Y,GACtB,uCAAKmO,MAAO,GAAIC,OAAQ,IAAQpO,GAC9B,0BACE0Y,KAAK,OACLC,EAAE,6DACFC,SAAS,aFObE,OGZgB9Y,GAChB,uCAAKmO,MAAO,GAAIC,OAAQ,IAAQpO,GAC9B,0BACE2Y,EAAE,qSACFD,KAAK,OACLE,SAAS,aHQbG,aIbsB/Y,GACtB,uCAAKmO,MAAO,GAAIC,OAAQ,IAAQpO,GAC9B,0BACE2Y,EAAE,2MACFD,KAAK,OACLE,SAAS,aJSbI,WKdoBhZ,GACpB,uCAAKmO,MAAO,GAAIC,OAAQ,IAAQpO,GAC9B,0BACE0Y,KAAK,OACLE,SAAS,UACTD,EAAE,+ELkBKM,GAAOnR,mBAAO,EAAG4P,OAAM3X,OAAMsO,gBACxC,MAAM3T,EAAY8d,GAAezY,GACjC,OAAO,kBAACrF,EAAD,CAAW2T,UAAWA,EAAW6K,QAAQ,YAAY/K,MAAOuJ,EAAMtJ,OAAQsJ,KAF/D5P,CAAH,KAKJ9H,GAAiBA,EAAMqN,OAAS,W,06BMlBtC,MAAM8L,GAAW,SAASnZ,GAAe,MACtCoZ,EAAqBpZ,EAArBoZ,OAAQ1H,EAAa1R,EAAb0R,SAD6B,EAEX2H,mBAAS,MAFE,oBAEtCC,EAFsC,KAE3BC,EAF2B,OAGPF,oBAAS,GAHF,oBAGtCG,EAHsC,KAGzBC,EAHyB,OAIDJ,mBAAS,MAJR,oBAItCK,EAJsC,KAItBC,EAJsB,OAOJN,mBAAS,GAPL,oBAOtCO,EAPsC,KAO1BC,EAP0B,KAQvCC,EAAeC,iBAAO,MAE5B,SAASC,EAAcnL,EAAkBoL,GAAW,GAC9CA,EACFH,EAAaI,QAAQC,SAAS,CAC5BlL,KAAMJ,EACNuL,SAAU,YAIZN,EAAaI,QAAQG,WAAaxL,EAClCgL,EAAmBhL,IAWvB,SAASyL,IACP,OAAIR,EAAaI,QACRJ,EAAaI,QAAQG,WAErBT,EAIX,OACE,kBAAC,KAAD,KACG,EAAGW,WAAYC,EAAcC,YAAaC,MACzC,MAAMC,EAAeD,EAAqBE,MAAMzM,MAC1C0M,GAnBaC,EAmBkBJ,EAAqBE,MAlBzDtB,EAGEA,EAAUnL,MAAQ2M,EAAgB3M,MAFhC,GAFX,IAAyB2M,EAoBnB,MACMC,EAAgBnB,EAAaiB,EAC7BG,EAAgBpB,EAFD,EAGfqB,GAAkBF,IAAkBC,EAE1C,SAASE,EAAeC,GACtB,OAAOC,iBAAMD,EANM,EAMmBN,GAYxC,SAASQ,EAAYC,GACnB7B,GAAe,GACfE,EAAkB,CAChB4B,eAAgBjB,IAChBkB,UAAWF,EAAEG,QAIjB,SAASC,IACPjC,GAAe,GACfE,EAAkB,MAIpB,SAASgC,EAAYL,GACnB,GAAI9B,GAAkC,OAAnBE,EAAyB,CAC1C,MAAMkC,EAAcN,EAAEG,MAChBI,EAASnC,EAAe8B,UAAYI,EAE1C5B,EAAckB,EADMxB,EAAe6B,eAAiBM,IACT,IAI/C,SAASC,EAASR,GACX9B,GACHK,EAAmByB,EAAEvP,OAAOsO,YAIhC,OACE,kBAAC,GAAD,CAAWnK,IAAKsK,GACd,kBAACpG,GAAD,CAAKhE,QAAQ,OAAOkH,cAAc,MAAMD,aAAc,GACpD,kBAACjD,GAAD,CAAKC,KAAM,GAAI+E,IACb6B,GACA,kBAACc,GAAD,KACE,kBAACC,GAAD,CAAY1L,QAAS,KAtC7B0J,EADqBkB,EAAeZ,IAAsBK,IAC9B,IAsCmBsB,YAAajB,GAClD,kBAAC/B,GAAD,CAAMlZ,KAAK,cAAcsN,MAAM,QAAQqK,KAAM,MAE/C,kBAACsE,GAAD,CAAY1L,QAAS,KA9C7B0J,EADqBkB,EAAeZ,IAAsBK,IAC9B,IA8CmBsB,YAAalB,GAClD,kBAAC9B,GAAD,CAAMlZ,KAAK,eAAesN,MAAM,QAAQqK,KAAM,QAMtD,kBAAC,KAAD,CACEwE,SAAU,EAAGtB,YACXrB,EAAaqB,KAGd,EAAGL,gBACF,kBAAC4B,GAAD,CACEjM,IAAK4J,EACLuB,YAAaA,EACbK,UAAWA,EACXC,YAAaA,EACbG,SAAUA,GAEV,kBAAC1H,GAAD,CAAKlE,IAAKqK,EAAYnK,QAAQ,cAAckH,cAAc,OACvD5F,SAYf7J,GAAYC,WAAOC,IAAV,MAKToU,GAAsBrU,WAAOC,IAAV,KAUjBqM,IAKF4H,GAAalU,WAAOC,IAAV,KACH/H,GAAUA,EAAMic,WAAa,GAAM,GAe1CF,GAAsBjU,WAAOC,IAAV,KAGjBiU,ICnFD,MAAMI,GAAYrb,kBAtDV1D,IAAU,MACf4X,EAAa5X,EAAb4X,SAEFoH,EAAiBpH,GAAYA,EAASqH,YAAUne,EAChDoe,EAAQ,IAAIhG,KAClBgG,EAAMC,YAAY,EAAG,EAAG,EAAG,GAE3B,MAAMC,EAAiBC,KAAEC,QACtBN,GAAiBA,EAAcO,sBAAyB,GACzDC,IACE,MAAMC,EAAO,IAAIvG,KAAKsG,EAAc7E,sBAEpC,OADA8E,EAAKN,YAAY,EAAG,EAAG,EAAG,IAClBM,EAAKC,UAAYR,EAAMQ,WAAxB,QAILC,EAAeN,KAAEO,UAAUR,EAAgBS,IAC/C,IAAIpF,OAAc3Z,EACd4Z,OAAgB5Z,EAEpB,GAAI+e,EAAalgB,QAAU,EACzB8a,EAAcoF,EAAa,GAC3BnF,EAAgBmF,EAAa,OACxB,CACL,MAAMC,EAAiBD,EAAa,GACpC,GAAIC,EAAgB,CACC,IAAI5G,KAAK4G,EAAenF,sBAC5BhB,YAAc,GAC3Bc,EAAcqF,EAEdpF,EAAgBoF,GAItB,MAAO,CACLrF,cACAC,mBASJ,MAAO,CACLiF,aANwBN,KAAEU,KAAKJ,GAAcK,OAAO,CAACC,EAAKC,KAC1DD,EAAIE,SAASD,EAAW,KAAOP,EAAaO,GACrCD,GACN,OAOL,SAAoBtkB,GAClB,OAAOgI,6BAAmB,GAAIhI,KAGP+H,CA3EH,EAAGic,kBAErB,kBAAC,GAAD,CAAU5D,OAAQ,kBAAC1G,GAAD,gBACS,IAAxBsK,EAAahgB,QACZ0f,KAAEe,MAAM,GAAI1gB,GACH,kBAAC,GAAD,CAAkBnD,IAAKmD,KAEjCigB,EAAazT,IAAIqR,IAChB,MAAMhhB,GAAOghB,EAAM9C,aAAe8C,EAAM7C,eAAeC,qBACvD,OACE,kBAAC,GAAD,CACEpe,IAAKA,EACLke,YAAa8C,EAAM9C,YACnBC,cAAe6C,EAAM7C,oBCgG1B,SAAS2F,IAA6B,SAC3CxV,EAD2C,UAE3CC,EAF2C,OAG3CsL,EAAS,EAHkC,MAI3CC,EAAQ,UAJmC,QAK3C3a,GAnIsB,EA8HqB,QAM3CmH,GAAU,IASV,OAAOlH,IACL,MAAMC,EAAgCD,EAASE,KACvCyI,EAAwD1I,EAAxD0I,qBAAsBvI,EAAkCH,EAAlCG,OAAQC,EAA0BJ,EAA1BI,OAAQC,EAAkBL,EAAlBK,cAC9C,OAAON,EACLR,YAAU8K,QAAQoa,6BAAlB,UACKxV,EADL,YACiBC,GACf,oBACAsL,EACAC,EACA/R,EACAvI,EACAC,EACAC,EACAP,EACAmH,KCxID,SAASyd,IAA2B,SACzCzV,EADyC,UAEzCC,EAFyC,OAGzCsL,EAAS,EAHgC,MAIzCC,EAAQ,UAJiC,QAKzC3a,GAvBsB,EAkBmB,QAMzCmH,GAAU,IASV,OAAOlH,IACL,MAAMC,EAAgCD,EAASE,KACvCqI,EAAqDtI,EAArDsI,kBAAmBnI,EAAkCH,EAAlCG,OAAQC,EAA0BJ,EAA1BI,OAAQC,EAAkBL,EAAlBK,cAC3C,OAAON,EACLR,YAAU8K,QAAQqa,2BAChBzV,EACAC,EACA5G,EACAnI,EACAC,EACAC,EACAP,EACAmH,KC5BD,SAAS0d,IAAkB,SAChC1V,EADgC,UAEhCC,EAFgC,QAGhCpP,GAZsB,EASU,QAIhCmH,GAAU,IAOV,OAAOlH,IACL,MAAMC,EAAgCD,EAASE,KACvC2I,EAAkD5I,EAAlD4I,eAAgBzI,EAAkCH,EAAlCG,OAAQC,EAA0BJ,EAA1BI,OAAQC,EAAkBL,EAAlBK,cAExC,OAAON,EACLR,YAAU8K,QAAQua,oBAChB3V,EACAC,EACAtG,EACAzI,EACAC,EACAC,EACAP,EACAmH,EACA9C,IACA,KACA3C,EAAgBmF,SAChBnF,EAAgBoF,iBAAmB,UACnClC,IACAG,IACArD,EAAgBiF,oBAMjB,SAASoe,GAAgB5V,EAAkBC,GAChD,8CAAO,WAAMnP,GAAN,+BAAAsE,EAAA,6DACCrE,EAAYD,EnCyCb,CAACA,EAAUsJ,IACTC,EAAyBD,MmCzCfyO,EAA6C9X,EAAtDoI,QAAoBjI,EAAkCH,EAAlCG,OAAQC,EAA0BJ,EAA1BI,OAAQC,EAAkBL,EAAlBK,cACtCC,EAAK,IAAIf,YAAUC,UAAUslB,YAAYhN,EAAW3X,EAAQC,GAS7C,eAZhB,SAaqBE,EAAGykB,eADR,eACqC1kB,GAbrD,cAaC2kB,EAbD,OAcCC,EAAWD,EAAYE,GAAGvjB,GAd3B,UAgBgBrB,EAAGukB,gBACtB,IACA,IACA5V,EACAC,EACA+V,EACA,IACA5kB,GAvBG,eAgBCgM,EAhBD,yBAyBEA,EAAO8Y,OAAOC,KAzBhB,4CAAP,sDCxDK,SAASC,GAAmBpW,EAAkBC,GACnD,OAAOnP,GACEulB,QAAQC,IAAI,CACjBxlB,EACE2a,GAA0B,CACxBzL,WACAC,eAGJnP,EAASwa,GAAyB,CAAEtL,WAAUC,eAC9CnP,EACE0kB,GAA6B,CAC3BxV,WACAC,eAGJnP,EAAS2kB,GAA2B,CAAEzV,WAAUC,eAChDnP,EAAS4kB,GAAkB,CAAE1V,WAAUC,iB,gpBCNtC,MAAMsW,GAAU,SAAUze,GAAe,MACtC0e,EAAqD1e,EAArD0e,OAAQC,EAA6C3e,EAA7C2e,cAAelL,EAA8BzT,EAA9ByT,OAAQmL,EAAsB5e,EAAtB4e,WAAYzQ,EAAUnO,EAAVmO,MAEnD,OACE,gCACGwQ,EACD,gBAACE,GAAD,CAAapL,OAAQA,EAAQiL,OAAQA,EAAQE,WAAYA,EAAYzQ,MAAOA,GACzEnO,EAAM0R,YAMf,SAASoN,GAAUC,EAA4BtL,GAC7C,IAAKA,EACH,OAAO,KAGT,GAAkB,QAAdsL,EAAqB,CACvB,GAA6B,kBAAlBtL,EAAOuL,OAChB,MAAM,oBAAN,OAA2BvL,EAAOuL,OAAlC,QACK,GAA0B,kBAAfvL,EAAOzE,IACvB,MAAM,oBAAN,OAA2ByE,EAAOzE,IAAlC,aAEG,GAAkB,UAAd+P,EAAuB,CAChC,GAA4B,kBAAjBtL,EAAOwL,MAChB,MAAM,UAAN,OAAiBxL,EAAOwL,MAAxB,MACK,GAA2B,kBAAhBxL,EAAOxE,KACvB,MAAM,UAAN,OAAiB,EAAIwE,EAAOxE,KAA5B,OAKC,MAAM4P,GAAc/W,WAAOC,IAAV,KAGnB/H,GACDA,EAAM4e,WACF9L,eADJ,KAIkB9S,EAAMmO,MAAQ,EAErBnO,EAAMmO,OAEb2E,eARJ,KASQgM,GAAU,MAAO9e,EAAMyT,SAAW,YAClCqL,GAAU,QAAS9e,EAAMyT,SAAW,cAM3CzT,IACAA,EAAM0e,QACP5L,eADA,O,uwCClDG,MAAMoM,WAAkBC,IAAMzkB,UAGnC+J,YAAYzE,GACV6E,MAAM7E,GADkB,KAU1Bof,mBAAsB9D,IACpB,MAAM+D,EAAO/D,EAAEgE,cAAczlB,MAC7B2E,KAAKyN,SAAS,CAAEsT,UAAWF,EAAMG,qBAAsB,IACvDhhB,KAAKwB,MAAMof,mBAAmBC,IAbN,KAgB1BI,aAAe,CAACna,EAAgBoa,KAC9BlhB,KAAKwB,MAAM2f,eAAera,EAAQoa,GAClClhB,KAAKyN,SAAS,CACZsT,UAAW,GACXK,oBAAoB,IAEtBphB,KAAKwB,MAAMof,mBAAmB,KAtBN,KAyB1BS,kBAAqBC,IAEnB,GAAIA,IAD6BthB,KAAK8H,MAA9BkZ,qBACwC,CAC9C,MAAMla,EAAS9G,KAAKwB,MAAM+f,cAAcD,GACxCthB,KAAKyN,SAAS,CACZuT,qBAAsBM,EACtBP,UAAWja,MA/BS,KAoC1B0a,gBAAkB,KAChBxhB,KAAKqhB,kBACH3gB,KAAK+gB,IAAIzhB,KAAK8H,MAAMkZ,qBAAuB,EAAGhhB,KAAKwB,MAAM+f,cAAc/iB,OAAS,KAtC1D,KA0C1BkjB,gBAAkB,KAChB1hB,KAAKqhB,kBAAkB3gB,KAAKihB,IAAI3hB,KAAK8H,MAAMkZ,qBAAuB,EAAG,KA3C7C,KA8C1BY,cAAiB9E,IACf,GAAkB,IAAdA,EAAE+E,QAEJ/E,EAAEgF,iBACEhF,EAAEiF,SACJ/hB,KAAK0hB,kBAEL1hB,KAAKwhB,uBAEF,GAAkB,KAAd1E,EAAE+E,QAEX/E,EAAEgF,iBACF9hB,KAAK0hB,uBACA,GAAkB,KAAd5E,EAAE+E,QAEX/E,EAAEgF,iBACF9hB,KAAKwhB,uBACA,GAAc,UAAV1E,EAAE1hB,IAAiB,CAC5B0hB,EAAEgF,iBACF,MAAMhb,EAAS9G,KAAKwB,MAAM+f,cAAcvhB,KAAK8H,MAAMkZ,sBACnDhhB,KAAKihB,aAAana,EAAQ9G,KAAK8H,MAAMkZ,sBACjChhB,KAAKqV,OACPrV,KAAKqV,MAAM2M,SAjEfhiB,KAAK8H,MAAQ,CACXiZ,UAAW,GACXK,oBAAoB,EACpBJ,qBAAsB,GAmE1B7kB,SAAU,MAAD,EAC6C6D,KAAKwB,MAAjDygB,EADD,EACCA,YAAaV,EADd,EACcA,cAAeW,EAD7B,EAC6BA,YAD7B,EAEyDliB,KAAK8H,MAA7DiZ,EAFD,EAECA,UAAWK,EAFZ,EAEYA,mBAAoBJ,EAFhC,EAEgCA,qBACjCmB,EAAoBD,GAAeX,EAAc/iB,OAAS,EAChE,OACE,kBAAC,KAAD,CACE4jB,eAAgB,KACdpiB,KAAKwB,MAAM6gB,eAAc,GACzBriB,KAAKyN,SAAS,CACZ2T,oBAAoB,IAGtBphB,KAAKyN,SAAS,CAAEsT,UAAW,KAC3B/gB,KAAKwB,MAAMof,mBAAmB,MAGhC,kBAAC,GAAD,KACE,kBAAC,GAAD,CACEV,OAAQkB,GAAsBe,EAC9BlN,OAAQ,CAAEuL,OAAQ,GAClBL,cACE,kBAACmC,GAAD,KACE,kBAACC,GAAD,CACE7Q,IAAK9V,IACHoE,KAAKqV,MAAQzZ,GAEfZ,KAAK,OACLinB,YAAaA,EACb5mB,MAAO0lB,EACPyB,SAAUxiB,KAAK4gB,mBACf6B,QAAS,KACPziB,KAAKyN,SAAS,CAAE2T,oBAAoB,IACpCphB,KAAKwB,MAAM6gB,eAAc,IAE3BK,UAAW1iB,KAAK4hB,gBAElB,kBAAC,GAAD,KAAgB5hB,KAAKwB,MAAMgS,SAS7B+N,GAAiB,IAAIxW,IAAI,CAACjE,EAAQoa,IAEhC,kBAAC,WAAD,CAAU9lB,IAAK0L,EAASoa,GACX,IAAVA,GAAe,kBAACyB,GAAD,MAChB,kBAACC,GAAD,CACEC,cAAe7B,IAAyBE,EACxCpP,QAAS,KACP9R,KAAKihB,aAAana,EAAQoa,KAG3Bpa,SAYrB,MAAMuC,GAAYC,WAAOC,IAAV,KAEX8W,IAKE9J,GAAgBjN,WAAOC,IAAV,MAQb+Y,GAAkBhZ,WAAOC,IAAV,MAIfqZ,GAAetZ,WAAOC,IAAV,KAad/H,GACAA,EAAMqhB,eACNvO,eADA,OAOEqO,GAAarZ,WAAOC,IAAV,MAMHgZ,GAAcjZ,WAAO+L,MAAV,M,2MCnLxB,MAAMyN,WAA2BnC,IAAMzkB,UAGrC+J,YAAYzE,GACV6E,MAAM7E,GADW,KAFnBuhB,gBAAmBlC,MAEA,KAiBnBmC,UAAanC,IACX7gB,KAAKwB,MAAM+C,6BAA6B,CAAEC,WAAYqc,KAftD7gB,KAAK8H,MAAQ,CACXmb,WAAW,EACXC,qBAAsB,IAGxBljB,KAAK+iB,gBAAkBI,oBACpBtC,IACC7gB,KAAKgjB,UAAUnC,IAEjB,IACA,CAAEuC,SAAS,EAAOC,UAAU,IAQhClnB,SAAU,MAAD,EACmE6D,KAAKwB,MAAvEoW,EADD,EACCA,aAAcnS,EADf,EACeA,yBAA0BI,EADzC,EACyCA,sBADzC,EAEqC7F,KAAK8H,MAAzCmb,EAFD,EAECA,UAAWC,EAFZ,EAEYA,qBACbjB,EAAcgB,EAAY,qBAAuBC,GAAwBtL,EAC/E,OACE,kBAAC,GAAD,CACEpE,KACE,kBAAC,GAAD,KACE,kBAACiH,GAAD,CAAMlZ,KAAK,SAAS2X,KAAM,GAAIrK,MAAM,aAGxCoT,YAAaA,EACbI,cAAeY,IACbjjB,KAAKyN,SAAS,CAAEwV,eAElBf,YAAazc,EACb8b,cAAe1b,EAAsBkF,IAAIqR,GAC/BA,GAASA,EAAMkH,sBAAyB,IAElD1C,mBAAoB2C,IAElBvjB,KAAK+iB,gBAAgBQ,IAEvBpC,eAAgB,CAACra,EAAQoa,KACvB,MAAM1jB,EAAWqI,EAAsBqb,GACrBxX,EAAmClM,EAA7CgmB,SAA+B7Z,EAAcnM,EAAzBimB,UAC5BzjB,KAAKwB,MAAMqD,uBAAuBrH,GAClCP,EAAaM,wBAAwBC,GAErCwC,KAAKyN,SAAS,CACZwV,WAAW,EACXC,qBAAuB1lB,GAAYA,EAASqa,sBAAyB,KAEvE7X,KAAKwB,MAAMse,mBAAmBpW,EAAUC,GAAWrJ,KAAKojB,IACtD1jB,KAAKyN,SAAS,CAAEyV,qBAAsB,WAgC3C,MAAMS,GAAiBphB,kBAxBf1D,IAAU,MAAD,EAIlBA,EAFFsJ,eAAkBtC,EAFE,EAEFA,sBAAuBJ,EAFrB,EAEqBA,yBAA0BjB,EAF/C,EAE+CA,WAChDe,EACjB1G,EADF0G,gBAAmBA,gBAErB,MAAO,CACLM,sBAAuBA,EAAsBnH,MAAM,EAAG,GACtD+G,2BACAjB,aACAoT,aAAcrS,GAAmBA,EAAgBsS,wBAIrD,SAAoBrd,GAClB,OAAOgI,6BACL,CACE+B,+BACAub,sBACAjb,2BAEFrK,KAI0B+H,CAG5BugB,IAEIvM,GAAgBjN,WAAOC,IAAV,M,u+BCzFZ,MAAMqa,GAAY,SAASpiB,GAAe,MACvCqiB,EAAmBriB,EAAnBqiB,MAAO/R,EAAYtQ,EAAZsQ,QACTgS,EAAcD,EAAME,0BAEtBC,KAAOH,EAAME,2BAA2BE,OAAO,UAD/C,cAEEC,EAAYL,EAAMM,2BAEpBH,KAAOH,EAAMM,4BAA4BF,OAAO,UADhD,MAEEG,EAA4BP,EAAMQ,gBAAgB3lB,MAAM,EAAG,GAC3D4lB,EAAQ9iB,EAAM8iB,OAAS,CAAEC,UAAW,OAAQC,UAAW,eAE7D,OACE,kBAAC,GAAD,CAAW1S,QAASA,GAClB,kBAAC2S,GAAD,CAAQvK,KAAMoK,EAAMC,UAAWG,OAAQJ,EAAME,WAC1CJ,GAEH,kBAACO,GAAD,KACE,kBAACC,GAAD,KAAQf,EAAMgB,eAEd,kBAACC,GAAD,KACE,wCAAchB,GACd,kBAACrJ,GAAD,CAAMlZ,KAAK,aAAa2X,KAAM,GAAIrK,MAAM,YACxC,sCAAYqV,OAOhB7a,GAAYC,WAAOC,IAAV,MAKTkb,GAASnb,WAAOC,IAAV,KAYU/H,GACC,YAAfA,EAAM0Y,KAEgB,YAAjB1Y,EAAMkjB,OAAuB,cAAgBljB,EAAMkjB,OAEnDljB,EAAM0Y,MAAQ,OAGT1Y,GAA2B,YAAjBA,EAAMkjB,OAAuB,cAAgBljB,EAAMkjB,QAAU,QAEnFC,GAAUrb,WAAOC,IAAV,MAIAqb,GAAQtb,WAAOC,IAAV,MAKLub,GAAcxb,WAAOC,IAAV,KAMpBkR,ICjGG,SAASsK,GAASC,EAAmB3qB,GAC1C,8CAAO,WAAOG,EAAUsJ,GAAjB,yBAAAhF,EAAA,6DACCD,EAAQiF,IADT,SAEuBlF,EAA0BC,GAFjD,OAECvE,EAFD,SAGuCoI,EAA8B7D,GAAlE0E,EAHH,EAGGA,gBAAiB3I,EAHpB,EAGoBA,OAAQC,EAH5B,EAG4BA,OAEjCb,YAAU8K,QAAQigB,SAChBxhB,EACA3I,EACAC,EACAmqB,EACA,CAAEC,SAAU3qB,EAAe4qB,cAAe,SAC1C7qB,GAAQ,GACR,CAEE6qB,cAAe,QACfxoB,GAAIT,EAAgBmF,SACpBL,WAAYzB,IACZhF,gBACA0G,MAAO7B,IACPxC,UAAWV,EAAgBoF,iBAAmB,UAC9C8jB,WAAY,YApBX,2CAAP,wD,wyBCYF,MAoFM9b,GAAYC,WAAOC,IAAV,MAWT6b,GAAiB9b,WAAOC,IAAV,MAOd8b,GAAY/b,WAAOC,IAAV,MAMTgN,GAAgBjN,WAAOC,IAAV,KAOf8b,IAmCG,MAAMC,GAAe/iB,mBA7Bb,SAAS1D,GAAQ,MACtB0mB,EAA4B1mB,EAA5B0mB,OAAQhgB,EAAoB1G,EAApB0G,gBAChB,MAAO,CACLggB,OAASA,GAAUA,EAAOA,QAAUA,EAAOA,OAAOC,WAAc,GAChE9b,SACEnE,GACAA,EAAgBA,iBAChBA,EAAgBA,gBAAgBmE,SAClCC,UACEpE,GACAA,EAAgBA,iBAChBA,EAAgBA,gBAAgBoE,UAClCsI,iBACE1M,GACAA,EAAgBA,iBAChBA,EAAgBA,gBAAgByN,aAItC,SAAoBxY,GAClB,OAAOgI,6BACL,CACE8c,mBACAyF,aAEFvqB,KAIwB+H,EAtJN,SAASf,GAAe,MACpC+jB,EAAmE/jB,EAAnE+jB,OAAQtT,EAA2DzQ,EAA3DyQ,iBAAkBvI,EAAyClI,EAAzCkI,SAAUC,EAA+BnI,EAA/BmI,UAAW2V,EAAoB9d,EAApB8d,gBADZ,EAEfzE,oBAAS,GAFM,oBAEpCqF,EAFoC,KAE5BuF,EAF4B,OAGD5K,mBAAS,IAHR,oBAGpC6K,EAHoC,KAGrBC,EAHqB,KAuB3C,SAASC,IACP,MAAM7T,EAASxW,OAAOyW,KAAK,cAAe,UAC1C,GAAID,GAAUA,EAAOvU,UAAYyU,EAAkB,CACjD,MAAM/L,EAAG,4CAAwC+L,GACjDzQ,EAAMujB,SAAS,oBAAqB,CAClC7e,QAEF6L,EAAOvU,SAAS0U,KAAOhM,GAI3B,OA7BA2f,oBAAU,KACR,MAAMC,EAAS,uCAAG,8BAAAhnB,EAAA,sEACYwgB,EAAgB5V,EAAUC,GADtC,OACVoc,EADU,OAEVC,EAAYD,EAAclH,OAAO,CAACoH,EAAKC,KAC3CD,EAAIC,EAAKC,MAAQD,EACVD,GACN,IACHN,EAAiBK,GAND,2CAAH,qDAQXtc,GAAYC,GAAa4b,EAAO/mB,OAAS,GAC3CsnB,KAED,CAACpc,EAAUC,EAAW4b,EAAO/mB,OAAQ8gB,IAkBtC,kBAAC,GAAD,KACE,kBAAC,KAAD,CACE8C,eAAgB,KACdqD,GAAU,KAGZ,kBAACL,GAAD,KACE,kBAAC,GAAD,CACElF,OAAQA,EACRjL,OAAQ,CAAEzE,IAAK,EAAGiQ,MAAO,GACzBN,cACE,kBAAC,GAAD,CAAerO,QA3B3B,WACE2T,GAAWvF,KA2BC,kBAACzF,GAAD,CACElZ,KAAK,eACL2X,KAAM,GACNrK,MAAyB,IAAlB0W,EAAO/mB,OAAe,UAAY,YAE3C,kBAAC6mB,GAAD,KAAYE,EAAO/mB,UAIvB,kBAACoX,GAAD,CAAKjG,MAAO,KACS,IAAlB4V,EAAO/mB,QACN,kBAACoX,GAAD,CAAKlF,QAAS,EAAGkB,QAAQ,OAAO2O,UAAU,MAAMtH,WAAW,UACzD,kBAACrD,GAAD,CAAKjG,MAAO,GAAIC,OAAQ,GAAImJ,YAAa,GACvC,yBAAK5I,IAAKiW,EAAQ,KAAyBjN,IAAI,SAEjD,kBAACvD,GAAD,CAAK9D,QAAS8T,GACZ,kBAAChB,GAAD,0BACA,kBAACE,GAAD,4CAILS,EAAOxa,IAAI8Y,GACV,kBAAC,GAAD,CACEzoB,IAAKyoB,EAAMwC,QACX/B,MAAOoB,EAAc7B,EAAMgB,eAC3BhB,MAAOA,EACP/R,QAAS8T,a,+LC3FpB,MAAMU,GAAiBhd,mBAAOid,eAAK,EAAG1W,eACpC,kBAAC2W,GAAD,CAAS3W,UAAWA,EAAWM,IAAKiW,EAAQ,QADvB9c,CAAH,MAIrBkd,GAAUld,WAAO4G,IAAV,M,maCDN,MAAMuW,GAAY,SAASjlB,GAChC,OACE,kBAAC,GAAD,KACE,kBAAC8kB,GAAD,MACA,kBAAC1Q,GAAD,CAAKC,KAAM,IACX,kBAAC8N,GAAD,MACA,kBAAC2B,GAAD,QAKAjc,GAAYC,WAAOC,IAAV,KAWL+c,IC/BH,SAASxoB,GAAoB4oB,GAClC,MAAO,CACL1rB,KAJwB,sBAKxBE,QAASwrB,G,iRCKb,MAAMC,GAAcJ,eAClB,EAAG1W,YAAWkV,WAAUjnB,sBAAqB3C,uBAAsBuO,WAAUC,gBAC3E,MAGMid,EAAa3pB,EAAae,sBAJ2D,EAK3D6c,mBAAS+L,EAHhB,wBADF,eADoE,oBAKpFC,EALoF,KAK1EC,EAL0E,KAMrFC,EAAgBC,sBAAYnoB,MAC5BA,IAASA,EAAMooB,eAAeA,iBACzBpoB,EAAMooB,eAAeA,eAAeC,MAIzC1sB,EAAW2sB,wBACjBtB,oBAAU,KACJnc,GAAYC,GACdnP,ECtBD,SAA2BkP,EAAUC,GAC1C,OAAOnP,IACL,MAAMC,EAAgCD,EAASE,KACvC4I,EAAiD7I,EAAjD6I,cAAe1I,EAAkCH,EAAlCG,OAAQC,EAA0BJ,EAA1BI,OAAQC,EAAkBL,EAAlBK,cAEvC,OAAON,EACLR,YAAU8K,QAAQsiB,kBAChB9jB,EACA1I,EACAC,OACA8E,OACAA,EACA7E,GACA,GACA,EACA,oBATF,WAUM4O,EAVN,YAUkBC,MDMPyd,CAAkB1d,EAAUC,KAEtC,CAACD,EAAUC,EAAWnP,IAjBkE,4CAgC3F,4BAAAsE,EAAA,sEAC8B7B,EAAaY,mBAD3C,OACQvD,EADR,OAEEa,EAAqB,CACnBb,gBACAc,IAAK,OACLC,MAAO,CAAEA,MAAO0rB,GAChBxsB,SAAS,IANb,4CAhC2F,sBA0C3F,MAAM8sB,EAAiB,KACjBpqB,EAAae,sBACf8oB,EA1CqB,yBA4CrBA,EA7CmB,gBAiDvB,OACE,kBAAC,GAAD,CAAWjX,UAAWxG,IACnB0d,GACC,6CAEE,kBAACO,GAAD,CAAOxV,QApCO,KAChB7U,EAAae,yBApBwE,mCAuBzFupB,GACAzpB,GAAoB,GACpBb,EAAaa,qBAAoB,GACjCgpB,EAvBqB,aAwBrBrmB,WAAW,KACT4mB,KACC,QA0BmCR,OAwBrC,MAAMW,GAAajlB,kBAhBX1D,IAAU,MACfooB,GAAmBpoB,EAAMooB,gBAAkB,IAA3CA,eADc,EAEUpoB,EAAM0G,gBAAgBC,qBAAuB,GAC7E,MAAO,CAAEyhB,iBAAgBvd,SAHH,EAEdA,SAC2BC,UAHb,EAEJA,aAIpB,SAAoBnP,GAClB,OAAOgI,6BACL,CACE1E,uBACA3C,wBAEFX,KAIsB+H,CAGxBokB,IAEFa,GAAWxqB,YAAc,aAEzB,MAAMqM,GAAYC,WAAOC,IAAV,MAOT+d,GAAQhe,WAAOme,KAAV,M,6pFEnGX,MAAMC,GAAa,CACjB7Y,MAAO,OAEH8Y,GAAere,WAAOC,IAAV,MAIZqe,GAAsBte,WAAOC,IAAV,MASnBse,GAAmBve,WAAOwe,OAAOpT,MAAM,CAAE1Z,KAAM,UAA5BsO,CAAH,MAehBye,GAAmBze,WAAOwe,OAAOpT,MAAM,CAAE1Z,KAAM,UAA5BsO,CAAH,MAehB0e,GAAe1e,WAAO2e,SAAV,MAULC,GAAe5e,WAAO+L,MAAMX,MAAM,CAAE1Z,KAAM,QAA3BsO,CAAH,MAcnB6e,GAAY7e,WAAO8e,MAAV,MAOTC,GAAW/e,WAAOC,IAAV,MAOR+e,GAAehf,WAAOC,IAAV,MASZgf,GAAcjf,WAAOC,IAAV,MAOXif,GAAoBlf,WAAOC,IAAV,MAOjBkf,GAAOnf,WAAOof,KAAV,MAKJC,GAAWrf,WAAOC,IAAV,MAMDqf,GAAmBrC,eAC9B,EACEsC,cACAC,oBACAC,mBACAC,sBACAC,mBACAC,UACAC,WACAC,YACAC,WACAC,oBACAC,kBAEKV,EA+CH,kBAACjT,GAAD,CAAKlF,QAAS,EAAGkB,QAAQ,OAAOwH,eAAe,SAASxJ,OAAQ,KAC9D,kBAACgG,GAAD,CAAKhE,QAAQ,OAAOkH,cAAc,SAASlJ,OAAO,OAAO4Z,aAAY,IACnE,kBAACb,GAAD,qFAGA,kBAAC/S,GAAD,CAAK6T,SAAU,EAAGC,OAAO,UACvB,kBAAC7B,GAAD,CAAkBxc,MAAO,CAAEqe,OAAQ,UAAY5X,QAASwX,GAAxD,YAnDJ,kBAACb,GAAD,CAAMkB,SAAUV,GACd,kBAACT,GAAD,KACE,kBAACD,GAAD,mBACA,kBAACD,GAAD,sCACA,kBAACA,GAAD,KACE,0BAAMjd,MAAOqc,IAAb,KADF,+BAGA,kBAACS,GAAD,KACE,kBAACE,GAAD,iBACW,0BAAMhd,MAAOqc,IAAb,MAEX,kBAACQ,GAAD,CAAc1F,SAAUuG,EAAkB9G,YAAY,YAAY1gB,KAAK,cACrE2nB,IAAYC,GAAY,kBAACxB,GAAD,0BAE5B,kBAACQ,GAAD,KACE,kBAACE,GAAD,kBACY,0BAAMhd,MAAOqc,IAAb,MAEZ,kBAACQ,GAAD,CACE1F,SAAUsG,EACV7G,YAAY,yBACZ1gB,KAAK,WAEL2nB,IAAYE,GAAa,kBAACzB,GAAD,KAAe4B,IAE5C,kBAACpB,GAAD,KACE,kBAACE,GAAD,eACS,0BAAMhd,MAAOqc,IAAb,MAET,kBAACM,GAAD,CACExF,SAAUwG,EACV/G,YAAY,8BACZ1gB,KAAK,aAEL2nB,IAAYG,GAAY,kBAAC1B,GAAD,gCAG9B,kBAACC,GAAD,KACE,kBAACG,GAAD,eACA,kBAACF,GAAD,CAAkB/V,QAASwX,GAA3B,aAsBZV,GAAiB5rB,YAAc,oBCxMxB,MCcC4sB,GAAiB5vB,YAAU8K,QAA3B8kB,aAEKC,GAAetD,eAAK,EAAGuD,0BAA2B,MAAD,EACtBjP,oBAAS,GADa,oBACrDgO,EADqD,KACxCkB,EADwC,OAE5BlP,mBAAS,IAFmB,oBAErDwO,EAFqD,KAE3CW,EAF2C,OAG9BnP,mBAAS,IAHqB,oBAGrDuO,EAHqD,KAG1Ca,EAH0C,OAIhCpP,mBAAS,IAJuB,oBAIrDsO,EAJqD,KAI3Ce,EAJ2C,OAKpBrP,wBAASlb,GALW,oBAKrD4pB,EALqD,KAKvCY,EALuC,OAMhCtP,oBAAS,GANuB,oBAMrDqO,EANqD,KAM5CkB,EAN4C,KAOtD5vB,EAAW2sB,wBAP2C,EASfH,sBAAalf,IAAD,cAAY,CACnEtK,SAAQ,UAAEsK,EAAMvC,uBAAR,aAAE,EAAuBA,gBACjCjL,cAAewN,EAAM/I,iBAAiBzE,cACtC+vB,QAAO,UAAEviB,EAAM4O,yBAAR,aAAE,EAAyBA,qBAH5BlZ,EAToD,EASpDA,SAAUlD,EAT0C,EAS1CA,cAAe+vB,EAT2B,EAS3BA,QAwB3B5vB,EAAgCD,EAASE,KACvCE,EAAkCH,EAAlCG,OAAQC,EAA0BJ,EAA1BI,OAAQC,EAAkBL,EAAlBK,cAElBwvB,EAAe,KACnB,IAAI9tB,OAAQmD,EACR4qB,GAAQ,EAoBZ,OAnBKnB,IACH5sB,EAAQ,oBACR+tB,GAAQ,GDxDiB,wJACDjuB,KAAKkuB,OCyDZpB,GDzD0B7sB,iBC0D3CC,EAAQ,wBACR+tB,GAAQ,GAELpB,IACHoB,GAAQ,GAELnB,IACHmB,GAAQ,GAELlB,IACHkB,GAAQ,GAEVH,EAASG,GACTJ,EAAgB3tB,GACT+tB,GA0ET,OACE,kBAAC3B,GAAD,CACEC,YAAaA,EACbC,kBAxHuB1b,IACzBA,EAAM0U,iBACNmI,EAAS7c,EAAMG,OAAOlS,QAuHpB0tB,iBApHsB3b,IACxBA,EAAM0U,iBACNoI,EAAQ9c,EAAMG,OAAOlS,QAmHnB2tB,oBAhHyB5b,IAC3BA,EAAM0U,iBACNkI,EAAY5c,EAAMG,OAAOlS,QA+GvB4tB,iBAlEsBwB,IAGxB,GAFAA,EAAgB3I,iBAEXwI,KAGChwB,GAAiB+vB,GAAW5vB,EAAW,CAAC,IAAD,MACzC,MAAMiwB,EAAe,CACnBC,KAAM,CACJC,mBAAoBvB,EACpBwB,aAAczB,EACd0B,cAAexwB,EACfywB,YAAa,QACbC,KAAM7B,EACN8B,SAAU7B,GAEZ8B,IAAK,CACHC,GAAIhsB,IACJisB,QAAS9rB,IACT0rB,KAAM,gCAERK,GAAI,CACFlF,KAAMlqB,EAAgBmF,SACtBgqB,QAASnvB,EAAgBoF,iBAE3BiqB,OAAQ,GACRC,MAAO,CACLC,qBAAsB,uBACtBC,oBAAqB,yBAEvBC,SAAU,CACRC,SAAU,CACRC,YAAa,CACXpI,SAAQ,OAAEhmB,QAAF,IAAEA,OAAF,EAAEA,EAAUkM,SACpB+Z,UAAS,OAAEjmB,QAAF,IAAEA,OAAF,EAAEA,EAAUmM,WAEvBkiB,KAAI,OAAEruB,QAAF,IAAEA,OAAF,EAAEA,EAAUsuB,SAChBC,gBAAe,OAAEvuB,QAAF,IAAEA,OAAF,EAAEA,EAAUwuB,cAC3B1jB,QAAO,OAAE9K,QAAF,IAAEA,OAAF,EAAEA,EAAUyuB,gBACnBC,QAAS,CACPC,WAAU,OAAE9B,QAAF,IAAEA,GAAF,UAAEA,EAASA,eAAX,aAAE,EAAkB+B,WAC9BC,UAAS,OAAEhC,QAAF,IAAEA,GAAF,UAAEA,EAASA,eAAX,aAAE,EAAkBiC,UAC7BC,YAAW,OAAElC,QAAF,IAAEA,GAAF,UAAEA,EAASA,eAAX,aAAE,EAAkBmC,aAEjCC,aAAa,GAAD,cAAKjvB,QAAL,IAAKA,OAAL,EAAKA,EAAUsuB,SAAf,oBAA4BtuB,QAA5B,IAA4BA,OAA5B,EAA4BA,EAAUwuB,iBAGtDU,KAAM,CACJC,UAzFQ,qEA6FZnyB,EACEovB,GAAY,OAACnvB,QAAD,IAACA,OAAD,EAACA,EAAWkJ,aAAc/I,EAAQC,EAAQ6vB,EAAc5vB,GAAe,IAErFivB,GAAe,KAYjBb,QAASA,EACTC,SAAUA,EACVC,UAAWA,EACXC,SAAUA,EACVC,kBAlFuBlc,IACzBA,EAAM0U,iBACNiI,GAAe,GACfI,OAAgBxqB,GAChBsqB,OAAStqB,GACTuqB,OAAQvqB,GACRqqB,OAAYrqB,GACZmqB,IACAM,GAAS,IA2EPb,aAAcA,M,4OAKpBM,GAAa7sB,YAAc,eC/JpB,MAAM4vB,GAAiBrG,eAAK,KAAO,MAAD,EACH1L,oBAAS,GADN,oBAChCgS,EADgC,KAChBpH,EADgB,KAGjCqE,EAAsB,KAC1BrE,GAAWoH,IAGb,OACE,kBAAC,GAAD,CACE3M,OAAQ2M,EACRzM,YAAY,EACZzQ,MAAO,IACPwQ,cAAe,kBAAC2M,GAAD,CAAWhb,QAASgY,GAApB,eAEf,kBAAClU,GAAD,CAAKjG,MAAO,KACV,kBAACka,GAAD,CAAcC,oBAAqBA,QAMrCgD,GAAYxjB,WAAOme,KAAV,M,wNCnBf,MAAMsF,GAAY,yCAGZC,GAAezG,eAAK,EAAG1W,YAAWkV,eACtC,MAAMkI,GAAc,IAAIlV,MAAOK,cAE/B,SAAS8U,EAAqBhnB,GAC5B6e,EAAS,oBAAqB,CAC5B7e,QAIJ,OACE,kBAAC,GAAD,CAAW2J,UAAWA,GACpB,mDACuBod,EADvB,qEAIA,uBAAG/a,KAAM6a,GAAWjb,QAAS,IAAMob,EAAqBH,KAAxD,SAEK,IAPP,IAQI,IACF,uBAAG7a,KArBkB,2CAqBQJ,QAAS,IAAMob,EArBvB,6CAqBrB,UAEK,IACL,kBAAC1F,GAAD,MACA,kBAACoF,GAAD,SAcC,MAAMO,GAAc5qB,kBAAQ,MATnC,SAAoB/H,GAClB,OAAOgI,6BACL,CACEuiB,aAEFvqB,KAIuB+H,CAA0ByqB,IAE/C3jB,GAAYC,WAAOC,IAAV,MChDR,MAAM6jB,WAAkBC,gBAC7BttB,oBAAqB,MAAD,EACkEC,KAAKwB,MAAjF8rB,EADU,EACVA,OAAQC,EADE,EACFA,YAAaC,EADX,EACWA,YAAaC,EADxB,EACwBA,WAAYC,EADpC,EACoCA,cAAeC,EADnD,EACmDA,WACrEpyB,OAAOqyB,SAAWryB,OAAOqyB,UAAY,GACrCryB,OAAOqyB,SAAS/kB,KAAK,CACnBglB,KAAMP,EACNtiB,UAAWuiB,EACXO,UAAWN,EACXO,YAAaN,EACbO,KAAML,IAGJD,IACFnyB,OAAOqyB,SAAWryB,OAAOqyB,UAAY,GACrCryB,OAAOqyB,SAAS/kB,KAAK,CACnBolB,OAAO,KAKb9xB,SAAU,MAAD,EAC8B6D,KAAKwB,MAAlC0sB,EADD,EACCA,MAAOC,EADR,EACQA,QAASC,EADjB,EACiBA,SACxB,IAAIC,EAAU,CAAE3E,OAAQ,OAAQ4E,SAAU,UAI1C,OAHIH,IACFE,EAAU,CAAE1e,MAAOwe,EAASve,OAAQwe,EAAU1E,OAAQ,SAEjD,yBAAKttB,GAAI8xB,EAAO7iB,MAAOgjB,K,sRChB3B,MAAME,GAAcjlB,mBACzBid,eACE,EACE1W,YACA2e,sBAAqB,EACrBlB,SACAC,cACAC,cACAC,aACAS,QACAE,WACAD,UACAT,gBACAxG,OACAuH,iBACY,MAAD,EAC2B5T,oBAAS,GADpC,oBACJ6T,EADI,KACSC,EADT,KAEX3H,sBAAanoB,IACPA,GAASA,EAAM4J,YAAYhB,eACzBinB,IAAgB7vB,EAAM4J,YAAYhB,eACpCknB,GAAgBD,KAItB,IAAIf,EAAa,OAIjB,OAHIzG,IACFyG,EAAa1wB,EAAae,sBAAwB,OAAS,SAG3D,yBAAK6R,UAAWA,GACb2e,GACC,kBAAC,KAAD,KACG,EAAGzS,aAAYE,iBAEZ,kBAAC,GAAD,CAAWvK,IAAKqK,GACd,kBAAC,GAAD,KACE,yBAAK1Q,MAAO,CAAEqF,QAAS+d,EAAa,GAAK,IACvC,kBAAC,GAAD,CACEnB,OAAQA,EACRC,YAAaA,EACbC,YAAaA,EACbC,WAAYA,EACZS,MAAOA,EACPR,cAAeA,EACfc,mBAAoBA,EACpBR,KAAML,WA7CLrkB,CAAH,MA4DlBD,GAAYC,WAAOC,IAAV,KACX6jB,IAIEzI,GAAUrb,WAAOC,IAAV,MCnDN,SAASqlB,IAAe,QAC7BC,EAAU,WADmB,SAE7BC,EAAW,EAFkB,SAG7BC,EAAW,KAHkB,QAI7Bx0B,GArBsB,EAiBO,QAK7BmH,GAAU,IAQV,OAAO,SAA6BlH,GAClC,MAAMC,EAAgCD,EAASE,KACvC+I,EAAgDhJ,EAAhDgJ,aAAc7I,EAAkCH,EAAlCG,OAAQC,EAA0BJ,EAA1BI,OAAQC,EAAkBL,EAAlBK,cACtC,OAAON,EACLR,YAAU8K,QAAQ8pB,eAChBC,EACAC,EACAC,EACAtrB,EACA7I,EACAC,EACAC,EACAP,EACAmH,K,uWC7CR,MAAMstB,GAAU1lB,WAAOC,IAAV,MAQA0lB,GAAQ3lB,WAAOC,IAAV,KAGdylB,IASSE,GAAW,EAAG9G,QAAO/sB,WAE9B,kBAAC2zB,GAAD,KACE,kBAACla,GAAD,KAAQsT,GACR,kBAACtT,GAAD,CAAOC,WAAS,GAAE1Z,I,uUC3BjB,MAAM8zB,GAAgB7lB,WAAOC,IAAV,M,wWCkCnB,MAAM6lB,WAA4BlzB,YACvCC,SAAU,MACAkzB,EAAcrvB,KAAKwB,MAAnB6tB,UAEN/b,EAOE+b,EAPF/b,SACAyC,EAMEsZ,EANFtZ,YACAuZ,EAKED,EALFC,YACAC,EAIEF,EAJFE,kBACAC,EAGEH,EAHFG,iBACAC,EAEEJ,EAFFI,qBACAC,EACEL,EADFK,UAGInX,EADO,IAAIR,KAAKsX,EAAU7V,sBACRhB,WAElBmX,GADUpX,EAAa,KAAO,EAAI,GAAKA,EAAa,IAClC,KAAOA,EAAa,GAAK,KAAO,MAClDqX,EAAI,UAAM1qB,YAAU2qB,iBAAiBJ,GAAjC,YAA0DC,GAEpE,OACE,kBAACP,GAAD,KACE,kBAACvZ,GAAD,CAAKiD,aAAc,GACjB,kBAACpE,GAAD,KAAQkb,IAGV,kBAAC/Z,GAAD,CAAKiD,aAAc,GACjB,kBAACrE,GAAD,KACE,kBAAC4B,GAAD,CAAkB/a,MAAO0a,MAI7B,kBAACH,GAAD,CAAKhG,OAAQ,GAAIgC,QAAQ,OAAOqH,WAAW,UACzC,kBAACnE,GAAD,CAAOP,UAAW,GAAI+a,GAAe,OAGvC,kBAAC1Z,GAAD,CAAKhE,QAAQ,OAAOiE,KAAM,EAAGoD,WAAW,SAASG,eAAe,UAC9D,kBAAC,GAAD,KACG9F,GACC,kBAACF,GAAD,CAAa8F,KAAK,QAAQ5F,SAAU+b,EAAU/b,UAC3C,EAAGnD,SAAU,kBAAC,GAAD,CAASA,IAAKA,OAMpC,kBAAC8e,GAAD,KACgC,kBAAtBM,GACN,kBAACL,GAAD,CAAU9G,MAAM,UAAU/sB,MAAOk0B,EAAoB,MAE1B,kBAArBC,GACN,kBAACN,GAAD,CAAU9G,MAAM,WAAW/sB,MAAOm0B,EAAmB,QAEpDI,GAAQ,kBAACV,GAAD,CAAU9G,MAAM,OAAO/sB,MAAOu0B,OAOnD,MAAMvZ,GAAU/M,WAAO4G,IAAV,MAIPqG,GAAgBjN,WAAOC,IAAV,MCvFNumB,GAAY,EAAGxX,WAC1B,MAAMyX,EAAYnc,GAAO0E,EAAKJ,YAAc,IAAMI,EAAKH,UACjD6X,EAAYnc,GAAKyE,EAAK2X,UAC5B,OACE,kBAACd,GAAD,KACE,kBAACvZ,GAAD,CACEC,KAAM,EACNjE,QAAQ,OACRkH,cAAc,SACdM,eAAe,SACfH,WAAW,UAEX,kBAACrD,GAAD,CAAKiD,aAAc,GACjB,kBAACpE,GAAD,CAAOI,UAAQ,GAAEkb,IAEnB,kBAACtb,GAAD,CAAOI,UAAQ,GAAEmb,MCqDlB,MAAME,GAAa3tB,kBAnCX1D,IAAU,MACf4X,EAAa5X,EAAb4X,SACFE,EAAkBF,GAAYA,EAASG,aAAWjX,EAmBxD,MAAO,CACLwwB,eAlBsBxZ,GAAkBA,EAAeO,sBAAyB,IAAInM,IACpFqlB,GACOA,EAGE,CACL9c,SAAU8c,EAAY9c,SACtByC,YAAaqa,EAAYra,YACzByD,qBAAsB4W,EAAY5W,qBAClC+V,kBAAmBa,EAAYb,kBAC/BC,iBAAkBY,EAAYZ,iBAC9BE,UAAWU,EAAYV,UACvBD,qBAAsBW,EAAYX,qBAClCH,YAAac,EAAYd,aAVlB,SAmBf,SAAoB90B,GAClB,OAAOgI,6BACL,CACE2S,8BAEF3a,KAIsB+H,CAzDFf,IAAkB,MAChC2uB,EAAkB3uB,EAAlB2uB,cACR,OACE,kBAAC,GAAD,CAAUvV,OAAQ,kBAAC1G,GAAD,gBACU,IAAzBic,EAAc3xB,QACb0f,KAAEe,MAAM,GAAI1gB,GACH,kBAAC4wB,GAAD,CAAe/zB,IAAKmD,KAE9B4xB,EAAcplB,IAAIskB,IACjB,MAAM/W,EAAO,IAAIP,KAAKsX,EAAU7V,sBAC1BjB,EAAaD,EAAKE,WACxB,OACE,kBAAC,WAAD,CAAUpd,IAAKi0B,EAAU7V,sBACP,IAAfjB,GAAoB,kBAACuX,GAAD,CAAWxX,KAAMA,IACtC,kBAAC,GAAD,CAAqB+W,UAAWA,U,wBCpC5C,MAAMgB,GAAQ,GAERC,GAAM,CAACpqB,EAAaqqB,KACxB,GAAKF,GAAMnqB,GAQTqqB,GAAUA,QARK,CACf,MAAMC,EAAQ,IAAIC,MAClBJ,GAAMnqB,GAAOsqB,EACbA,EAAMrgB,IAAMjK,EACRqqB,GACFC,EAAME,iBAAiB,OAAQH,EAAQ,CAAEI,MAAM,IAMnD,OAAON,GAAMnqB,IAkBA0qB,OAPI,CACjBN,OACAO,IAVW3qB,GACJoqB,GAAIpqB,GAUX4qB,IAPW5qB,KACFmqB,GAAMnqB,GAOfmqB,UCpBK,SAASU,IAA2B,SACzCrnB,EADyC,UAEzCC,EAFyC,MAGzCqnB,EAHyC,QAIzCz2B,GANsB,EAEmB,QAKzCmH,GAAU,IAQV,OAAOlH,IACL,MAAMC,EAAgCD,EAASE,KACvCgJ,EAA4DjJ,EAA5DiJ,yBAA0B9I,EAAkCH,EAAlCG,OAAQC,EAA0BJ,EAA1BI,OAAQC,EAAkBL,EAAlBK,cAClD,OAAON,EACLR,YAAU8K,QAAQisB,2BAChBrnB,EACAC,EACAqnB,EACAttB,EACA9I,EACAC,EACAC,EACAP,EACAmH,K,ohCCVR,MAAMuvB,WAA2B/0B,YAAyB,eAAD,oBACvD4L,MAAQ,CACNopB,aAAc,IAGhBljB,mBAAmBC,GAAY,MAAD,EACIjO,KAAKwB,MAA7BkI,EADoB,EACpBA,SAAUC,EADU,EACVA,UACdsE,EAAUvE,WAAaA,GAAYuE,EAAUtE,YAAcA,GAC7D3J,KAAKmxB,6BAA6BznB,EAAUC,GAI1C5J,oBAAqB,IAAD,kHACxB,EAAKoxB,6BAA6B,EAAK3vB,MAAMkI,SAAU,EAAKlI,MAAMmI,WAD1C,6CAIpBwnB,6BAA6BznB,EAAkBC,GAAoB,IAAD,6HAC9C,kBAAbD,GAA8C,kBAAdC,EAD2B,gCAE7C,EAAKnI,MAAMuvB,2BAA2B,CAC3DrnB,WACAC,cAJkE,OAE9DhI,EAF8D,OAM9DyvB,EAAgBC,GAAuB1vB,EAAStG,MAAMi2B,GAAK,IACjE,EAAK9vB,MAAM+vB,2BAA2BH,GAClCR,GAAWE,IAAIM,GACjB,EAAK3jB,SAAS,CAAEyjB,aAAc,CAAE,CAACE,IAAgB,KAEjDR,GAAWN,IAAIc,EAAe,KAC5B,EAAK3jB,SAAS,CAAEyjB,aAAc,CAAE,CAACE,IAAgB,OAZe,6CAkBxEj1B,SAAU,MAAD,EAC0C6D,KAAKwB,MAA9C0R,EADD,EACCA,SAAUke,EADX,EACWA,cAAeI,EAD1B,EAC0BA,YAE3BC,EADmBzxB,KAAK8H,MAAtBopB,aAC4BE,GAAiB,IACrD,OACE,kBAAC,GAAD,KACE,kBAACM,GAAA,EAAD,CAAiBC,UAAW,MACzBF,GACC,kBAACG,GAAA,EAAD,CAAex2B,IAAKg2B,EAAeS,QAAS,IAAKC,WAAW,QAC1D,kBAACC,GAAD,CAAWX,cAAeA,MAI/BI,GAAe,kBAACQ,GAAD,MAChB,kBAACC,GAAD,KAAmB/e,KAM3B,MAAM7J,GAAYC,WAAOC,IAAV,MAKTyoB,GAAU1oB,WAAOC,IAAV,MASP0oB,GAAmB3oB,WAAOC,IAAV,MAKhBwoB,GAAYzoB,WAAOC,IAAV,KAUV/H,GACDA,EAAM4vB,eACN9c,eADA,KAEyB9S,EAAM4vB,gBAmB7BC,GAAyB,SAASa,GACtC,MAAMC,EAAuBD,EAAQE,OAAOhW,GAAqB,cAAZA,EAAMiW,GACrDC,EAAkBpU,KAAEqU,KAAKJ,EAAsB/V,GAAuB,uBAAdA,EAAMoW,KAEpE,OAAQF,GAAmBA,EAAgBhB,GAAM,IA0B5C,MAAMmB,GAAoBlwB,kBAvBlB1D,IAAU,MACf6zB,EAAoB7zB,EAApB6zB,gBAER,IAAItB,EACJ,GAAIsB,GAAmBA,EAAgBC,OAAQ,CAC7C,MAAMC,EAAoB/zB,EAAM6zB,gBAAgBC,OAAOrB,GAAK,GAC5DF,EAAgBC,GAAuBuB,GAGzC,MAAO,CACLxB,mBAIJ,SAAoB52B,GAClB,OAAOgI,6BACL,CACEuuB,+BAEFv2B,KAI6B+H,CAG/B0uB,IC1JK,MAAM4B,WAAmBlS,IAAMzkB,UAAyB,eAAD,oBAC5D4L,MAAe,CACb6H,MAAOpU,OAAOu3B,WACdljB,OAAQrU,OAAOw3B,aAH2C,KAc5DC,uBAAyB,KACvBhzB,KAAKyN,SAAS,CAAEkC,MAAOpU,OAAOu3B,WAAYljB,OAAQrU,OAAOw3B,eAT3DhzB,oBACExE,OAAOm1B,iBAAiB,SAAU1wB,KAAKgzB,wBAGzCllB,uBACEvS,OAAO03B,oBAAoB,SAAUjzB,KAAKgzB,wBAO5C72B,SACE,OAAO6D,KAAKwB,MAAM0R,SAASlT,KAAK8H,Q,0uCC+BpC,MAAMorB,WAAkBh3B,YAAyB,eAAD,oBAC9C4L,MAAQ,CACNqrB,SAAS,EACTC,kBAAkB,EAClBC,SAAS,GAJmC,KAyH9CC,4BAA+BlC,IAC7B,MAAMlrB,EAAMkrB,EACZpxB,KAAKyN,SAAS,CAAE4lB,QAASntB,GAAOA,EAAIqtB,SAAS,YAlH/CxzB,oBACEC,KAAKwzB,oBAELxzB,KAAKwB,MAAMujB,SAAS,gBAAiB,CACnC0O,UAAW,mBACXC,SAAU,oBAGZ1zB,KAAK2zB,0BAEL3zB,KAAKwB,MAAMotB,eAAe,IAE1B,MAAMgF,EAAmB32B,EAAaC,0BACtC,GAAI02B,GAAoBA,EAAiBpQ,UAAYoQ,EAAiBnQ,UAAW,OAE7D/Z,EAAmCkqB,EAA7CpQ,SAA+B7Z,EAAciqB,EAAzBnQ,UAE5BzjB,KAAKyN,SAAS,CACZ2lB,kBAAkB,IAGpBpzB,KAAKwB,MAAMse,mBAAmBpW,EAAUC,QAExC3J,KAAKwB,MAAMC,iBAAiB,CAAEC,SAAS,IAASpB,KAAMqB,IACpD,IAAKA,EACH,OAAO,KAFwD,QAO7DA,EADFtG,MAASqO,EANsD,EAMtDA,SAAUC,EAN4C,EAM5CA,UAGrB3J,KAAKyN,SAAS,CACZ2lB,kBAAkB,IAGpBpzB,KAAKwB,MAAMse,mBAAmBpW,EAAUC,KAKxCgqB,0BAA2B,IAAD,iIACxBzB,EAAgF,CACpF,CACE2B,gBAAiB,+BACjBC,UAAW,eAEb,CACED,gBAAiB,+BACjBC,UAAW,eAEb,CACED,gBAAiB,6BACjBC,UAAW,YACXz5B,KAAM,CACJ05B,OAAQ,GACRC,cAAe,KAGnB,CACEH,gBAAiB,6BACjBC,UAAW,cApBe,SAwBR/T,QAAQC,IAC5BkS,EAAQnnB,IAAKqR,GAAU/e,aAAaC,QAAQ8e,EAAMyX,mBAzBtB,OAwBxBI,EAxBwB,OA2B9B/B,EAAQgC,QAAQ,CAAC9X,EAAO8E,KACtB,MAAMiT,EAAUF,EAAQ/S,GACxB,GAAIiT,EAAS,CACX,MAAMC,EAAUj3B,KAAKC,MAAM+2B,GACvBC,IACsB,gBAApBhY,EAAM0X,UACR,EAAKtyB,MAAMujB,SAAS,cAApB,aACEsP,UAAWD,EAAQC,gBAAa10B,EAChC20B,gBAAiBF,EAAQE,iBACrBlY,EAAM/hB,MAAQ,KAGpB,EAAKmH,MAAMujB,SAAS3I,EAAM0X,UAA1B,aACEO,UAAWD,EAAQC,gBAAa10B,GAC5Byc,EAAM/hB,MAAQ,KAGtBgD,aAAak3B,WAAWnY,EAAMyX,qBA5CN,6CAkDhCL,oBACMxzB,KAAKw0B,iBAITx0B,KAAKw0B,eAAiB/zB,WAAW,KAC/BT,KAAKw0B,eAAiBC,aAAaz0B,KAAKw0B,gBADH,QAELx0B,KAAKwB,MAA7BkI,EAF6B,EAE7BA,SAAUC,EAFmB,EAEnBA,UAClB3J,KAAKwB,MAAMse,mBAAmBpW,EAAUC,GACxC3J,KAAKwzB,qBACJkB,OAGLC,gBACE,OACE,6BACE,kBAACnrB,GAAD,OAUNorB,aAAc,MAAD,EACqC50B,KAAKwB,MAA7CkI,EADG,EACHA,SAAUC,EADP,EACOA,UAAWsd,EADlB,EACkBA,eACvB4N,EAAkB5N,IAAmBA,EAAe6N,KAClDzB,EAAYrzB,KAAK8H,MAAjBurB,QACF0B,EAAkB1B,EAAU,uBAAyB,uBACrD2B,EAAuB3B,EAAU,eAAiB,eAClD4B,EAAahO,GAAkBA,EAAeC,KACpD,OACE,kBAAC,GAAD,KACGlnB,KAAK8H,MAAMsrB,kBAAoB,kBAAC9wB,EAAD,MAChC,kBAACmwB,GAAD,CACE/oB,SAAUA,EACVC,UAAWA,EACX4nB,2BAA4BvxB,KAAKszB,6BAEjC,kBAAC,GAAD,KACG,IAEG,kBAAC4B,GAAD,KACE,kBAAC,GAAD,MACA,kBAACC,GAAD,KACE,yBAAK9pB,MAAO,CAAEqF,QAAS,KACrB,kBAAC0kB,GAAD,KACE,kBAACC,GAAD,KACE,kBAAC7e,GAAD,MAEA,kBAAC1D,GAAD,CACE8E,aAAc,eACdzF,eAAe,eACfC,YAAa,EACb1I,SAAUA,EACVC,UAAWA,EACX2rB,UAAU,QACVC,oBAAgB51B,IAElB,kBAAC4uB,GAAD,CACEjB,OAAQyH,EACRxH,YAAY,mDACZC,YAAY,uCACZC,WAAW,MACXS,MAAM,mDACNE,SAAU,IACVD,QAAS,IACTT,eAAe,EACfc,mBAAoBqG,EACpB3N,KAAM+N,KAIV,kBAACrf,GAAD,CAAKiD,aAAc,GACjB,kBAACqX,GAAD,OAGF,kBAACtS,GAAD,QAGJ,kBAAC2Q,GAAD,CACEjB,OAAQ0H,EACRzH,YAAY,kDACZC,YAAY,0CACZC,WAAY,MACZS,MAAM,kDACNR,eAAe,EACfc,mBAAoBqG,EACpB3N,KAAM+N,EACNxG,YAAY,KAGhB,kBAACtB,GAAD,UAUhBhxB,SACE,OAAO,6BAAM6D,KAAK40B,eAItB,MAAMvrB,GAAYC,WAAOC,IAAV,MAIT2rB,GAAkB5rB,WAAOC,IAAV,MAMf8rB,GAAoB/rB,WAAOC,IAAV,KAQfiN,GAIA1D,GAKAsa,IAsBF+H,GAAkB7rB,WAAOC,IAAV,MAKf6rB,GAAc9rB,WAAOC,IAAV,MAqCV,MAAMisB,GAAWjzB,kBAhCR1D,IAAW,MACjBooB,GAAmBpoB,EAAMooB,gBAAkB,IAA3CA,eAER,IAAKpoB,IAAUA,EAAM0G,kBAAoB1G,EAAM0G,gBAAgBA,gBAC7D,MAAO,CACL4tB,SAAS,GAWb,MAAO,CAAEA,SAAS,EAAOzpB,SANtB7K,EAAM0G,gBAAgBA,iBAAmB1G,EAAM0G,gBAAgBA,gBAAgBmE,eAChF/J,EAKiCgK,UAHhC9K,EAAM0G,gBAAgBA,iBAAmB1G,EAAM0G,gBAAgBA,gBAAgBoE,gBAChFhK,EAE4CsnB,oBAGhD,SAAoBzsB,GAClB,OAAOgI,6BACL,CACEosB,kBACAntB,mBACAqe,sBACA1lB,iBACA2qB,aAEFvqB,KAIoB+H,CAA4B2wB,IC7V9Cr0B,GAAQ6J,KAER9K,GAAU,IAAI63B,UAAQ,CAE1Bvc,KAAM,IAENwc,eAAgBn6B,OAAO8B,aAEvBs4B,eAAgB,IAEhBC,aAAa,IAEfr6B,OAAOqC,QAAUA,GAEjB,MAAMstB,WAAYhvB,YAChB25B,aACE,MAAM3vB,EAAM4vB,6FAKZj3B,GAAMrE,S3DzBH,SAA0B0L,EAAaxE,GAAmB,GAC/D,MAAO,CACL1G,KAAMiM,GAAmBhM,KACzBC,QAAS8L,GAAUd,EAAKxE,I2DsBTq0B,CAAiB7vB,GAAK,IAGvCnG,oBACEC,KAAK61B,aAGP15B,SACE,OACE,kBAAC,WAAD,CAAU0C,MAAOA,IACf,kBAAC,IAAD,KACE,yBAAKgR,UAAU,OACb,kBAAC,IAAD,KACE,kBAAC,IAAD,CAAOmmB,KAAK,IAAIrE,UAAW6D,UAS1BtK,UC3CK+K,QACW,cAA7B16B,OAAOiC,SAAS04B,UAEe,UAA7B36B,OAAOiC,SAAS04B,UAEhB36B,OAAOiC,SAAS04B,SAASC,MAAM,2D,cCTnCC,IAASj6B,OAAO,kBAAC,GAAD,MAASqT,SAAS6mB,eAAe,SDqH3C,kBAAmB76B,WACrBA,UAAU86B,cAAcC,MAAMj2B,KAAKk2B,IACjCA,EAAaC,iB","file":"static/js/main.acce3453.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/sun.53d50a88.svg\";","module.exports = __webpack_public_path__ + \"static/media/wb-color-logo.2ae63155.svg\";","/* @flow */\nimport { baseClasses, dataLayer } from '@weatherbug/common';\n\nimport {\n  getStandardApiConfig,\n  type StandardApiConfigT,\n} from '../../common/config/getStandardApiConfig';\n\nconst { AsyncAction } = baseClasses;\nconst { EntityManagementProvider } = dataLayer.providers;\n\nconst DEFAULT_VERBOSE = true;\n\nexport const GET_APP_INSTANCE = new AsyncAction('GET_APP_INSTANCE');\nexport const UPDATE_LOCATION = new AsyncAction('UPDATE_LOCATION');\nexport const UPDATE_CUSTOM_USER_SETTINGS = new AsyncAction('UPDATE_CUSTOM_USER_SETTINGS');\n\nexport type GetAppInstanceResponseT = {\n  appInstanceId: string,\n  appInstanceInfo: {\n    app: {\n      id: string,\n      version: string,\n    },\n    cultureInfo: string,\n    installGuid: string,\n    os: {\n      type: string,\n      version: string,\n    },\n    pushToken: string,\n    vendors: Array<{\n      id: string,\n      name: string,\n    }>,\n  },\n};\n\nexport function getAppInstance({\n  data,\n  appInstanceId,\n  verbose = DEFAULT_VERBOSE,\n}: {\n  data: mixed,\n  appInstanceId: string,\n  verbose: boolean,\n}) {\n  return dispatch => {\n    const apiConfig: StandardApiConfigT = dispatch(getStandardApiConfig());\n    const { ENTITY_MANAGEMENT_API_URL, authId, secret, stdParameters } = apiConfig;\n    // TODO URL being passed in should be custom to entitiyMangement?\n    const op = new EntityManagementProvider(ENTITY_MANAGEMENT_API_URL, authId, secret);\n    return dispatch({\n      type: GET_APP_INSTANCE.base,\n      payload: op.getAppInstance(appInstanceId, data, stdParameters, verbose),\n    });\n  };\n}\n\nexport function updateUserLocation({\n  locationData,\n  appInstanceId,\n  verbose = DEFAULT_VERBOSE,\n}: {\n  locationData: mixed,\n  appInstanceId: string,\n  verbose: boolean,\n}) {\n  return dispatch => {\n    const apiConfig: StandardApiConfigT = dispatch(getStandardApiConfig());\n    const { ENTITY_MANAGEMENT_API_URL, authId, secret, stdParameters } = apiConfig;\n    const op = new EntityManagementProvider(ENTITY_MANAGEMENT_API_URL, authId, secret);\n    return dispatch({\n      type: UPDATE_LOCATION.base,\n      payload: op.updateUserLocation(appInstanceId, locationData, stdParameters, verbose),\n    });\n  };\n}\nexport function updateCustomSettings({\n  appInstanceId,\n  key,\n  value,\n  verbose = DEFAULT_VERBOSE,\n}: {\n  appInstanceId: String,\n  key: String,\n  value: mixed,\n  verbose: boolean,\n}) {\n  return dispatch => {\n    const apiConfig: StandardApiConfigT = dispatch(getStandardApiConfig());\n    const { ENTITY_MANAGEMENT_API_URL, authId, secret, stdParameters } = apiConfig;\n    const op = new EntityManagementProvider(ENTITY_MANAGEMENT_API_URL, authId, secret);\n    return dispatch({\n      type: UPDATE_CUSTOM_USER_SETTINGS.base,\n      payload: op.updateCustomSettings(appInstanceId, key, value, stdParameters, verbose),\n    });\n  };\n}\n","import { Component } from 'react';\n\nconst nAgt = window.navigator.userAgent;\n\n//These regular expressions and the getOs/getOsVersion functions need to stay in sync with the legal.js file as well as UserFilterAttribute.cs\nconst clientStrings = [\n  { s: 'windows 10', r: /(Windows 10.0|Windows NT 10.0)/i },\n  { s: 'windows 8.1', r: /(Windows 8.1|Windows NT 6.3)/i },\n  { s: 'windows 8', r: /(Windows 8|Windows NT 6.2)/i },\n  { s: 'windows 7', r: /(Windows 7|Windows NT 6.1)/i },\n  { s: 'windows NT6', r: /Windows NT 6.0/i },\n  { s: 'windows NT5.2', r: /Windows NT 5.2/i },\n  { s: 'windows NT5.1', r: /(Windows NT 5.1|Windows XP)/i },\n  { s: 'windows NT5.0', r: /(Windows NT 5.0|Windows 2000)/i },\n  { s: 'windows 9x', r: /(Win 9x 4.90|Windows ME)/i },\n  { s: 'windows 98', r: /(Windows 98|Win98)/i },\n  { s: 'windows 95', r: /(Windows 95|Win95|Windows_95)/i },\n  { s: 'windows NT4', r: /(Windows NT 4.0|WinNT4.0|WinNT|Windows NT)/i },\n  { s: 'windows CE', r: /Windows CE/i },\n  { s: 'windows 16', r: /Win16/i },\n  { s: 'android', r: /Android/i },\n  { s: 'Open BSD', r: /OpenBSD/i },\n  { s: 'Sun OS', r: /SunOS/i },\n  { s: 'Linux', r: /(Linux|X11)/i },\n  { s: 'ios', r: /(iPhone|iPad|iPod)/i },\n  { s: 'macos', r: /Mac OS X/i },\n  { s: 'macos', r: /(MacPPC|MacIntel|Mac_PowerPC|Macintosh)/i },\n  { s: 'QNX', r: /QNX/i },\n  { s: 'UNIX', r: /UNIX/i },\n  { s: 'BeOS', r: /BeOS/i },\n  { s: 'OS/2', r: /OS\\/2/i },\n  {\n    s: 'Search Bot',\n    r: /(nuhk|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask Jeeves\\/Teoma|ia_archiver)/i,\n  },\n];\n\nconst macosRegEx = new RegExp(/Mac OS X (10[._\\d]+)/i);\nconst androidRegEx = new RegExp(/Android ([._\\d]+)/i);\nconst iosRegEx = new RegExp(/OS (\\d+)_(\\d+)_?(\\d+)?/i);\n\nexport class AppStateManager extends Component {\n  static displayName = 'AppStateManager';\n\n  render() {\n    return null;\n  }\n\n  static _getOs() {\n    try {\n      for (const id in clientStrings) {\n        let cs = clientStrings[id];\n        if (cs.r.test(nAgt)) {\n          if (/windows/i.test(cs.s)) {\n            return 'windows';\n          } else {\n            return cs.s.toLowerCase();\n          }\n        }\n      }\n    } catch (error) {\n      console.error(error);\n    }\n  }\n\n  static _getOsVersion(os) {\n    let osVersion;\n\n    try {\n      switch (os) {\n        case 'windows':\n          for (let id in clientStrings) {\n            let cs = clientStrings[id];\n            if (cs.r.test(nAgt)) {\n              osVersion = cs.s.split(' ')[1];\n              break;\n            }\n          }\n          break;\n\n        case 'macos':\n          osVersion = macosRegEx.exec(nAgt)[1];\n          break;\n\n        case 'android':\n          osVersion = androidRegEx.exec(nAgt)[1];\n          break;\n\n        case 'ios':\n          osVersion = iosRegEx.exec(nAgt);\n          osVersion = osVersion[1] + '.' + osVersion[2] + '.' + (osVersion[3] | 0);\n          break;\n\n        case 'linux':\n        case 'search bot':\n          osVersion = '0';\n          break;\n\n        default:\n          os = 'other';\n          osVersion = '0';\n          break;\n      }\n    } catch (error) {\n      console.error(error);\n    }\n\n    return osVersion;\n  }\n\n  static _getUserLocale() {\n    return (window.WB && window.WB.locale) || 'en-us';\n  }\n\n  static _getLanguageCodeFromLocale(locale) {\n    let localeParts = locale.split('-', 2);\n    return localeParts[0];\n  }\n\n  static _getCountryCodeFromLocale(locale) {\n    let localeParts = locale.split('-', 2);\n    return localeParts[1];\n  }\n}\n","// @flow\n\nconst USER_SELECTED_LOCATION = 'USER_SELECTED_LOCATION';\nconst CCPA_OPT_OUT = 'CCPA_OPT_OUT';\n\nconst LocalStorage = {\n  getUserSelectedLocation: () => {\n    return JSON.parse(window.localStorage.getItem(USER_SELECTED_LOCATION));\n  },\n  setUserSelectedLocation: (location: mixed) => {\n    return window.localStorage.setItem(USER_SELECTED_LOCATION, JSON.stringify(location));\n  },\n  getKochavaId: () => {\n    return window.storage.getItem('kv_id');\n  },\n  getAppInstanceId: () => {\n    return window.storage.getItem('appInstanceId');\n  },\n  setCCPAOptOutStatus: (optOut: Boolean) => {\n    return window.localStorage.setItem(CCPA_OPT_OUT, JSON.stringify(optOut));\n  },\n  getCCPAOptOutStatus: () => {\n    const optedOut = JSON.parse(window.localStorage.getItem(CCPA_OPT_OUT));\n    return !!optedOut;\n  },\n};\n\nexport default LocalStorage;\n","/* @flow */\n\nimport { Component } from 'react';\nimport { connect } from 'react-redux';\nimport { bindActionCreators } from 'redux';\n\nimport { getAppInstance } from '../../common/actions/entityManagementActions';\nimport { getUsersLocation } from '../../common/actions/locationSearchActions';\nimport { AppStateManager } from '../../common/utilities/appStateManager';\nimport LocalStorage from '../shared/LocalStorage';\n\nimport type { GetAppInstanceResponseT } from '../../common/actions/entityManagementActions';\nimport type { ReduxState } from '../../common/reducers/index.js';\n\ntype Props = {\n  store: ReduxState,\n};\n\n// returns an uppercase hex token formatted into groups of 8-4-4-4-12\nfunction getRandomToken() {\n  // E.g. 8 * 32 = 256 bits token\n  let randomPool = new Uint8Array(32);\n  window.crypto.getRandomValues(randomPool);\n  let hex = '';\n  for (let i = 0; i < randomPool.length; ++i) {\n    hex += randomPool[i].toString(16);\n  }\n  // hex === e.g. db18458e2782b2b77e36769c569e263a53885a9944dd0a861e5064eac16f1a\n  return `${hex.slice(0, 8)}-${hex.slice(8, 12)}-${hex.slice(12, 16)}-${hex.slice(\n    16,\n    20,\n  )}-${hex.slice(20, 32)}`.toUpperCase();\n}\n\nexport async function getSuggestedAppInstanceId(store: ReduxState): Promise<string> {\n  const appInstanceId = store && store.entityManagement && store.entityManagement.appInstanceId;\n  if (appInstanceId) {\n    return appInstanceId;\n  }\n\n  const storedAppInstanceId = await LocalStorage.getAppInstanceId();\n  if (storedAppInstanceId) {\n    return storedAppInstanceId;\n  }\n\n  const newAppInstanceId = getRandomToken();\n  await setSuggestedAppInstanceId(newAppInstanceId);\n  return newAppInstanceId;\n}\n\nasync function setSuggestedAppInstanceId(appInstanceId: string): Promise<void> {\n  await window.storage.setItem('appInstanceId', appInstanceId);\n}\n\nexport function getAppId(): null | string {\n  if (!window || !window.ui || !window.ui.browser) {\n    return null;\n  }\n  return `com.weatherbug.browser.extension.${window.ui.browser.toLowerCase()}`; // manifest if different manifests per build?  or ENV if using build:firefox and build:chrome?\n}\n\nexport function getAppVersion(): 'unknown' | string {\n  const manifest =\n    (window.chrome &&\n      window.chrome.runtime &&\n      window.chrome.runtime.getManifest &&\n      window.chrome.runtime.getManifest()) ||\n    undefined;\n\n  if (manifest === undefined) {\n    console.warn(\n      'Manifest unavailable; this only works when running as an extension.  Defaulting appVersion to \"unknown\"',\n    );\n  }\n  const appVersion: string = (manifest && manifest.version) || 'unknown';\n  return appVersion;\n}\n\nconst MAX_ATTEMPTS = 8;\n\nclass _AppRegistration extends Component<Props> {\n  componentDidMount() {\n    this.registerApp();\n  }\n\n  registerApp(attemptNum: number = 1, isKochavaIdRequired?: boolean = false) {\n    console.debug(`registerApp${attemptNum > 1 ? ` (Attempt ${attemptNum})` : ''}`);\n    this.attemptToRegister(isKochavaIdRequired)\n      .then(success => {\n        if (!success) {\n          console.info('Failed to completely register');\n          if (attemptNum > MAX_ATTEMPTS) {\n            console.warn(`Failed to completely registerApp after ${MAX_ATTEMPTS} attempts`);\n            return;\n          }\n          setTimeout(() => {\n            this.registerApp(attemptNum + 1, true);\n          }, 50 * Math.pow(2, attemptNum - 1));\n        }\n      })\n      .catch(err => {\n        console.error('error in attemptToRegist(): ', err);\n      });\n  }\n\n  async attemptToRegister(isKochavaIdRequired?: boolean = false): Promise<boolean> {\n    const kochavaId = await LocalStorage.getKochavaId();\n    if (!kochavaId) {\n      console.warn('kochavaId not available');\n    }\n\n    const appVersion: string = getAppVersion();\n\n    const appId = getAppId();\n    const cultureInfo: string = AppStateManager._getUserLocale(); // e.g. \"en-us\"\n    const osType: string = AppStateManager._getOs(); // e.g. \"windows\"\n    const osVersion: string = AppStateManager._getOsVersion() || 'unknown';\n\n    const vendors = kochavaId ? [{ name: 'kochava', id: kochavaId }] : [];\n\n    const installCountry: ?string = await this.props\n      .getUsersLocation({ refresh: false })\n      .then(response => {\n        if (!response) {\n          return undefined;\n        }\n\n        return (response && response.value && response.value.countryIso2) || undefined;\n      });\n\n    const suggestedAppInstanceId = await getSuggestedAppInstanceId(this.props.store);\n\n    const appInstanceInfo = {\n      app: {\n        id: appId,\n        version: appVersion,\n      },\n      cultureInfo,\n      installGuid: suggestedAppInstanceId,\n      os: {\n        type: osType,\n        version: osVersion,\n      },\n      pushToken: '0000000000000000000000000000000000000000000000000000000011111111', // hard coded string,\n      installCountry,\n      vendors,\n    };\n\n    return this.props\n      .getAppInstance({\n        data: appInstanceInfo,\n        appInstanceId: appInstanceInfo.installGuid,\n      })\n\n      .then((response: { value: GetAppInstanceResponseT }) => {\n        const actualAppInstanceId = response.value.appInstanceId;\n        window.kochava.identify({\n          appInstanceId: actualAppInstanceId,\n        });\n\n        if (suggestedAppInstanceId !== actualAppInstanceId) {\n          setSuggestedAppInstanceId(actualAppInstanceId);\n        }\n        return kochavaId ? true : false;\n      });\n  }\n\n  render() {\n    return null;\n  }\n}\n\nfunction mapState(store) {\n  return {\n    store,\n  };\n}\n\nfunction mapActions(dispatch) {\n  return bindActionCreators(\n    {\n      getAppInstance,\n      getUsersLocation,\n    },\n    dispatch,\n  );\n}\n\nexport const AppRegistration = connect(\n  mapState,\n  mapActions,\n)(_AppRegistration);\n","/* @flow */\n\nimport { getAppVersion, getAppId } from '../../modules/main/AppRegistration';\n\nimport type { ReduxState } from '../reducers/index.js';\n\nexport type StdParametersT = {\n  application: null | string,\n  appVersion: 'unknown' | string,\n};\n\nconst stdParameters = {\n  application: getAppId(),\n  appVersion: getAppVersion(),\n};\n\nexport type StandardApiConfigT = {\n  baseUrl: string,\n  authId: string,\n  secret: string,\n  stdParameters: StdParametersT,\n\n  LOCATIONS_API_URL: string,\n  TRAFFIC_API_URL: string,\n  POLLEN_API_URL: string,\n  AQI_API_URL: string,\n  OBSERVATIONS_API_URL: string,\n  FORECAST_API_URL: string,\n  ALERTS_API_URL: string,\n  LEGAL_API_URL: string,\n  LOGGING_API_URL: string,\n  ADTARGETING_API_URL: string,\n\n  ICON_API_URL: string,\n  BACKGROUND_IMAGE_API_URL: string,\n  ENTITY_MANAGEMENT_API_URL: string,\n};\nexport function getStandardApiConfigFromStore(store: ReduxState): StandardApiConfigT {\n  const {\n    API_BASE_URL: baseUrl,\n\n    LOCATIONS_API_URL,\n    TRAFFIC_API_URL,\n    POLLEN_API_URL,\n    AQI_API_URL,\n    OBSERVATIONS_API_URL,\n    FORECAST_API_URL,\n    ALERTS_API_URL,\n    LEGAL_API_URL,\n    LOGGING_API_URL,\n    ADTARGETING_API_URL,\n    ICON_API_URL,\n    BACKGROUND_IMAGE_API_URL,\n    ENTITY_MANAGEMENT_API_URL,\n    FEEDBACK_URL,\n    AUTH_ID: authId,\n    AUTH_SECRET: secret,\n  } = store.remoteConfig.config;\n\n  return {\n    baseUrl,\n    authId,\n    secret,\n    stdParameters,\n\n    LOCATIONS_API_URL,\n    TRAFFIC_API_URL,\n    POLLEN_API_URL,\n    AQI_API_URL,\n    OBSERVATIONS_API_URL,\n    FORECAST_API_URL,\n    ALERTS_API_URL,\n    LEGAL_API_URL,\n    LOGGING_API_URL,\n    ADTARGETING_API_URL,\n\n    ICON_API_URL,\n    BACKGROUND_IMAGE_API_URL,\n    ENTITY_MANAGEMENT_API_URL,\n    FEEDBACK_URL,\n  };\n}\n\nexport function getStandardApiConfig() {\n  return function getStandardApiConfigThunk(dispatch, getStore: () => ReduxState) {\n    return getStandardApiConfigFromStore(getStore());\n  };\n}\n\nexport function getMapApiConfigFromStore(store: ReduxState) {\n  const {\n    WB_MAPS_BASE_URL: mapBaseUrl,\n    AUTH_ID: authId,\n    AUTH_SECRET: secret,\n    WB_TILE_BASE_URL: tileBaseUrl,\n  } = store.remoteConfig.config;\n  return {\n    baseUrl: mapBaseUrl,\n    tileBaseUrl,\n    authId,\n    secret,\n    stdParameters,\n  };\n}\n\nexport function getMapApiConfig() {\n  return (dispatch, getStore: () => ReduxState) => {\n    return getMapApiConfigFromStore(getStore());\n  };\n}\n","// @flow\n\nimport { baseClasses, dataLayer } from '@weatherbug/common';\n\nimport {\n  getStandardApiConfig,\n  type StandardApiConfigT,\n} from '../../common/config/getStandardApiConfig';\n\nconst { AsyncAction } = baseClasses;\nexport const GET_MY_LOCATION_BY_IP = new AsyncAction('GET_MY_LOCATION_BY_IP');\n\nconst DEFAULT_VERBOSE = true;\n\ntype float = number;\n\nexport type UserLocationByIpPayload = {\n  aqiId: string, // \"DC_Metropolitan Washington\"\n  cityId: string, // \"US51A0022\"\n  cityName: string, // \"Arlington\"\n  confirmed: string, // \"true\"\n  countryIso2: string, // \"US\"\n  countryIso3: string, // \"USA\"\n  county_Municipality: string, // \"Arlington County\"\n  dma: string, //\"511\"\n  fipsCountry: string, //\"US\"\n  forecastCityId: string, // \"US51A0022\"\n  forecastZoneId: string, // \"VA054\"\n  latitude: float,\n  locationTag: mixed | null,\n  longitude: float,\n  pollenId: string, // \"22211\"\n  populationSort: number, //5000\n  postalCode: string, // \"22204\"\n  responseTime: number,\n  schemaVersion: 1,\n  slugName: string, // \"arlington-va-22204\"\n  stateCode: string, // \"VA\"\n  state_Province: string, // \"VA\"\n  timeZoneId: string, // \"America/New_York\"\n  uvId: string, // \"WASHINGTON_DC\"\n};\n\nexport function getUsersLocation({\n  verbose = DEFAULT_VERBOSE,\n  refresh = false,\n}: {\n  verbose?: boolean,\n  refresh?: boolean,\n}) {\n  return dispatch => {\n    const apiConfig: StandardApiConfigT = dispatch(getStandardApiConfig());\n    const { LOCATIONS_API_URL, authId, secret, stdParameters } = apiConfig;\n    return dispatch({\n      type: GET_MY_LOCATION_BY_IP.base,\n      payload: getUserLocationByIP(\n        LOCATIONS_API_URL,\n        authId,\n        secret,\n        stdParameters,\n        verbose,\n        refresh,\n      ),\n    });\n  };\n}\n\nasync function getUserLocationByIP(\n  baseUrl,\n  authId,\n  secret,\n  stdParameters,\n  verbose,\n  refresh,\n): Promise<UserLocationByIpPayload> {\n  const op = new dataLayer.providers.LocationSearchProvider(baseUrl, authId, secret);\n  return await op.getUserLocationByIP(stdParameters, verbose, refresh);\n}\n\nexport function searchLocationBySearchString({\n  searchText,\n  verbose = DEFAULT_VERBOSE,\n  refresh = false,\n}: {\n  searchText: string,\n  refresh?: boolean,\n  verbose?: boolean,\n}) {\n  return dispatch => {\n    const apiConfig: StandardApiConfigT = dispatch(getStandardApiConfig());\n    const { LOCATIONS_API_URL, authId, secret, stdParameters } = apiConfig;\n    return dispatch(\n      internalSearchLocationBySearchString(\n        searchText,\n        LOCATIONS_API_URL,\n        authId,\n        secret,\n        stdParameters,\n        verbose,\n        refresh,\n      ),\n    );\n  };\n}\n\n// TODO move this to @weatherbug/common\n\nexport const LOCATION_SEARCH_BY_SEARCH_STRING = new AsyncAction('LOCATION_SEARCH_BY_SEARCH_STRING');\n\nexport function internalSearchLocationBySearchString(\n  searchString: string,\n  baseUrl: string,\n  authId: string,\n  secret: string,\n  stdParameters: Object,\n  verbose: boolean,\n  refresh: boolean = false,\n) {\n  return {\n    type: LOCATION_SEARCH_BY_SEARCH_STRING.base,\n    payload: searchLocation(searchString, baseUrl, authId, secret, stdParameters, verbose, refresh),\n  };\n}\n\nasync function searchLocation(\n  searchString: string,\n  baseUrl: string,\n  authId: string,\n  secret: string,\n  stdParameters: Object,\n  verbose: boolean,\n  refresh: boolean,\n) {\n  const op = new dataLayer.providers.LocationSearchProvider(baseUrl, authId, secret);\n  return await op.searchLocation(searchString, stdParameters, verbose, refresh);\n}\n\nexport const LOCATION_SEARCH_STARTED = 'LOCATION_SEARCH_STARTED';\nexport const LOCATION_SEARCH_TEXT_CHANGED = 'LOCATION_SEARCH_TEXT_CHANGED';\nexport const LOCATION_SEARCH_ENDED = 'LOCATION_SEARCH_ENDED';\nexport const SEARCH_LOCATION_SELECTED = 'SEARCH_LOCATION_SELECTED';\n\nexport const locationSearchStarted = () => ({\n  type: LOCATION_SEARCH_STARTED,\n});\n\nexport const locationSearchTextChanged = (searchText: string) => ({\n  type: LOCATION_SEARCH_TEXT_CHANGED,\n  payload: searchText,\n});\n\nexport const locationSearchEnded = () => ({\n  type: LOCATION_SEARCH_ENDED,\n});\n\nexport const searchLocationSelected = (location: mixed) => ({\n  type: SEARCH_LOCATION_SELECTED,\n  payload: location,\n});\n\n// end TODO move this to @weatherbug/common\n","// @flow\nimport { dataLayer, utilities } from '@weatherbug/common';\nimport { GET_MY_LOCATION_BY_IP } from '../actions/locationSearchActions';\n\nconst { GET_LOCATION_DETAILS_BY_LATLON, GET_LOCATION_DETAILS_BY_SLUG } = dataLayer.actions;\n\nconst { transformToCamelCase } = utilities;\n\n// TODO move this to @weatherbug/common\n\ntype ReduxAction = Object;\n\ntype State = {\n  locationDetailsIsRefreshing: boolean,\n  userDefaultLocationIsRefreshing: boolean,\n  lastError: ?Object,\n  locationDetails: ?{},\n  userDefaultLocation: ?{},\n};\n\nconst initialState: State = {\n  locationDetailsIsRefreshing: false,\n  userDefaultLocationIsRefreshing: false,\n  lastError: undefined,\n  locationDetails: undefined,\n  userDefaultLocation: undefined,\n};\n\nexport function locationDetails(state: State = initialState, action: ReduxAction): State {\n  switch (action.type) {\n    case GET_MY_LOCATION_BY_IP.pending: {\n      return {\n        ...state,\n        userDefaultLocationIsRefreshing: true,\n      };\n    }\n\n    case GET_MY_LOCATION_BY_IP.fulfilled: {\n      const newState = {\n        ...state,\n        userDefaultLocation: action.payload,\n        lastError: {},\n        userDefaultLocationIsRefreshing: false,\n      };\n      return newState;\n    }\n\n    case GET_MY_LOCATION_BY_IP.rejected: {\n      return {\n        ...state,\n        // locationDetails: undefined,\n        lastError: action.payload,\n        userDefaultLocationIsRefreshing: false,\n      };\n    }\n\n    case GET_LOCATION_DETAILS_BY_LATLON.pending: {\n      return {\n        ...state,\n        locationDetailsIsRefreshing: true,\n      };\n    }\n\n    case GET_LOCATION_DETAILS_BY_LATLON.fulfilled: {\n      transformToCamelCase(action.payload);\n      return {\n        ...state,\n        locationDetails: action.payload,\n        lastError: {},\n        locationDetailsIsRefreshing: false,\n      };\n    }\n\n    case GET_LOCATION_DETAILS_BY_LATLON.rejected: {\n      return {\n        ...state,\n        locationDetails: undefined,\n        lastError: action.payload,\n        locationDetailsIsRefreshing: false,\n      };\n    }\n\n    case GET_LOCATION_DETAILS_BY_SLUG.pending: {\n      return {\n        ...state,\n        locationDetailsIsRefreshing: true,\n      };\n    }\n\n    case GET_LOCATION_DETAILS_BY_SLUG.fulfilled: {\n      return {\n        ...state,\n        locationDetails: action.payload,\n        lastError: {},\n        locationDetailsIsRefreshing: false,\n      };\n    }\n\n    case GET_LOCATION_DETAILS_BY_SLUG.rejected: {\n      return {\n        ...state,\n        locationDetails: undefined,\n        lastError: action.payload,\n        locationDetailsIsRefreshing: false,\n      };\n    }\n    default: {\n      return dataLayer.reducers.locationDetails(state, action);\n    }\n  }\n}\n","// @flow\nimport {\n  LOCATION_SEARCH_BY_SEARCH_STRING,\n  LOCATION_SEARCH_STARTED,\n  LOCATION_SEARCH_TEXT_CHANGED,\n  LOCATION_SEARCH_ENDED,\n  SEARCH_LOCATION_SELECTED,\n} from '../actions/locationSearchActions';\n\n// TODO move to @weatherbug/common\n\ntype ReduxAction = Object;\n\nexport type State = {\n  locationSearchIsQuerying: boolean,\n  locationSearchEnabled: boolean,\n  isUserTyping: boolean,\n  selectedLocation: ?string,\n  searchText: ?string,\n  locationSearchResults: Array<mixed>,\n};\n\nconst initialState: State = {\n  locationSearchIsQuerying: false,\n  locationSearchEnabled: false,\n  isUserTyping: false,\n  selectedLocation: undefined,\n  searchText: undefined,\n  locationSearchResults: [],\n};\n\nexport function locationSearch(state: State = initialState, action: ReduxAction): State {\n  switch (action.type) {\n    case LOCATION_SEARCH_BY_SEARCH_STRING.pending: {\n      return {\n        ...state,\n        locationSearchIsQuerying: true,\n      };\n    }\n    case LOCATION_SEARCH_BY_SEARCH_STRING.fulfilled: {\n      return {\n        ...state,\n        locationSearchResults: action.payload,\n        lastError: {},\n        locationSearchIsQuerying: false,\n      };\n    }\n    case LOCATION_SEARCH_BY_SEARCH_STRING.rejected: {\n      return {\n        ...state,\n        locationSearchResults: [],\n        lastError: action.payload,\n        locationSearchIsQuerying: false,\n      };\n    }\n    case LOCATION_SEARCH_STARTED: {\n      return {\n        ...state,\n        locationSearchResults: [],\n        locationSearchEnabled: true,\n      };\n    }\n    case LOCATION_SEARCH_TEXT_CHANGED: {\n      return {\n        ...state,\n        isUserTyping: true,\n        searchText: action.payload,\n      };\n    }\n    case LOCATION_SEARCH_ENDED: {\n      return {\n        ...state,\n        searchText: state.selectedLocation,\n        locationSearchEnabled: false,\n      };\n    }\n    case SEARCH_LOCATION_SELECTED: {\n      let name = action.payload.CityName;\n      if (action.payload.StateCode) {\n        name += `, ${action.payload.StateCode}`;\n      } else if (action.payload.Country) {\n        name += `, ${action.payload.Country}`;\n      }\n      return {\n        ...state,\n        searchText: name,\n        selectedLocation: name,\n        locationSearchResults: [],\n        isUserTyping: false,\n      };\n    }\n    default: {\n      return state;\n    }\n  }\n}\n","// @flow\n\ntype ReduxAction = Object;\n\nexport type State = {\n  temperatureUnit: 'english' | 'metric',\n};\n\nconst initialState: State = {\n  temperatureUnit: 'english', // when we make this changeable, be sure to update all of the various API calls to use this instead of always using english\n};\n\nexport function userConfig(state: State = initialState, action: ReduxAction): State {\n  switch (action.type) {\n    default: {\n      return state;\n    }\n  }\n}\n","// @flow\n\nimport { GET_APP_INSTANCE, UPDATE_CUSTOM_USER_SETTINGS } from '../actions/entityManagementActions';\n\ntype ReduxAction = Object;\n\nexport type State = {\n  appInstanceId: ?string,\n  userSettings: mixed,\n};\n\nconst initialState: State = {\n  appInstanceId: undefined,\n};\n\nexport function entityManagement(state: State = initialState, action: ReduxAction): State {\n  switch (action.type) {\n    case GET_APP_INSTANCE.fulfilled: {\n      return {\n        ...state,\n        appInstanceId: action.payload.appInstanceId,\n      };\n    }\n    case UPDATE_CUSTOM_USER_SETTINGS.fulfilled: {\n      return {\n        ...state,\n        userSettings: action.payload,\n      };\n    }\n\n    default: {\n      return state;\n    }\n  }\n}\n","/* @flow */\nimport { baseClasses } from '@weatherbug/common';\n\nconst { PulseBaseProvider } = baseClasses;\n\nconst configCacheKey = 'config';\n\nexport default class RemoteConfigProvider extends PulseBaseProvider {\n  constructor(url: string, options: Object, logger: mixed) {\n    super(url, '', '', options, logger);\n    this.storage.sync[configCacheKey] = this.configSyncer.bind(this);\n  }\n\n  async configSyncer(params: Object) {\n    const { id, syncParams, resolve, reject } = params;\n    const responseValidator = (result) => !!result;\n    return await super.syncData(\n      syncParams.key,\n      id,\n      {},\n      '',\n      resolve,\n      reject,\n      responseValidator,\n      syncParams.pulseApi,\n    );\n  }\n\n  async getConfig(refresh: boolean = false) {\n    const syncParams = {\n      refresh,\n    };\n    const id = JSON.stringify(syncParams);\n\n    if (refresh) {\n      super.removeFromStorage(configCacheKey, id);\n    }\n    return await super.loadFromStorage(configCacheKey, id, syncParams);\n  }\n}\n","/* @flow */\nimport { baseClasses } from '@weatherbug/common';\nimport RemoteConfigProvider from '../providers/RemoteConfigProvider';\n\nconst { AsyncAction } = baseClasses;\n\nexport const GET_CONFIG_SETTING = new AsyncAction('GET_CONFIG_SETTING');\n\nexport function getConfigSetting(url: string, refresh: boolean = false) {\n  return {\n    type: GET_CONFIG_SETTING.base,\n    payload: getConfig(url, refresh),\n  };\n}\n\nasync function getConfig(url: string, refresh: boolean) {\n  const provider = new RemoteConfigProvider(url);\n  return provider.getConfig(refresh);\n}\n","/* @flow */\n\nimport { GET_CONFIG_SETTING } from '../actions/remoteConfigActions';\nimport localAppConfig from '../resources/appConfig';\n\nexport type State = {\n  isloaded: boolean,\n  config: typeof localAppConfig,\n};\n\nconst initialState: State = {\n  isloaded: false,\n  config: localAppConfig,\n};\n\nexport default (state: State = initialState, action: Object): State => {\n  switch (action.type) {\n    case GET_CONFIG_SETTING.pending: {\n      return {\n        ...state,\n        isloaded: false,\n      };\n    }\n\n    case GET_CONFIG_SETTING.fulfilled: {\n      return {\n        ...state,\n        isloaded: true,\n        config: {\n          ...state.config,\n          ...action.payload,\n        },\n      };\n    }\n\n    case GET_CONFIG_SETTING.rejected: {\n      return {\n        ...state,\n        isloaded: true,\n      };\n    }\n\n    default:\n      return state;\n  }\n};\n","// @flow\n\nexport default {\n  MAPBOX_ACCESS_TOKEN:\n    'pk.eyJ1IjoiZWFydGhuZXR3b3JrcyIsImEiOiJjaWs4ZnBiZmMwMmZhdjVrbjNhN3pkd2l4In0.vBvBKxKCr4Amrr9cVDlQ8A',\n  APP_KEY: '7e90c1d6d2bd4d799c106815f55665fb',\n  KOCHAVA_APP_GUID: 'koweatherbug-extension-chrome-weatherbug-demo-0jkuza',\n  WB_MAPS_BASE_URL: 'https://and-clog2.pulse.weatherbug.net',\n  WB_TILE_BASE_URL: 'https://web-maps.api.weatherbug.net',\n  WB_ALERTS_BASE_URL: 'https://www.weatherbug.com/alerts',\n  PULSE_URL: 'https://and-clog2.pulse.weatherbug.net',\n  AUTH_SECRET: '453f326325164def9638ec7e6b4c1b86',\n  AUTH_ID: 'VendorDevShackV1',\n\n  API_BASE_URL: 'https://and-clog2.pulse.weatherbug.net',\n\n  TRAFFIC_API_URL: 'https://and-clog2.pulse.weatherbug.net',\n  POLLEN_API_URL: 'https://and-clog2.pulse.weatherbug.net',\n  LOCATIONS_API_URL: 'https://cmn-loc.pulse.weatherbug.net',\n  AQI_API_URL: 'https://and-clog2.pulse.weatherbug.net',\n  OBSERVATIONS_API_URL: 'https://and-clog2.pulse.weatherbug.net',\n  FORECAST_API_URL: 'https://and-clog2.pulse.weatherbug.net',\n  ALERTS_API_URL: 'https://cmn-push.pulse.weatherbug.net',\n  LEGAL_API_URL: 'https://and-clog2.pulse.weatherbug.net',\n  LOGGING_API_URL: 'https://and-clog2.pulse.weatherbug.net',\n  ADTARGETING_API_URL: 'https://and-clog2.pulse.weatherbug.net',\n  ICON_API_URL: 'https://and-clog2.pulse.weatherbug.net',\n  BACKGROUND_IMAGE_API_URL: 'https://and-clog2.pulse.weatherbug.net',\n  ENTITY_MANAGEMENT_API_URL: 'https://and-clog2.pulse.weatherbug.net',\n};\n","const SET_CCPA_OPT_STATUS = 'SET_CCPA_OPT_STATUS';\nconst initialState: State = {\n  ccpaOptStatus: undefined,\n};\n\nexport default (state: State = initialState, action): State => {\n  switch (action.type) {\n    case SET_CCPA_OPT_STATUS: {\n      return {\n        ...state,\n        ccpaOptStatus: action.payload,\n      };\n    }\n\n    default:\n      return state;\n  }\n};\n","// @flow\nimport { combineReducers } from 'redux';\nimport { dataLayer } from '@weatherbug/common';\nimport { dataLayer as webAdsDL } from '@weatherbug/web-ads';\n\nimport { locationDetails } from './locationDetailsReducer';\nimport { locationSearch } from './locationSearchReducer';\nimport { userConfig } from './userConfigReducer';\nimport { entityManagement } from './entityManagementReducer';\nimport remoteConfig from './remoteConfigReducer';\nimport ccpaReducer from './ccpaReducer';\n\nimport type { State as EntityManagementState } from './entityManagementReducer';\nimport type { State as RemoteConfigState } from './remoteConfigReducer';\n\nconst rootReducer = combineReducers({\n  ...dataLayer.reducers,\n  ...webAdsDL.reducers,\n  locationDetails,\n  locationSearch,\n  userConfig,\n  remoteConfig,\n  entityManagement,\n  ccpaReducer,\n});\nexport default rootReducer;\n\nexport type ReduxState = {\n  entityManagement: EntityManagementState,\n  remoteConfig: RemoteConfigState,\n};\n","/* @flow */\nimport { createStore, applyMiddleware } from 'redux';\nimport ReduxThunk from 'redux-thunk';\nimport promise from 'redux-promise-middleware';\nimport { composeWithDevTools } from 'redux-devtools-extension';\nimport rootReducer from '../reducers';\nimport type { Store } from 'redux';\n\nfunction configureStore(): Store {\n  const middleware = [];\n  const enhancers = [];\n\n  middleware.push(promise);\n  middleware.push(ReduxThunk);\n\n  // const composeEnhancers = window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose;\n  enhancers.push(applyMiddleware(...middleware));\n\n  const store: Store = createStore(rootReducer, undefined, composeWithDevTools(...enhancers));\n  return store;\n}\n\nexport default configureStore;\n","// @flow\n\nimport React from 'react';\n\nimport styled, { keyframes } from 'styled-components';\n\nconst ldsRing = keyframes`\n  from {\n    transform: rotate(0deg);\n  }\n\n  to {\n    transform: rotate(360deg);\n  }\n`;\n\nconst Container = styled.div`\n  display: inline-block;\n  position: relative;\n  width: 64px;\n  height: 64px;\n\n  div {\n    box-sizing: border-box;\n    display: block;\n    position: absolute;\n    width: 51px;\n    height: 51px;\n    margin: 6px;\n    border: 6px solid rgb(140, 140, 140);\n    border-radius: 50%;\n    animation: ${ldsRing} 0.9s cubic-bezier(0.5, 0, 0.5, 1) infinite;\n    border-color: rgb(140, 140, 140) transparent transparent transparent;\n  }\n\n  div:nth-child(1) {\n    animation-delay: -0.25s;\n  }\n\n  div:nth-child(2) {\n    animation-delay: -0.2s;\n  }\n\n  div:nth-child(3) {\n    animation-delay: -0.1s;\n  }\n`;\n\nexport const LoadingSpinner = () => {\n  return (\n    <Container>\n      <div />\n      <div />\n      <div />\n    </Container>\n  );\n};\n","import React, { Component } from 'react';\nimport matchMedia from 'matchmediaquery';\nimport PropTypes from 'prop-types';\n\nexport class Map extends Component {\n  static propTypes = {\n    latitude: PropTypes.number.isRequired,\n    longitude: PropTypes.number.isRequired,\n    zoom: PropTypes.number,\n    mapboxAccessToken: PropTypes.string.isRequired,\n    initialLongitude: PropTypes.number,\n    initialLatitude: PropTypes.number,\n    initialZoom: PropTypes.number,\n    enableDragRotate: PropTypes.bool,\n    enablePan: PropTypes.bool,\n    enableZoom: PropTypes.bool,\n    showFullscreenControl: PropTypes.bool,\n    showNavigationControl: PropTypes.bool,\n    showCenterMarker: PropTypes.bool,\n    centerMarkerText: PropTypes.string,\n    centerMarkerCircleColor: PropTypes.string,\n    centerMarkerTextColor: PropTypes.string,\n    centerMarkerLatitude: PropTypes.number,\n    centerMarkerLongitude: PropTypes.number,\n    smallPinImageUrl: PropTypes.string,\n    bigPinImageUrl: PropTypes.string,\n    height: PropTypes.number,\n    extension: PropTypes.func,\n    onZoomChanged: PropTypes.func,\n    onPanned: PropTypes.func,\n  };\n\n  constructor(props) {\n    super(props);\n    const { latitude, longitude } = this.props;\n    this.state = {\n      latitude,\n      longitude,\n    };\n\n    this.mapZoomInPressed = this.mapZoomInPressed.bind(this);\n    this.mapZoomOutPressed = this.mapZoomOutPressed.bind(this);\n    this.mapPanToMarkerPressed = this.mapPanToMarkerPressed.bind(this);\n    this.onZoomChanged = this.onZoomChanged.bind(this);\n    this.changeZoom = this.changeZoom.bind(this);\n    this.onPanned = this.onPanned.bind(this);\n    this.updateZoomState = this.updateZoomState.bind(this);\n  }\n\n  async componentDidMount() {\n    //TODO: How should we do this?\n    this.mapboxgl = window.mapboxgl;\n    this.mapboxgl.accessToken = this.props.mapboxAccessToken;\n    this.mapboxgl.workerUrl = '/lib/mapbox-gl-csp-worker.js';\n    const {\n      initialLongitude,\n      initialLatitude,\n      initialZoom,\n      centerMarkerLatitude,\n      centerMarkerLongitude,\n    } = this.props;\n    const center =\n      !isNaN(initialLongitude) && !isNaN(initialLatitude)\n        ? [initialLongitude, initialLatitude]\n        : null;\n    const initZoom = !isNaN(initialZoom) ? initialZoom : 10;\n    this.map = new this.mapboxgl.Map({\n      container: this.mapContainer,\n      center,\n      zoom: initZoom,\n      minZoom: 2,\n      maxZoom: 15,\n      style: 'mapbox://styles/mapbox/streets-v9',\n      touchZoomRotate: this.props.enableZoom || false,\n      scrollZoom: this.props.enableZoom,\n      logoPosition: 'bottom-left',\n      attributionControl: true,\n      logoControl: true,\n    });\n\n    // HACK: This fixes a bug on the website where when the full screen map container loads initially the map doesn't know how much space to take so it is mostly grey.\n    setTimeout(() => {\n      this.map.resize();\n    }, 500);\n\n    this.onMapZoomListener = this.map.on('zoom', this.updateZoomState);\n    this.map.on('dragend', this.onPanned);\n    this.map.on('zoomend', this.onZoomChanged);\n    const { latitude, longitude, zoom, showCenterMarker } = this.props;\n    this.tryLocationUpdate(latitude, longitude, zoom, showCenterMarker);\n\n    if (!this.props.enableDragRotate) {\n      this.map.dragRotate.disable();\n    }\n\n    if (!this.props.enablePan) {\n      this.map.dragPan.disable();\n    }\n\n    if (!this.props.enableZoom) {\n      this.map.scrollZoom.disable();\n      this.map.boxZoom.disable();\n      this.map.doubleClickZoom.disable();\n      this.map.touchZoomRotate.disable();\n    }\n\n    if (this.props.showFullscreenControl) {\n      this.addFullscreenControl();\n    }\n\n    if (this.props.showNavigationControl) {\n      this.navigationControl = new this.mapboxgl.NavigationControl();\n      this.map.addControl(this.navigationControl, 'bottom-right');\n    }\n\n    if (\n      this.props.showCenterMarker &&\n      ((!isNaN(latitude) && !isNaN(longitude)) ||\n        (!isNaN(centerMarkerLatitude) && !isNaN(centerMarkerLongitude)))\n    ) {\n      const markerLat = centerMarkerLatitude || latitude;\n      const markerLon = centerMarkerLongitude || longitude;\n      this.createMarker(\n        markerLat,\n        markerLon,\n        this.props.centerMarkerText,\n        this.props.centerMarkerCircleColor,\n        this.props.centerMarkerTextColor,\n      );\n    }\n  }\n\n  updateZoomState(event) {\n    const newZoom = Math.round(event.target._easeOptions.zoom);\n    if (this.state.zoom !== newZoom) {\n      this.setState({ zoom: newZoom });\n    }\n  }\n\n  onZoomChanged() {\n    if (this.props.onZoomChanged) {\n      const zoom = this.map.getZoom();\n      this.props.onZoomChanged(zoom);\n    }\n  }\n\n  onPanned() {\n    if (this.props.onPanned) {\n      const { lat, lng } = this.map.getCenter();\n      this.props.onPanned(lat, lng);\n    }\n  }\n\n  componentWillUnmount() {\n    if (this.map) {\n      this.map.remove();\n    }\n  }\n\n  async componentDidUpdate(prevProps) {\n    const nextLatitude = this.props.latitude;\n    const nextLongitude = this.props.longitude;\n    const nextZoom = this.props.zoom;\n    const currentZoom = this.state.zoom;\n\n    const locationChanged =\n      (!isNaN(nextLatitude) && this.state.latitude !== nextLatitude) ||\n      (!isNaN(nextLongitude) && this.state.longitude !== nextLongitude);\n\n    if (locationChanged || (nextZoom && currentZoom !== nextZoom)) {\n      this.tryLocationUpdate(nextLatitude, nextLongitude, nextZoom, this.props.showCenterMarker);\n    }\n\n    if (this.state.enableDragRotate !== this.props.enableDragRotate) {\n      this.setState({ enableDragRotate: this.props.enableDragRotate });\n      if (this.props.enableDragRotate) {\n        this.map.dragRotate.enable();\n      } else {\n        this.map.dragRotate.disable();\n      }\n    }\n\n    if (this.state.enablePan !== this.props.enablePan) {\n      this.setState({ enablePan: this.props.enablePan });\n      if (this.props.enablePan) {\n        this.map.dragPan.enable();\n      } else {\n        this.map.dragPan.disable();\n      }\n    }\n\n    if (this.state.enableZoom !== this.props.enableZoom) {\n      this.setState({ enableZoom: this.props.enableZoom });\n      if (this.props.enableZoom) {\n        this.map.scrollZoom.enable();\n        this.map.boxZoom.enable();\n        this.map.doubleClickZoom.enable();\n        this.map.touchZoomRotate.enable();\n      } else {\n        this.map.scrollZoom.disable();\n        this.map.boxZoom.disable();\n        this.map.doubleClickZoom.disable();\n        this.map.touchZoomRotate.disable();\n      }\n    }\n\n    if (this.props.showFullscreenControl !== prevProps.showFullscreenControl) {\n      if (this.props.showFullscreenControl) {\n        this.addFullscreenControl();\n      } else {\n        this.map.removeControl(this.fullscreenControl);\n        this.fullscreenControl = undefined;\n      }\n    }\n\n    if (this.props.showNavigationControl !== prevProps.showNavigationControl) {\n      if (this.props.showNavigationControl) {\n        this.navigationControl = new this.mapboxgl.NavigationControl();\n        this.map.addControl(this.navigationControl, 'bottom-right');\n      } else {\n        this.map.removeControl(this.navigationControl);\n        this.navigationControl = undefined;\n      }\n    }\n\n    if (this.props.showCenterMarker !== prevProps.showCenterMarker) {\n      if (\n        this.props.showCenterMarker &&\n        ((!isNaN(nextLatitude) && !isNaN(nextLongitude)) ||\n          (!isNaN(this.props.centerMarkerLatitude) && !isNaN(this.props.centerMarkerLongitude)))\n      ) {\n        const markerLat = this.props.centerMarkerLatitude || prevProps.centerMarkerLatitude;\n        const markerLon = this.props.centerMarkerLongitude || prevProps.centerMarkerLongitude;\n\n        this.createMarker(\n          markerLat,\n          markerLon,\n          this.props.centerMarkerText,\n          this.props.centerMarkerCircleColor,\n          this.props.centerMarkerTextColor,\n        );\n      } else {\n        if (this.centerMarker) {\n          this.centerMarker.remove();\n        }\n        this.centerMarkerSpan = undefined;\n      }\n    }\n\n    if (\n      this.props.centerMarkerCircleColor !== prevProps.centerMarkerCircleColor &&\n      this.centerMarkerSpan\n    ) {\n      this.centerMarkerSpan.style.border = `1px ${this.props.centerMarkerCircleColor} solid`;\n    }\n\n    if (this.props.centerMarkerText !== prevProps.centerMarkerText && this.centerMarkerSpan) {\n      this.centerMarkerSpan.innerText = this.props.centerMarkerText;\n    }\n\n    if (\n      this.props.centerMarkerTextColor !== prevProps.centerMarkerTextColor &&\n      this.centerMarkerSpan\n    ) {\n      this.centerMarkerSpan.style.color = this.props.centerMarkerTextColor;\n    }\n  }\n\n  addFullscreenControl() {\n    this.fullscreenControl = new this.mapboxgl.FullscreenControl();\n    window.fullscreenControl = this.fullscreenControl;\n    window.resizeTime = 100;\n\n    //Override the fullscreen button click to trigger a resize to fix the safari fullscreen button issue.\n    const originalOnClickFullScreen = this.fullscreenControl._onClickFullscreen;\n    this.fullscreenControl._onClickFullscreen = () => {\n      originalOnClickFullScreen();\n      setTimeout(() => {\n        this.map.resize();\n      }, window.resizeTime);\n    };\n\n    this.map.addControl(this.fullscreenControl, 'bottom-right');\n  }\n\n  tryLocationUpdate(latitude, longitude, zoom, showCenterMarker) {\n    if (latitude && !isNaN(latitude) && longitude && !isNaN(longitude)) {\n      this.setState({\n        latitude,\n        longitude,\n        zoom,\n      });\n\n      if (this.map) {\n        if (showCenterMarker) {\n          this.createMarker(\n            this.props.centerMarkerLatitude || latitude,\n            this.props.centerMarkerLongitude || longitude,\n            this.props.centerMarkerText,\n            this.props.centerMarkerCircleColor,\n            this.props.centerMarkerTextColor,\n          );\n        }\n        const flyToParams = { center: [longitude, latitude] };\n        if (zoom && !isNaN(zoom)) {\n          flyToParams.zoom = zoom;\n        }\n        this.map.flyTo(flyToParams);\n      }\n    }\n  }\n\n  createMarker(latitude, longitude, markerText, circleColor, markerTextColor) {\n    if (this.centerMarker) {\n      this.centerMarker.remove();\n      this.centerMarkerSpan = undefined;\n    }\n    var el = document.createElement('div');\n    el.className = 'marker';\n    //TODO: Add support for other marker sources\n    let imageSrc, width, height;\n\n    if (matchMedia('(max-width: 480px)').matches) {\n      imageSrc = this.props.smallPinImageUrl;\n      width = '24px';\n      height = '34px';\n    } else {\n      imageSrc = this.props.bigPinImageUrl;\n      width = '37px';\n      height = '51px';\n    }\n    const img = document.createElement('img');\n    img.src = imageSrc;\n    img.style.width = width;\n    img.style.height = height;\n    el.appendChild(img);\n\n    if (markerText) {\n      this.centerMarkerSpan = document.createElement('span');\n      this.centerMarkerSpan.innerText = markerText;\n      this.centerMarkerSpan.style.position = 'absolute';\n\n      if (markerTextColor) {\n        this.centerMarkerSpan.style.color = markerTextColor;\n      }\n\n      if (circleColor) {\n        this.centerMarkerSpan.style.border = `1px ${circleColor} solid`;\n        this.centerMarkerSpan.style.borderRadius = '100%';\n        this.centerMarkerSpan.style.textAlign = 'center';\n      }\n\n      if (matchMedia('(max-width: 480px)').matches) {\n        this.centerMarkerSpan.style.top = '1px';\n        this.centerMarkerSpan.style.left = '2px';\n        this.centerMarkerSpan.style.padding = '0px';\n        this.centerMarkerSpan.style.paddingLeft = '3px';\n        this.centerMarkerSpan.style.paddingRight = '3px';\n        this.centerMarkerSpan.style.fontSize = '11px';\n        this.centerMarkerSpan.style.minWidth = '12px';\n      } else {\n        this.centerMarkerSpan.style.top = '3px';\n        this.centerMarkerSpan.style.left = '3px';\n        this.centerMarkerSpan.style.padding = '5px';\n        this.centerMarkerSpan.style.fontSize = '16px';\n        this.centerMarkerSpan.style.minWidth = '17px';\n      }\n\n      el.appendChild(this.centerMarkerSpan);\n    }\n\n    // add marker to map\n    this.centerMarker = new this.mapboxgl.Marker(el)\n      .setLngLat([longitude, latitude])\n      .addTo(this.map);\n  }\n\n  changeZoom(zoom) {\n    if (this.state.zoom !== zoom) {\n      this.setState({ zoom });\n      this.map.zoomTo(zoom);\n    }\n  }\n\n  mapPanToMarkerPressed() {\n    if (this.centerMarker) {\n      const { lng, lat } = this.centerMarker.getLngLat();\n      this.map.easeTo({ center: [lng, lat] });\n    } else {\n      const { latitude, longitude } = this.props;\n      this.map.easeTo({ center: [longitude, latitude] });\n    }\n  }\n\n  mapZoomInPressed() {\n    if (this.map) {\n      this.map.zoomIn();\n    }\n  }\n\n  mapZoomOutPressed() {\n    if (this.map) {\n      this.map.zoomOut();\n    }\n  }\n\n  render() {\n    const { extension } = this.props;\n    const { latitude, longitude, zoom } = this.state;\n    return (\n      <div style={{ ...styles.container, height: this.props.height }}>\n        <div style={styles.mapStyle} ref={el => (this.mapContainer = el)} />\n        {extension &&\n          this.map &&\n          extension(\n            this.map,\n            latitude,\n            longitude,\n            this.mapZoomOutPressed,\n            this.mapZoomInPressed,\n            this.mapPanToMarkerPressed,\n            zoom,\n            this.changeZoom,\n          )}\n      </div>\n    );\n  }\n}\n\nconst styles = {\n  container: {\n    width: '100%',\n    background: '#F9F9F9',\n    border: '1px solid #EEEEEE',\n    borderRadius: '2px',\n    display: 'flex',\n    position: 'relative',\n  },\n  mapStyle: {\n    height: '100%',\n    width: '100%',\n  },\n};\n","/* @flow */\nimport React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport { RasterLayer } from '@weatherbug/react';\nimport { Map } from './map';\n\nimport styled from 'styled-components';\nimport {\n  getStandardApiConfigFromStore,\n  getMapApiConfigFromStore,\n} from '../../common/config/getStandardApiConfig';\n\nimport { LoadingSpinner } from '../shared/LoadingSpinner';\n\ntype Props = {\n  authId: string,\n  secret: string,\n  stdParameters: Object,\n  mapboxAccessToken: string,\n\n  locationName: ?string,\n  locationSlugName: ?string,\n\n  sidebarContent: ?React$Element<any>,\n  pageTitle: string,\n\n  latitude?: number,\n  longitude?: number,\n  defaultLayerId: string,\n  defaultZoom: number,\n  className?: string,\n};\n\n// const layers = [\n//   'lxflash-radar-consumer-web',\n//   'Radar.Global', // \"Radar\"\n//   'Contour.Observed.Pollen.Blur', // \"Pollen\"\n//   'GlobalSatellite',\n//   'en-alerts',\n//   'nws-alerts',\n//   'lxflash-consumer', // \"Lightning\"\n//   'Contour.Observed.DailyRain',\n//   'Contour.Observed.Temperature',\n//   'Observed.Temperature',\n//   'Contour.Observed.Pressure.SeaLevel',\n//   'Observed.Pressure.SeaLevel',\n//   'Contour.Observed.Temperature.HeatIndex',\n//   'Contour.Observed.WindChill',\n//   'Contour.Observed.Humidity',\n//   'Contour.Observed.WindSpeed',\n//   'Contour.Observed.DewPoint',\n// ]\n\nclass _MapView extends Component<Props> {\n  onClick = () => {\n    const newTab = window.open('about:blank', '_blank');\n    const { locationSlugName } = this.props;\n    if (newTab && newTab.location && locationSlugName) {\n      newTab.location.href = `https://www.weatherbug.com/maps/${locationSlugName}?layerId=Radar.Global`;\n    }\n  };\n\n  render() {\n    const {\n      authId,\n      secret,\n      mapboxAccessToken,\n      stdParameters,\n      defaultLayerId,\n      defaultZoom,\n      longitude,\n      latitude,\n      className,\n    } = this.props;\n\n    if (typeof latitude !== 'number' || typeof longitude !== 'number') {\n      return (\n        <LoadingContainer className={className}>\n          <LoadingSpinner />\n        </LoadingContainer>\n      );\n    }\n\n    return (\n      <Container className={className} onClick={this.onClick}>\n        <Map\n          latitude={latitude}\n          longitude={longitude}\n          initialLatitude={latitude}\n          initialLongitude={longitude}\n          mapboxAccessToken={mapboxAccessToken}\n          showCenterMarker={true}\n          enablePan={false}\n          enableZoom={false}\n          initialZoom={defaultZoom}\n          smallPinImageUrl=\"img/map-pin-active.png\"\n          bigPinImageUrl=\"img/map-pin-active.png\"\n          extension={(\n            map,\n            latitude,\n            longitude,\n            mapZoomOutPressed,\n            mapZoomInPressed,\n            mapPanToMarkerPressed,\n            currentZoomLevel,\n            changeZoom,\n          ) => {\n            const tempUnits = 1; //'C';\n            const pressureUnits = 1; //'inHg';\n            const rainUnits = 2; //'mm';\n            const windUnits = 1; //'mph';\n            return (\n              <RasterLayer\n                map={map}\n                latitude={latitude}\n                longitude={longitude}\n                mapBaseUrl={this.props.mapApiUrl}\n                tileBaseUrl={this.props.tileBaseUrl}\n                authId={authId}\n                secret={secret}\n                layerOpacity={70}\n                stdApiParameters={stdParameters}\n                defaultLayerId={defaultLayerId}\n                tempUnit={tempUnits}\n                pressureUnit={pressureUnits}\n                rainUnit={rainUnits}\n                windUnit={windUnits}\n              />\n            );\n          }}\n        />\n      </Container>\n    );\n  }\n}\n\nconst Container = styled.div`\n  width: 100%;\n  height: 100%;\n  cursor: pointer;\n  & > div {\n    height: 100%; // This is to work around a bug with the <Map /> component\n  }\n`;\n\nconst LoadingContainer = styled.div`\n  display: flex;\n  align-items: center;\n  justify-content: center;\n`;\n\nfunction select(store) {\n  const { remoteConfig, locationDetails } = store;\n  const { authId, secret, stdParameters } = getStandardApiConfigFromStore(store);\n  const { baseUrl: mapApiUrl, tileBaseUrl } = getMapApiConfigFromStore(store);\n\n  const mapboxAccessToken =\n    remoteConfig && remoteConfig.config && remoteConfig.config.MAPBOX_ACCESS_TOKEN;\n  if (!mapboxAccessToken) {\n    throw new Error('Missing Mapbox Access Token');\n  }\n\n  const locationSlugName: ?string =\n    locationDetails && locationDetails.locationDetails && locationDetails.locationDetails.slugName;\n  return {\n    locationSlugName,\n    mapboxAccessToken,\n    authId,\n    secret,\n    stdParameters,\n    mapApiUrl,\n    tileBaseUrl,\n  };\n}\n\nexport const MapView = styled(connect(select)(_MapView))``;\n","/* @flow */\n\nimport { Component } from 'react';\nimport { connect } from 'react-redux';\n\ntype Props = {\n  size: 'small' | 'large',\n  iconCode: ?number,\n  iconUrl: ?string,\n  // dispatch: Dispatch,\n  children: (params: { src: ?string }) => React$Element<any>,\n};\nclass _WeatherIcon extends Component<Props> {\n  render() {\n    return this.props.children({\n      src: this.props.iconUrl,\n    });\n  }\n}\n\nfunction select(store, ownProps) {\n  const { iconCode } = ownProps;\n  const iconEntry = ((store.icon && store.icon.forecastIcons && store.icon.forecastIcons.Icons) ||\n    [])[iconCode];\n  const iconUrl = iconEntry && iconEntry.Url;\n  return {\n    iconUrl,\n  };\n}\n\nexport const WeatherIcon = connect(select)(_WeatherIcon);\n","// @flow\n//\nexport const MONTHS = [\n  'Jan',\n  'Feb',\n  'Mar',\n  'Apr',\n  'May',\n  'Jun',\n  'Jul',\n  'Aug',\n  'Sep',\n  'Oct',\n  'Nov',\n  'Dec',\n];\nexport const DAYS = ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'];\n","/* @flow */\nimport styled, { css } from 'styled-components';\n\nexport const Title1 = styled.h1`\n  font-size: 64px;\n  font-weight: 300;\n  color: #ffffff;\n  margin: 0;\n`;\n\nexport const Title2 = styled.h2`\n  font-size: 28px;\n  font-weight: 400;\n  color: #ffffff;\n  margin: 0;\n`;\n\nexport const Title3 = styled.h4`\n  font-size: 24px;\n  font-weight: 400;\n  color: #ffffff;\n  margin: 0;\n`;\n\nconst BaseText = styled.p`\n  color: white;\n  margin: 0;\n  ${props =>\n    'lineClamp' in props &&\n    css`\n      display: -webkit-box;\n      -webkit-box-orient: vertical;\n      -webkit-line-clamp: ${props.lineClamp};\n      overflow: hidden;\n    `}\n`;\n\nexport const Text1 = styled(BaseText)`\n  font-size: 26px;\n  font-weight: 300;\n`;\n\n// bold, semiBold\nexport const Text2 = styled(BaseText).attrs(props => {\n  const weight = (function() {\n    if (props.bold) {\n      return '700';\n    } else if (props.semiBold) {\n      return '600';\n    } else {\n      return '400';\n    }\n  })();\n\n  return {\n    weight,\n  };\n})`\n  font-size: 18px;\n  font-weight: ${props => props.weight};\n`;\n\nexport const Text3 = styled(BaseText).attrs(props => {\n  const color = (function() {\n    if (props.emphasize) {\n      return 'white';\n    } else {\n      return 'rgba(255, 255, 255, 0.6)';\n    }\n  })();\n\n  return {\n    color,\n  };\n})`\n  font-size: 14px;\n  font-weight: 300;\n  color: ${props => props.color};\n`;\n","// @flow\n\nimport { dataLayer } from '@weatherbug/common';\n\nimport {\n  getStandardApiConfig,\n  type StandardApiConfigT,\n} from '../../common/config/getStandardApiConfig';\n\nconst DEFAULT_VERBOSE = true;\n\ntype Datestring = string;\ntype float = number;\n\nexport type DailyPayload = {\n  dailyForecastPeriods: Array<{\n    detailedDescription: string,\n    forecastDateLocalStr: Datestring,\n    forecastDateUtcStr: Datestring,\n    iconCode: number,\n    isNightTimePeriod: boolean,\n    summaryDescription: string,\n    temperature: number,\n  }>,\n  forecastCreatedUtcStr: Datestring,\n  location: string, //\"US11W0001\",\n  locationType: 'city' | string,\n  responseTime: number,\n};\n\nexport function getDailyForecastByLatLon({\n  latitude,\n  longitude,\n  offset = 0,\n  units = 'english',\n  verbose = DEFAULT_VERBOSE,\n  refresh = false,\n}: {\n  latitude: number,\n  longitude: number,\n  offset?: number,\n  units?: 'english' | 'metric',\n  verbose?: boolean,\n  refresh?: boolean,\n}) {\n  return dispatch => {\n    const apiConfig: StandardApiConfigT = dispatch(getStandardApiConfig());\n    const { FORECAST_API_URL, authId, secret, stdParameters } = apiConfig;\n    return dispatch(\n      dataLayer.actions.getDailyForecastByLatLon(\n        `${latitude},${longitude}`,\n        'LatitudeLongitude',\n        offset,\n        units,\n        FORECAST_API_URL,\n        authId,\n        secret,\n        stdParameters,\n        verbose,\n        refresh,\n      ),\n    );\n  };\n}\n\nexport type HourlyForecastEntry = {\n  adjustedPrecipProbability: number,\n  cloudCoverPercent: number,\n  description: null | string,\n  dewPoint: number,\n  feelsLike: number,\n  forecastDateLocalStr: Datestring,\n  forecastDateUtcStr: Datestring,\n  globeTemperature: number,\n  iconCode: number,\n  precipCode: number,\n  precipProbability: number,\n  precipRate: float,\n  relativeHumidity: number,\n  snowRate: number,\n  surfacePressure: float,\n  temperature: number,\n  thunderstormProbability: number,\n  wetBulbTemperature: number,\n  windDirectionDegrees: number,\n  windSpeed: number,\n};\n\nexport type HourlyPayload = {\n  forecastCreatedUtcStr: Datestring,\n  hourlyForecastPeriod: Array<HourlyForecastEntry>,\n  location: string, // e.g. \"US11W0001\",\n  locationType: 'city' | string,\n  responseTime: number,\n};\n\nexport function getHourlyForecastByLatLon({\n  latitude,\n  longitude,\n  offset = 0,\n  units = 'english',\n  verbose = DEFAULT_VERBOSE,\n  refresh = false,\n}: {\n  latitude: number,\n  longitude: number,\n  offset?: number,\n  units?: 'english' | 'metric',\n  verbose?: boolean,\n  refresh?: boolean,\n}) {\n  return dispatch => {\n    const apiConfig: StandardApiConfigT = dispatch(getStandardApiConfig());\n    const { FORECAST_API_URL, authId, secret, stdParameters } = apiConfig;\n    return dispatch(\n      dataLayer.actions.getHourlyForecastByLatLon(\n        `${latitude},${longitude}`,\n        'LatitudeLongitude',\n        offset,\n        units,\n        FORECAST_API_URL,\n        authId,\n        secret,\n        stdParameters,\n        verbose,\n        refresh,\n      ),\n    );\n  };\n}\n","// @flow\n\nconst scaleNum = 8;\n\nexport function _scale(num: number): number {\n  return num * scaleNum;\n}\n\nexport function space(input: number | Array<number>): string {\n  if (typeof input === 'number') {\n    return `${_scale(input)}px`;\n  } else {\n    return arrSpace(input);\n  }\n}\n\nexport function arrSpace(arr: Array<number>): string {\n  return arr.map(space).join(' ');\n}\n","// @flow\n\nimport styled, { css } from 'styled-components';\nimport { space } from './Spacing';\n\ntype Props = {\n  margin?: number | string,\n  marginTop?: number,\n  marginRight?: number,\n  marginBottom?: number,\n  marginLeft?: number,\n\n  padding?: number,\n  paddingTop?: number,\n  paddingRight?: number,\n  paddingBottom?: number,\n  paddingLeft?: number,\n\n  position?: string,\n  flex?: number,\n  flexDirection?: string,\n  display?: string,\n  alignItems?: string,\n  justifyContent?: string,\n  justifySelf?: string,\n  alignSelf?: string,\n  fontSize?: number | string,\n  flexGrow?: number,\n\n  width?: number | string,\n  height?: number | string,\n};\n\nconst getProperty = function (propName: string, cssName: string) {\n  return (props: Props) => {\n    return propName in props && `${cssName}: ${props[propName]};`;\n  };\n};\nconst getSpaceProperty = function (propName: string, cssName: string) {\n  return (props: Props) => {\n    return typeof props[propName] === 'number' && `${cssName}: ${space(props[propName])};`;\n  };\n};\nconst getSizeProperty = function (name: string) {\n  return (props: Props) => {\n    if (typeof props[name] === 'number') {\n      return `${name}: ${props[name]}px;`;\n    } else {\n      return `${name}: ${props[name]}`;\n    }\n  };\n};\n\nexport const Box = styled.div`\n  ${getProperty('position', 'position')}\n  ${getProperty('display', 'display')}\n  ${getProperty('alignItems', 'align-items')}\n  ${getProperty('flexDirection', 'flex-direction')}\n  ${getProperty('justifyContent', 'justify-content')}\n  ${getProperty('justifySelf', 'justify-self')}\n  ${getProperty('alignSelf', 'align-self')}\n  ${getProperty('flexGrow', 'flex-grow')}\n  ${getSizeProperty('width')}\n  ${getSizeProperty('height')}\n  ${getProperty('fontSize', 'font-size')}\n\n  ${({ flex }) =>\n    flex &&\n    css`\n      flex: ${flex} 1 auto;\n    `}\n\n  ${getProperty('margin', 'margin')}\n  ${getSpaceProperty('marginTop', 'margin-top')}\n  ${getSpaceProperty('marginRight', 'margin-right')}\n  ${getSpaceProperty('marginBottom', 'margin-bottom')}\n  ${getSpaceProperty('marginLeft', 'margin-left')}\n\n  ${getSpaceProperty('padding', 'padding')}\n  ${getSpaceProperty('paddingTop', 'padding-top')}\n  ${getSpaceProperty('paddingRight', 'padding-right')}\n  ${getSpaceProperty('paddingBottom', 'padding-bottom')}\n  ${getSpaceProperty('paddingLeft', 'padding-left')}\n`;\n","// @flow\n\nimport { Component } from 'react';\nimport { connect } from 'react-redux';\n\ntype Props = {\n  value: ?number,\n  children?: ({ temperature: string, unit: string }) => React$Node,\n  temperatureUnit: 'metric' | 'english',\n  display: 'withUnit' | 'numberOnly', // default is 'withDegrees'\n};\n\nfunction getTemperatureDisplayUnit(temperatureUnit: 'metric' | 'english'): 'F' | 'C' {\n  if (temperatureUnit === 'english') {\n    return 'F';\n  }\n  if (temperatureUnit === 'metric') {\n    return 'C';\n  }\n  throw new Error('Invalid temperatureUnit');\n}\n\nfunction getTemperatureLabel(value: ?number): string {\n  return typeof value === 'number' ? Math.round(value) : '' + value;\n}\nclass _TemperatureLabel extends Component<Props> {\n  render() {\n    const { children, value, display, temperatureUnit } = this.props;\n\n    const temperature = getTemperatureLabel(value);\n    const unit = getTemperatureDisplayUnit(temperatureUnit);\n    const degree = '';\n    if (typeof children === 'function') {\n      return children({ temperature, degree, unit });\n    } else {\n      if (display === 'withUnit') {\n        return `${temperature}${degree}${unit}`;\n      } else if (display === 'numberOnly') {\n        return `${temperature}`;\n      } else {\n        return `${temperature}${degree}`;\n      }\n    }\n  }\n}\n\nconst select = store => {\n  const { userConfig } = store;\n  return {\n    temperatureUnit: userConfig.temperatureUnit,\n  };\n};\n\nexport const TemperatureLabel = connect(select)(_TemperatureLabel);\n","import React from 'react';\nimport styled from 'styled-components';\nimport { connect } from 'react-redux';\nimport { bindActionCreators } from 'redux';\n\nimport { WeatherIcon } from '../shared/WeatherIcon';\nimport { MONTHS } from '../../common/utilities/date';\nimport { Title1, Title2, Text2 } from '../shared/Typography';\nimport { getHourlyForecastByLatLon } from '../../common/actions/forecastAction';\nimport type { State as UserConfigState } from '../../common/reducers/userConfigReducer';\nimport { Box } from '../shared/Box';\nimport { TemperatureLabel } from '../shared/TemperatureLabel';\nimport { LoadingSpinner } from '../shared/LoadingSpinner';\n\ntype Props = {\n  match: Match,\n  history: History,\n  locationName: ?string,\n  // dispatch: Dispatch,\n  loading: boolean,\n  getHourlyForecastByLatLon: typeof getHourlyForecastByLatLon,\n  nowForecast: ?{\n    temperature: number,\n    high: ?number,\n    low: ?number,\n    summary: ?string,\n    iconCode: ?number,\n  },\n  temperatureUnit: $PropertyType<UserConfigState, 'temperatureUnit'>,\n  observationDate: ?Date,\n};\n\nfunction getFormattedTime(date: Date) {\n  return `${formatHour(date.getHours())}:${formatMinutes(date.getMinutes())} ${getAmOrPm(\n    date.getHours(),\n  )}`;\n}\n\nfunction formatMinutes(rawMinutesNum: number): string {\n  return (rawMinutesNum <= 9 ? '0' : '') + rawMinutesNum;\n}\n\nfunction formatHour(rawHourNum: number) {\n  return rawHourNum % 12 === 0 ? 12 : rawHourNum % 12;\n}\n\nfunction getAmOrPm(rawHourNum: number) {\n  return rawHourNum < 12 ? 'AM' : 'PM';\n}\n\nconst NowViewBare = ({ nowForecast, observationDate, locationName, className }: Props) => {\n  const currentDate =\n    observationDate &&\n    `${\n      MONTHS[observationDate.getMonth()]\n    } ${observationDate.getDate()}, ${observationDate.getFullYear()}`;\n  const currentTime = observationDate && getFormattedTime(observationDate);\n\n  if (!nowForecast) {\n    return (\n      <Container className={className}>\n        <Box display=\"flex\" alignItems=\"center\" justifyContent=\"center\" height=\"100%\">\n          <LoadingSpinner />\n        </Box>\n      </Container>\n    );\n  }\n\n  return (\n    <Container className={className}>\n      <Box marginBottom={2}>\n        <Title2>{locationName}</Title2>\n      </Box>\n\n      <Box marginBottom={3} display=\"flex\" flexDirection=\"row\">\n        <Box marginRight={3}>\n          <Text2>{currentDate}</Text2>\n        </Box>\n        <Text2>{currentTime}</Text2>\n      </Box>\n\n      <Box display=\"flex\" flexDirection=\"row\">\n        <Box flex={1}>\n          <DisplayContainer>\n            <TemperatureLabel value={nowForecast.temperature}>\n              {({ temperature, degree, unit }) => (\n                <Title1>\n                  {temperature}\n                  <span\n                    style={{ fontSize: 28, verticalAlign: 'top', position: 'relative', top: 8 }}\n                  >\n                    {degree}\n                    {unit}\n                  </span>\n                </Title1>\n              )}\n            </TemperatureLabel>\n          </DisplayContainer>\n\n          <Box>\n            {typeof nowForecast.feelsLike === 'number' && (\n              <Box marginBottom={0.5}>\n                <Text2>\n                  Feels like <TemperatureLabel value={nowForecast.feelsLike} />\n                </Text2>\n              </Box>\n            )}\n\n            <Text2>\n              Hi{' '}\n              <TemperatureLabel\n                value={typeof nowForecast.high === 'number' ? nowForecast.high : '--'}\n              />{' '}\n              | Lo{' '}\n              <TemperatureLabel\n                value={typeof nowForecast.low === 'number' ? nowForecast.low : '--'}\n              />\n            </Text2>\n          </Box>\n        </Box>\n\n        <Box display=\"flex\" flexDirection=\"column\" flex={1} alignItems=\"center\">\n          <DisplayContainer>\n            <IconContainer>\n              <WeatherIcon size=\"small\" iconCode={nowForecast.iconCode}>\n                {({ src }) => <IconImg alt={nowForecast.iconCode} src={src} />}\n              </WeatherIcon>\n            </IconContainer>\n          </DisplayContainer>\n          <Text2>{nowForecast.iconDescription}</Text2>\n        </Box>\n      </Box>\n    </Container>\n  );\n};\n\nconst Container = styled.div`\n  width: 100%;\n  max-width: 376px;\n  margin: 0 auto;\n`;\n\nconst IconImg = styled.img`\n  width: 100%;\n`;\n\nconst DisplayContainer = styled.div`\n  width: 104px;\n  height: 104px;\n`;\n\nconst IconContainer = styled.div`\n  border-radius: 100%;\n  overflow: hidden;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n`;\n\nconst select = store => {\n  const { forecast, currentStationObs, locationDetails } = store;\n  const hourlyForecast = (forecast && forecast.hourly) || undefined;\n\n  const { observation: nowObservation, highLow: nowHighLow } =\n    (currentStationObs && currentStationObs.currentStationObs) || {};\n  const nowHourlyForecast =\n    (hourlyForecast &&\n      hourlyForecast.hourlyForecastPeriod &&\n      hourlyForecast.hourlyForecastPeriod[0]) ||\n    undefined;\n  const nowForecast =\n    nowObservation && nowHourlyForecast\n      ? {\n          temperature: Math.round(nowObservation.temperature),\n          high: nowHighLow ? Math.round(nowHighLow.temperatureHigh) : undefined,\n          low: nowHighLow ? Math.round(nowHighLow.temperatureLow) : undefined,\n          feelsLike: nowObservation.feelsLike,\n          summary: nowHourlyForecast.summaryDescription || undefined,\n          iconCode: nowObservation.iconCode || undefined,\n          iconDescription: nowObservation.iconDescription || undefined,\n        }\n      : undefined;\n\n  return {\n    nowForecast,\n    locationName:\n      locationDetails &&\n      locationDetails.locationDetails &&\n      locationDetails.locationDetails.displayCompositeName,\n    observationDate:\n      (nowObservation && new Date(nowObservation.observationTimeAdjustedLocalStr)) || undefined,\n  };\n};\n\nfunction mapActions(dispatch) {\n  return bindActionCreators(\n    {\n      getHourlyForecastByLatLon,\n    },\n    dispatch,\n  );\n}\n\nexport const NowView = styled(\n  connect(\n    select,\n    mapActions,\n  )(NowViewBare),\n)``;\n","/* @flow */\n\nimport React, { Component } from 'react';\nimport styled from 'styled-components';\n\nimport { WeatherIcon } from '../shared/WeatherIcon';\nimport { Text1, Text2, Text3 } from '../shared/Typography';\nimport { Box } from '../shared/Box';\n\nimport { MONTHS } from '../../common/utilities/date';\nimport { TemperatureLabel } from '../shared/TemperatureLabel';\n\ntype Props = {\n  dayForecast: ?{\n    summaryDescription: string,\n    temperature: number,\n    forecastDateLocalStr: string,\n    iconCode: number,\n  },\n  nightForecast: ?{\n    summaryDescription: string,\n    temperature: number,\n    forecastDateLocalStr: string,\n    iconCode: number,\n  },\n};\nexport class DailyWeatherColumn extends Component<Props> {\n  render() {\n    const { dayForecast, nightForecast } = this.props;\n    const date = new Date((dayForecast || nightForecast).forecastDateLocalStr);\n    const dateStr = `${MONTHS[date.getMonth()]} ${date.getDate()}`;\n    return (\n      <DailyItemBox>\n        <Box padding={1} display=\"flex\" justifyContent=\"center\">\n          <Text2>{dateStr}</Text2>\n        </Box>\n\n        {dayForecast && (\n          <DayContainer>\n            <Box marginBottom={0.5}>\n              <Text1>\n                <TemperatureLabel value={dayForecast.temperature} />\n              </Text1>\n            </Box>\n\n            <IconContainer>\n              <WeatherIcon size=\"small\" iconCode={dayForecast.iconCode}>\n                {({ src }) => <IconImg src={src} />}\n              </WeatherIcon>\n            </IconContainer>\n\n            <DescriptionContainer>\n              <Text3 lineClamp={2}>{dayForecast.summaryDescription}</Text3>\n            </DescriptionContainer>\n          </DayContainer>\n        )}\n\n        <NightContainerExpander>\n          <NightContainer top={dayForecast ? 0 : -3}>\n            <Box marginBottom={0.5}>\n              <Text1>\n                {nightForecast && <TemperatureLabel value={nightForecast.temperature} />}\n              </Text1>\n            </Box>\n\n            <IconContainer>\n              {nightForecast && (\n                <WeatherIcon size=\"small\" iconCode={nightForecast.iconCode}>\n                  {({ src }) => <IconImg src={src} />}\n                </WeatherIcon>\n              )}\n            </IconContainer>\n\n            <DescriptionContainer>\n              {nightForecast && <Text3 lineClamp={2}>{nightForecast.summaryDescription}</Text3>}\n            </DescriptionContainer>\n          </NightContainer>\n        </NightContainerExpander>\n      </DailyItemBox>\n    );\n  }\n}\n\nconst DailyItemBox = styled.div`\n  width: 120px;\n  background-color: rgba(0, 0, 0, 0.4);\n  border: 1px solid rgba(255, 255, 255, 0.1);\n  flex-shrink: 0;\n  height: 350px;\n  display: flex;\n  flex-direction: column;\n`;\n\nconst DayContainer = styled.div`\n  padding: 8px;\n  padding-top: 0;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  text-align: center;\n  height: 155px;\n`;\n\nconst NightContainerExpander = styled.div`\n  flex: 1;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  background-color: rgba(0, 0, 0, 0.4);\n  padding: 8px;\n`;\n\nconst NightContainer = styled.div`\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  text-align: center;\n  height: 135px;\n  position: relative;\n  ${props => ('top' in props ? `top: ${props.top}px;` : '')}\n`;\n\nconst DescriptionContainer = styled.div`\n  // this exact height allows for 2 lines of text\n  // while keeping the icon images aligned\n  height: 34px;\n  display: flex;\n  align-items: center;\n`;\n\nconst IconImg = styled.img`\n  width: 100%;\n`;\n\nconst IconContainer = styled.div`\n  width: 64px;\n  /* height: 64px; */\n  border-radius: 100%;\n  overflow: hidden;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  flex-shrink: 0;\n  flex-grow: 1;\n`;\n\nexport const EmptyDailyColumn = function() {\n  return (\n    <DailyItemBox>\n      <DayContainer />\n      <NightContainer />\n    </DailyItemBox>\n  );\n};\n","// @flow\n\nimport React from 'react';\nimport styled from 'styled-components';\n\nimport ChevronLeft from '../../generated-svg-components/ChevronLeft.js';\nimport ChevronRight from '../../generated-svg-components/ChevronRight.js';\nimport Search from '../../generated-svg-components/Search.js';\nimport WarningEmpty from '../../generated-svg-components/WarningEmpty.js';\nimport ArrowRight from '../../generated-svg-components/ArrowRight.js';\n\nconst IconComponents = {\n  ChevronLeft,\n  ChevronRight,\n  Search,\n  WarningEmpty,\n  ArrowRight,\n};\n\ntype Props = {\n  name: $Keys<typeof IconComponents>,\n  size?: number,\n  color?: string,\n  className?: any,\n};\nexport const Icon = styled(({ size, name, className }: Props) => {\n  const Component = IconComponents[name];\n  return <Component className={className} viewBox=\"0 0 24 24\" width={size} height={size} />;\n})`\n  & > path {\n    fill: ${(props: Props) => props.color || '#888888'};\n  }\n`;\n","import React from 'react';\n\nconst SvgChevronLeft = props => (\n  <svg width={24} height={24} {...props}>\n    <path\n      fill=\"#000\"\n      d=\"M15.833 2.881L6.773 12l9.06 9.119-.876.881L5 12l9.957-10z\"\n      fillRule=\"evenodd\"\n    />\n  </svg>\n);\n\nexport default SvgChevronLeft;\n","import React from 'react';\n\nconst SvgChevronRight = props => (\n  <svg width={24} height={24} {...props}>\n    <path\n      fill=\"#000\"\n      d=\"M8.17 2.881L17.23 12l-9.06 9.119.877.881 9.956-10L9.047 2z\"\n      fillRule=\"evenodd\"\n    />\n  </svg>\n);\n\nexport default SvgChevronRight;\n","import React from 'react';\n\nconst SvgSearch = props => (\n  <svg width={24} height={24} {...props}>\n    <path\n      d=\"M15.39 14.579h.904L22 20.296 20.296 22l-5.717-5.706v-.903l-.31-.32a7.4 7.4 0 0 1-4.836 1.795 7.433 7.433 0 1 1 7.433-7.433 7.4 7.4 0 0 1-1.796 4.837l.32.309zM4.288 9.433a5.139 5.139 0 0 0 5.146 5.146 5.139 5.139 0 0 0 5.146-5.146 5.139 5.139 0 0 0-5.146-5.146 5.139 5.139 0 0 0-5.146 5.146z\"\n      fill=\"#000\"\n      fillRule=\"evenodd\"\n    />\n  </svg>\n);\n\nexport default SvgSearch;\n","import React from 'react';\n\nconst SvgWarningEmpty = props => (\n  <svg width={24} height={24} {...props}>\n    <path\n      d=\"M10.856 4.711l-8.71 13.612c-.19.33-.195.954-.014 1.29.18.335.52.72.886.72h17.963c.371 0 .713-.36.892-.702.179-.337.169-.903-.03-1.23L13.16 4.711c-.308-.514-.545-1.044-1.159-1.044s-.824.52-1.144 1.044z\"\n      fill=\"#000\"\n      fillRule=\"evenodd\"\n    />\n  </svg>\n);\n\nexport default SvgWarningEmpty;\n","import React from 'react';\n\nconst SvgArrowRight = props => (\n  <svg width={24} height={24} {...props}>\n    <path\n      fill=\"#000\"\n      fillRule=\"nonzero\"\n      d=\"M3 11.016v1.968h14.156l-3.562 3.61L15 18l6-6-6-6-1.406 1.406 3.562 3.61z\"\n    />\n  </svg>\n);\n\nexport default SvgArrowRight;\n","import React, { useState, useRef } from 'react';\nimport styled from 'styled-components';\nimport Measure from 'react-measure';\nimport { clamp } from 'lodash';\n\nimport { Box } from './Box';\nimport { Icon } from './Icon';\n\ntype Props = {\n  header: React.ReactNode,\n  children: React.ReactNode,\n};\nexport const Carousel = function(props: Props) {\n  const { header, children } = props;\n  const [childSize, setChildSize] = useState(null);\n  const [isMouseDown, setIsMouseDown] = useState(false);\n  const [draggableState, setDraggableState] = useState(null);\n  \n  // translateX drives view logic (enable / disable buttons), it may not be the exact scroll position\n  const [translateX, setStateTranslateX] = useState(0);\n  const scrollableEl = useRef(null);\n\n  function setTranslateX(position: number, animated = false) {\n    if (animated) {\n      scrollableEl.current.scrollTo({\n        left: position,\n        behavior: 'smooth',\n      });\n      // When scroll is animated, the state translateX is updated via onScroll callback\n    } else {\n      scrollableEl.current.scrollLeft = position;\n      setStateTranslateX(position);\n    }\n  }\n\n  function getMaxTranslate(containerBounds) {\n    if (!childSize) {\n      return 0;\n    }\n    return childSize.width - containerBounds.width;\n  }\n\n  function getExactTranslate() {\n    if (scrollableEl.current) {\n      return scrollableEl.current.scrollLeft;\n    } else {\n      return translateX;\n    }\n  }\n\n  return (\n    <Measure>\n      {({ measureRef: containerRef, contentRect: containerContentRect }) => {\n        const viewportSize = containerContentRect.entry.width;\n        const maxTranslate = getMaxTranslate(containerContentRect.entry);\n        const minTranslate = 0;\n        const canGoNextPage = translateX < maxTranslate;\n        const canGoPrevPage = translateX > minTranslate;\n        const hideNavButtons = !canGoNextPage && !canGoPrevPage;\n\n        function clampTranslate(translate: number) {\n          return clamp(translate, minTranslate, maxTranslate);\n        }\n        function nextPage() {\n          const newTranslate = clampTranslate(getExactTranslate() + viewportSize);\n          setTranslateX(newTranslate, true);\n        }\n\n        function prevPage() {\n          const newTranslate = clampTranslate(getExactTranslate() - viewportSize);\n          setTranslateX(newTranslate, true);\n        }\n\n        function onMouseDown(e) {\n          setIsMouseDown(true);\n          setDraggableState({\n            translateStart: getExactTranslate(),\n            dragStart: e.pageX,\n          });\n        }\n\n        function onMouseUp() {\n          setIsMouseDown(false);\n          setDraggableState(null);\n        }\n\n        // TODO - debounce this by 10-50ms?\n        function onMouseMove(e) {\n          if (isMouseDown && draggableState !== null) {\n            const dragCurrent = e.pageX;\n            const deltaX = draggableState.dragStart - dragCurrent;\n            const newPosition = draggableState.translateStart + deltaX;\n            setTranslateX(clampTranslate(newPosition), false);\n          }\n        }\n\n        function onScroll(e) {\n          if (!isMouseDown) {\n            setStateTranslateX(e.target.scrollLeft);\n          }\n        }\n\n        return (\n          <Container ref={containerRef}>\n            <Box display=\"flex\" flexDirection=\"row\" marginBottom={1}>\n              <Box flex={1}>{header}</Box>\n              {!hideNavButtons && (\n                <PageButtonContainer>\n                  <PageButton onClick={() => prevPage()} isDisabled={!canGoPrevPage}>\n                    <Icon name=\"ChevronLeft\" color=\"white\" size={16} />\n                  </PageButton>\n                  <PageButton onClick={() => nextPage()} isDisabled={!canGoNextPage}>\n                    <Icon name=\"ChevronRight\" color=\"white\" size={16} />\n                  </PageButton>\n                </PageButtonContainer>\n              )}\n            </Box>\n\n            <Measure\n              onResize={({ entry }) => {\n                setChildSize(entry);\n              }}\n            >\n              {({ measureRef }) => (\n                <ScrollableContainer\n                  ref={scrollableEl}\n                  onMouseDown={onMouseDown}\n                  onMouseUp={onMouseUp}\n                  onMouseMove={onMouseMove}\n                  onScroll={onScroll}\n                >\n                  <Box ref={measureRef} display=\"inline-flex\" flexDirection=\"row\">\n                    {children}\n                  </Box>\n                </ScrollableContainer>\n              )}\n            </Measure>\n          </Container>\n        );\n      }}\n    </Measure>\n  );\n};\n\nconst Container = styled.div`\n  width: 100%;\n  overflow: hidden;\n`;\n\nconst ScrollableContainer = styled.div`\n  overflow-x: scroll;\n  overflow-y: hidden;\n  ::-webkit-scrollbar {\n    width: 0 !important;\n  }\n  cursor: grab;\n  :active {\n    cursor: grabbing;\n  }\n  & > ${Box} * {\n    user-select: none;\n  }\n`;\n\nconst PageButton = styled.div`\n  opacity: ${props => (props.isDisabled ? 0.4 : 1)};\n  user-select: none;\n  border-radius: 50%;\n  width: 24px;\n  height: 24px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  background-color: rgb(0, 0, 0, 0.4);\n  border: 1px solid rgba(255, 255, 255, 0.1);\n  &:hover {\n    cursor: pointer;\n  }\n`;\n\nconst PageButtonContainer = styled.div`\n  display: flex;\n  flex-direction: row;\n  & > ${PageButton}:not(:last-child) {\n    margin-right: 4px;\n  }\n`;\n","import React from 'react';\nimport _ from 'lodash';\nimport { connect } from 'react-redux';\nimport { bindActionCreators } from 'redux';\n\nimport { DailyWeatherColumn, EmptyDailyColumn } from './DailyWeatherColumn';\n\nimport { Title3 } from '../shared/Typography';\nimport { Carousel } from '../shared/Carousel';\n\ntype Props = {\n  match: Match,\n  history: History,\n  location: Location,\n  // dispatch: Dispatch,\n  loading: boolean,\n  dailyEntries: Array<{\n    high: ?number,\n    low: ?number,\n    summary: string,\n    iconCode: number,\n    forecastDateLocalStr: string,\n  }>,\n};\n\nconst DailyViewBare = ({ dailyEntries }: Props) => {\n  return (\n    <Carousel header={<Title3>10 DAY</Title3>}>\n      {dailyEntries.length === 0 &&\n        _.times(10, i => {\n          return <EmptyDailyColumn key={i} />;\n        })}\n      {dailyEntries.map(entry => {\n        const key = (entry.dayForecast || entry.nightForecast).forecastDateLocalStr;\n        return (\n          <DailyWeatherColumn\n            key={key}\n            dayForecast={entry.dayForecast}\n            nightForecast={entry.nightForecast}\n          />\n        );\n      })}\n    </Carousel>\n  );\n};\n\nconst select = store => {\n  const { forecast } = store;\n\n  const dailyForecast = (forecast && forecast.daily) || undefined;\n  const today = new Date();\n  today.setUTCHours(0, 0, 0, 0);\n\n  const forecastsByDay = _.groupBy(\n    (dailyForecast && dailyForecast.dailyForecastPeriods) || [],\n    forecastEntry => {\n      const hour = new Date(forecastEntry.forecastDateLocalStr);\n      hour.setUTCHours(0, 0, 0, 0);\n      return (hour.getTime() - today.getTime()) / (1000 * 60 * 60 * 24);\n    },\n  );\n\n  const dailyEntries = _.mapValues(forecastsByDay, forecastPair => {\n    let dayForecast = undefined;\n    let nightForecast = undefined;\n\n    if (forecastPair.length >= 2) {\n      dayForecast = forecastPair[0];\n      nightForecast = forecastPair[1];\n    } else {\n      const singleForecast = forecastPair[0];\n      if (singleForecast) {\n        const singleDate = new Date(singleForecast.forecastDateLocalStr);\n        if (singleDate.getHours() <= 12) {\n          dayForecast = singleForecast;\n        } else {\n          nightForecast = singleForecast;\n        }\n      }\n    }\n    return {\n      dayForecast,\n      nightForecast,\n    };\n  });\n\n  const dailyEntriesArray = _.keys(dailyEntries).reduce((arr, dayOffset) => {\n    arr[parseInt(dayOffset, 10)] = dailyEntries[dayOffset];\n    return arr;\n  }, []);\n\n  return {\n    dailyEntries: dailyEntriesArray,\n  };\n};\n\nfunction mapActions(dispatch) {\n  return bindActionCreators({}, dispatch);\n}\n\nexport const DailyView = connect(\n  select,\n  mapActions,\n)(DailyViewBare);\n","// @flow\nimport { dataLayer } from '@weatherbug/common';\n\nimport {\n  getStandardApiConfig,\n  type StandardApiConfigT,\n} from '../../common/config/getStandardApiConfig';\n\nconst DEFAULT_VERBOSE = true;\n\ntype Datestring = string;\ntype float = number;\n\n// eslint-disable-next-line no-unused-vars\ntype CurrentStationPayload = {\n  highLow: {\n    humidityHigh: float,\n    humidityHighLocalStr: Datestring,\n    humidityHighQc: null,\n    humidityHighUtcStr: Datestring,\n    humidityLow: float,\n    humidityLowLocalStr: Datestring,\n    humidityLowQc: null,\n    humidityLowUtcStr: Datestring,\n    pressureSeaLevelHigh: float,\n    pressureSeaLevelHighLocalStr: Datestring,\n    pressureSeaLevelHighQc: null,\n    pressureSeaLevelHighUtcStr: Datestring,\n    pressureSeaLevelLow: float,\n    pressureSeaLevelLowLocalStr: Datestring,\n    pressureSeaLevelLowQc: null,\n    pressureSeaLevelLowUtcStr: Datestring,\n    rainRateMax: float,\n    rainRateMaxLocalStr: Datestring,\n    rainRateMaxQc: null,\n    rainRateMaxUtcStr: Datestring,\n    temperatureHigh: float,\n    temperatureHighLocalStr: Datestring,\n    temperatureHighQc: null,\n    temperatureHighUtcStr: Datestring,\n    temperatureLow: number,\n    temperatureLowLocalStr: Datestring,\n    temperatureLowQc: null,\n    temperatureLowUtcStr: Datestring,\n  },\n  observation: {\n    altimeter: null,\n    altimeterQc: null,\n    altimeterRate: null,\n    altimeterRateQc: null,\n    dewPoint: float,\n    dewPointQc: null,\n    dewPointRate: null,\n    dewPointRateQc: null,\n    feelsLike: float,\n    heatIndex: float,\n    heatIndexQc: null,\n    humidity: float,\n    humidityQc: null,\n    humidityRate: number,\n    humidityRateQc: null,\n    iconCode: number,\n    iconDescription: string,\n    key: string,\n    observationTimeAdjustedLocalStr: Datestring,\n    observationTimeLocalStr: Datestring,\n    observationTimeUtcStr: Datestring,\n    pressureSeaLevel: float,\n    pressureSeaLevelQc: null,\n    pressureSeaLevelRate: float,\n    pressureSeaLevelRateQc: null,\n    providerId: number,\n    rainDaily: float,\n    rainDailyQc: null,\n    rainMonthly: float,\n    rainMonthlyQc: null,\n    rainRate: number,\n    rainRateQc: null,\n    rainYearly: float,\n    rainYearlyQc: null,\n    snowDaily: null,\n    snowDailyQc: null,\n    snowMonthly: null,\n    snowMonthlyQc: null,\n    snowRate: null,\n    snowRateQc: null,\n    snowYearly: null,\n    snowYearlyQc: null,\n    stationId: 'WSHDD',\n    temperature: float,\n    temperatureQc: null,\n    temperatureRate: float,\n    temperatureRateQc: null,\n    visibility: null,\n    visibilityQc: null,\n    visibilityRate: null,\n    visibilityRateQc: null,\n    wetBulbTemperature: float,\n    windChill: float,\n    windChillQc: null,\n    windDirection: number,\n    windDirectionAvg: number,\n    windDirectionAvgQc: null,\n    windDirectionQc: null,\n    windGustDaily: float,\n    windGustDailyQc: null,\n    windGustDirectionDaily: number,\n    windGustDirectionDailyQc: null,\n    windGustDirectionHourly: number,\n    windGustDirectionHourlyQc: null,\n    windGustHourly: float,\n    windGustHourlyQc: null,\n    windGustTimeLocalDailyStr: Datestring,\n    windGustTimeLocalHourlyStr: Datestring,\n    windGustTimeUtcDailyStr: Datestring,\n    windGustTimeUtcHourlyStr: Datestring,\n    windSpeed: float,\n    windSpeedAvg: float,\n    windSpeedAvgQc: null,\n    windSpeedQc: null,\n  },\n  responseTime: number,\n  station: {\n    displayFlag: number,\n    distance: float,\n    elevationAboveSeaLevel: float,\n    latitude: float,\n    longitude: float,\n    providerId: number,\n    providerName: 'Earth Networks Inc',\n    stationId: 'WSHDD',\n    stationName: 'Howard University',\n  },\n};\nexport function getCurrentStationObsByLatLon({\n  latitude,\n  longitude,\n  offset = 0,\n  units = 'english',\n  verbose = DEFAULT_VERBOSE,\n  refresh = false,\n}: {\n  latitude: number,\n  longitude: number,\n  offset?: number,\n  units?: 'english' | 'metric',\n  verbose?: boolean,\n  refresh?: boolean,\n}) {\n  return dispatch => {\n    const apiConfig: StandardApiConfigT = dispatch(getStandardApiConfig());\n    const { OBSERVATIONS_API_URL, authId, secret, stdParameters } = apiConfig;\n    return dispatch(\n      dataLayer.actions.getCurrentStationObsByLatLon(\n        `${latitude},${longitude}`,\n        'LatitudeLongitude',\n        offset,\n        units,\n        OBSERVATIONS_API_URL,\n        authId,\n        secret,\n        stdParameters,\n        verbose,\n        refresh,\n      ),\n    );\n  };\n}\n","// @flow\n\nimport { dataLayer } from '@weatherbug/common';\n\nimport {\n  getStandardApiConfig,\n  type StandardApiConfigT,\n} from '../../common/config/getStandardApiConfig';\n\nconst DEFAULT_VERBOSE = true;\n\ntype float = number;\n\nexport type LocationDetailsPayload = {\n  CityId: string,\n  CityName: string,\n  Country: string, // \"US\"\n  Dma: string,\n  Latitude: float,\n  Longitude: float,\n  SlugName: string,\n  StateCode: null,\n  Territory: null,\n  Zip: string,\n  responseTime: number,\n};\n\nexport function getLocationDetailsByLatLon({\n  latitude,\n  longitude,\n  offset = 0,\n  units = 'english',\n  verbose = DEFAULT_VERBOSE,\n  refresh = false,\n}: {\n  latitude: number,\n  longitude: number,\n  offset?: number,\n  units?: 'english' | 'metric',\n  verbose?: boolean,\n  refresh?: boolean,\n}) {\n  return dispatch => {\n    const apiConfig: StandardApiConfigT = dispatch(getStandardApiConfig());\n    const { LOCATIONS_API_URL, authId, secret, stdParameters } = apiConfig;\n    return dispatch(\n      dataLayer.actions.getLocationDetailsByLatLon(\n        latitude,\n        longitude,\n        LOCATIONS_API_URL,\n        authId,\n        secret,\n        stdParameters,\n        verbose,\n        refresh,\n      ),\n    );\n  };\n}\n","// @flow\n\nimport { dataLayer } from '@weatherbug/common';\n\nimport {\n  getStandardApiConfig,\n  getMapApiConfig,\n  type StandardApiConfigT,\n} from '../../common/config/getStandardApiConfig';\n\nimport {\n  getAppId,\n  getAppVersion,\n  getSuggestedAppInstanceId,\n} from '../../modules/main/AppRegistration';\nimport { AppStateManager } from '../../common/utilities/appStateManager';\n\nconst DEFAULT_VERBOSE = true;\n\nexport type GetAlertsByLatLonPayload = {\n  alertList: Array<mixed>, // []\n  location: string, // \"38.8702,-77.0823\",\n  locationType: 'latitudelongitude', // \"latitudelongitude\"\n  responseTime: number, // 1555598726521\n};\n\nexport function getAlertsByLatLon({\n  latitude,\n  longitude,\n  verbose = DEFAULT_VERBOSE,\n  refresh = false,\n}: {\n  latitude: number,\n  longitude: number,\n  verbose?: boolean,\n  refresh?: boolean,\n}) {\n  return dispatch => {\n    const apiConfig: StandardApiConfigT = dispatch(getStandardApiConfig());\n    const { ALERTS_API_URL, authId, secret, stdParameters } = apiConfig;\n\n    return dispatch(\n      dataLayer.actions.getV1AlertsByLatLon(\n        latitude,\n        longitude,\n        ALERTS_API_URL,\n        authId,\n        secret,\n        stdParameters,\n        verbose,\n        refresh,\n        getSuggestedAppInstanceId(),\n        null, //emLocationId\n        AppStateManager._getOs(),\n        AppStateManager._getOsVersion() || 'unknown',\n        getAppId(),\n        getAppVersion(),\n        AppStateManager._getUserLocale(),\n      ),\n    );\n  };\n}\n\nexport function getAlertsLegend(latitude: number, longitude: number) {\n  return async dispatch => {\n    const apiConfig = dispatch(getMapApiConfig());\n    const { baseUrl: mapApiUrl, authId, secret, stdParameters } = apiConfig;\n    const op = new dataLayer.providers.MapProvider(mapApiUrl, authId, secret);\n    // You may or may not need this to get the defaultLayer\n    // const apiResult = await op.getMapLayers(\n    //   latitude,\n    //   longitude,\n    //   stdParameters,\n    //   'english',\n    //   'english',\n    // );\n    const defaultLayer = 'Radar.Global'; // apiResult.result.defaultLayer\n    const otherResult = await op.getMapMetadata(defaultLayer, stdParameters);\n    const timeslot = otherResult.ds.id;\n    // width, height, latitude, longitude, timeslot, mapZoomLevel, stdParameters\n    const result = await op.getAlertsLegend(\n      100,\n      100,\n      latitude,\n      longitude,\n      timeslot,\n      100,\n      stdParameters,\n    );\n    return result.Result.val;\n  };\n}\n","import {\n  getHourlyForecastByLatLon,\n  getDailyForecastByLatLon,\n} from '../../common/actions/forecastAction';\nimport { getCurrentStationObsByLatLon } from '../../common/actions/currentStationObsAction';\nimport { getLocationDetailsByLatLon } from '../../common/actions/locationDetailsAction';\nimport { getAlertsByLatLon } from '../../common/actions/alertsActions';\n\nexport function loadDataForLatLong(latitude: number, longitude: number) {\n  return dispatch => {\n    return Promise.all([\n      dispatch(\n        getHourlyForecastByLatLon({\n          latitude,\n          longitude,\n        }),\n      ),\n      dispatch(getDailyForecastByLatLon({ latitude, longitude })),\n      dispatch(\n        getCurrentStationObsByLatLon({\n          latitude,\n          longitude,\n        }),\n      ),\n      dispatch(getLocationDetailsByLatLon({ latitude, longitude })),\n      dispatch(getAlertsByLatLon({ latitude, longitude })),\n    ]);\n  };\n}\n","// @flow\n\nimport * as React from 'react';\nimport styled, { css } from 'styled-components';\n\ntype OffsetT = {\n  bottom?: number,\n  top?: number,\n  left?: number,\n  right?: number,\n};\ntype Props = {\n  anchorElement: any,\n  isOpen: boolean | null,\n  width?: number,\n  offset: OffsetT | null,\n  children: React.Node,\n  isCentered: boolean,\n};\nexport const Popover = function (props: Props) {\n  const { isOpen, anchorElement, offset, isCentered, width } = props;\n\n  return (\n    <>\n      {anchorElement}\n      <PopoverPane offset={offset} isOpen={isOpen} isCentered={isCentered} width={width}>\n        {props.children}\n      </PopoverPane>\n    </>\n  );\n};\n\nfunction getOffset(direction: 'top' | 'right', offset?: null | OffsetT) {\n  if (!offset) {\n    return null;\n  }\n\n  if (direction === 'top') {\n    if (typeof offset.bottom === 'number') {\n      return `top: calc(100% + ${offset.bottom}px);`;\n    } else if (typeof offset.top === 'number') {\n      return `top: calc(100% + ${offset.top}px);`;\n    }\n  } else if (direction === 'right') {\n    if (typeof offset.right === 'number') {\n      return `right: ${offset.right}px`;\n    } else if (typeof offset.left === 'number') {\n      return `right: ${0 - offset.left}px`;\n    }\n  }\n}\n\nexport const PopoverPane = styled.div`\n  position: absolute;\n  right: 0;\n  ${(props) =>\n    props.isCentered\n      ? css`\n      top: 0\n      left: 50%\n      margin-left: -${props.width / 2}px\n      margin-top: 100px\n      width: ${props.width}px\n    `\n      : css`\n          ${getOffset('top', props.offset) || 'right: 0;'}\n          ${getOffset('right', props.offset) || 'top: 100%;'}\n        `}\n  background-color: white;\n  z-index: 2;\n  border: 1px solid rgb(220, 220, 220);\n  border-radius: 2px;\n  ${(props) =>\n    !props.isOpen &&\n    css`\n      display: none;\n    `}\n`;\n","// @flow\n\nimport React, { Fragment } from 'react';\nimport styled, { css } from 'styled-components';\nimport OutsideClickHandler from 'react-outside-click-handler';\n\nimport { Popover, PopoverPane } from './Popover';\n\ntype Props = {\n  icon: React$Node,\n  placeholder: string,\n  isSearching: boolean,\n  onChangeSearchTerm: (searchTerm: string) => void,\n  searchResults: Array<string>,\n  onSelectResult: (result: string, index: number) => void,\n  onChangeFocus: (isFocused: boolean) => void,\n};\n\ntype State = {\n  localText: string,\n  isComponentFocused: boolean,\n  highlightResultIndex: number,\n};\nexport class SearchBar extends React.Component<Props, State> {\n  input: ?HTMLInputElement;\n\n  constructor(props: Props) {\n    super(props);\n\n    this.state = {\n      localText: '',\n      isComponentFocused: false,\n      highlightResultIndex: 0,\n    };\n  }\n\n  onChangeSearchTerm = (e: SyntheticEvent<HTMLInputElement>) => {\n    const text = e.currentTarget.value;\n    this.setState({ localText: text, highlightResultIndex: 0 });\n    this.props.onChangeSearchTerm(text);\n  };\n\n  selectResult = (result: string, index: number) => {\n    this.props.onSelectResult(result, index);\n    this.setState({\n      localText: '',\n      isComponentFocused: false,\n    });\n    this.props.onChangeSearchTerm('');\n  };\n\n  setHighlightIndex = (newHighlightIndex: number) => {\n    const { highlightResultIndex } = this.state;\n    if (newHighlightIndex !== highlightResultIndex) {\n      const result = this.props.searchResults[newHighlightIndex];\n      this.setState({\n        highlightResultIndex: newHighlightIndex,\n        localText: result,\n      });\n    }\n  };\n\n  focusNextResult = () => {\n    this.setHighlightIndex(\n      Math.min(this.state.highlightResultIndex + 1, this.props.searchResults.length - 1),\n    );\n  };\n\n  focusPrevResult = () => {\n    this.setHighlightIndex(Math.max(this.state.highlightResultIndex - 1, 0));\n  };\n\n  handleKeyDown = (e: KeyboardEvent) => {\n    if (e.keyCode === 9) {\n      // tab\n      e.preventDefault();\n      if (e.shiftKey) {\n        this.focusPrevResult();\n      } else {\n        this.focusNextResult();\n      }\n    } else if (e.keyCode === 38) {\n      // up arrow\n      e.preventDefault();\n      this.focusPrevResult();\n    } else if (e.keyCode === 40) {\n      // down arrow\n      e.preventDefault();\n      this.focusNextResult();\n    } else if (e.key === 'Enter') {\n      e.preventDefault();\n      const result = this.props.searchResults[this.state.highlightResultIndex];\n      this.selectResult(result, this.state.highlightResultIndex);\n      if (this.input) {\n        this.input.blur();\n      }\n    }\n  };\n\n  render() {\n    const { placeholder, searchResults, isSearching } = this.props;\n    const { localText, isComponentFocused, highlightResultIndex } = this.state;\n    const popoverHasContent = isSearching || searchResults.length > 0;\n    return (\n      <OutsideClickHandler\n        onOutsideClick={() => {\n          this.props.onChangeFocus(false);\n          this.setState({\n            isComponentFocused: false,\n          });\n          // Clear search after outside click?\n          this.setState({ localText: '' });\n          this.props.onChangeSearchTerm('');\n        }}\n      >\n        <Container>\n          <Popover\n            isOpen={isComponentFocused && popoverHasContent}\n            offset={{ bottom: 7 }}\n            anchorElement={\n              <AnchorContainer>\n                <StyledInput\n                  ref={r => {\n                    this.input = r;\n                  }}\n                  type=\"text\"\n                  placeholder={placeholder}\n                  value={localText}\n                  onChange={this.onChangeSearchTerm}\n                  onFocus={() => {\n                    this.setState({ isComponentFocused: true });\n                    this.props.onChangeFocus(true);\n                  }}\n                  onKeyDown={this.handleKeyDown}\n                />\n                <IconContainer>{this.props.icon}</IconContainer>\n              </AnchorContainer>\n            }\n          >\n            {/* {locationSearchIsQuerying && (\n              <Box display=\"flex\" alignItems=\"center\" padding={2}>\n                Searching...\n              </Box>\n            )} */}\n            {(searchResults || []).map((result, index) => {\n              return (\n                <Fragment key={result + index}>\n                  {index !== 0 && <RowDivider />}\n                  <SearchResult\n                    isHighlighted={highlightResultIndex === index}\n                    onClick={() => {\n                      this.selectResult(result, index);\n                    }}\n                  >\n                    {result}\n                  </SearchResult>\n                </Fragment>\n              );\n            })}\n          </Popover>\n        </Container>\n      </OutsideClickHandler>\n    );\n  }\n}\n\nconst Container = styled.div`\n  position: relative;\n  ${PopoverPane} {\n    width: 100%;\n  }\n`;\n\nconst IconContainer = styled.div`\n  position: absolute;\n  right: 0;\n  top: 0;\n  bottom: 0;\n  width: 30px;\n`;\n\nconst AnchorContainer = styled.div`\n  position: relative;\n`;\n\nconst SearchResult = styled.div`\n  color: rgb(100, 100, 100);\n  font-weight: 500;\n  padding: 16px 8px;\n  padding-left: 16px;\n  background: white;\n  transition: background 300ms ease;\n\n  &:hover {\n    cursor: pointer;\n    background: rgb(245, 245, 245);\n  }\n\n  ${props =>\n    props.isHighlighted &&\n    css`\n      color: #2e98e3;\n      box-shadow: inset 3px 0px 0px 0px #2e98e3;\n    `}\n`;\n\nconst RowDivider = styled.div`\n  margin-left: 16px;\n  height: 1px;\n  background-color: rgb(230, 230, 230);\n`;\n\nexport const StyledInput = styled.input`\n  padding: 8px;\n  padding-right: 30px; // space for icon\n  border: 0.5px solid #888888;\n  background-color: #ebebeb;\n  border-radius: 2px;\n  width: 300px;\n  font-size: 16px;\n  color: #888888;\n`;\n","// @flow\nimport React from 'react';\nimport styled from 'styled-components';\nimport { connect } from 'react-redux';\nimport { debounce } from 'lodash';\nimport { bindActionCreators } from 'redux';\n\nimport { Icon } from '../shared/Icon';\nimport { loadDataForLatLong } from '../../common/actions/appActions';\nimport { SearchBar } from '../shared/SearchBar';\nimport LocalStorage from '../shared/LocalStorage';\n\nimport {\n  searchLocationBySearchString,\n  locationSearchTextChanged,\n  searchLocationSelected,\n} from '../../common/actions/locationSearchActions';\nimport type { State as LocationSearchState } from '../../common/reducers/locationSearchReducer';\n\ntype Props = {\n  locationSearchResults: $PropertyType<LocationSearchState, 'locationSearchResults'>,\n  locationSearchIsQuerying: $PropertyType<LocationSearchState, 'locationSearchIsQuerying'>,\n  searchText: $PropertyType<LocationSearchState, 'searchText'>,\n  searchLocationSelected: typeof searchLocationSelected,\n  locationSearchTextChanged: typeof locationSearchTextChanged,\n  searchLocationBySearchString: typeof searchLocationBySearchString,\n  locationName: ?string,\n};\n\ntype State = {\n  isFocused: boolean,\n  overrideLocationName: string,\n};\nclass LocationSearchBare extends React.Component<Props, State> {\n  debouncedSearch = (text: string) => undefined;\n\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      isFocused: false,\n      overrideLocationName: '',\n    };\n\n    this.debouncedSearch = debounce(\n      (text: string) => {\n        this.runSearch(text);\n      },\n      250,\n      { leading: false, trailing: true },\n    );\n  }\n\n  runSearch = (text: string) => {\n    this.props.searchLocationBySearchString({ searchText: text });\n  };\n\n  render() {\n    const { locationName, locationSearchIsQuerying, locationSearchResults } = this.props;\n    const { isFocused, overrideLocationName } = this.state;\n    const placeholder = isFocused ? 'Search City or Zip' : overrideLocationName || locationName;\n    return (\n      <SearchBar\n        icon={\n          <IconContainer>\n            <Icon name=\"Search\" size={18} color=\"#888888\" />\n          </IconContainer>\n        }\n        placeholder={placeholder}\n        onChangeFocus={isFocused => {\n          this.setState({ isFocused });\n        }}\n        isSearching={locationSearchIsQuerying}\n        searchResults={locationSearchResults.map(entry => {\n          return (entry && entry.DisplayCompositeName) || '';\n        })}\n        onChangeSearchTerm={searchTerm => {\n          // do search with newTerm to update locations\n          this.debouncedSearch(searchTerm);\n        }}\n        onSelectResult={(result, index) => {\n          const location = locationSearchResults[index];\n          const { Latitude: latitude, Longitude: longitude } = location;\n          this.props.searchLocationSelected(location);\n          LocalStorage.setUserSelectedLocation(location);\n          // This immediately updates the location name in the bar, without having to wait for the api response.\n          this.setState({\n            isFocused: false,\n            overrideLocationName: (location && location.displayCompositeName) || '',\n          });\n          this.props.loadDataForLatLong(latitude, longitude).then(resp => {\n            this.setState({ overrideLocationName: '' });\n          });\n        }}\n      />\n    );\n  }\n}\n\nconst select = store => {\n  const {\n    locationSearch: { locationSearchResults, locationSearchIsQuerying, searchText },\n    locationDetails: { locationDetails },\n  } = store;\n  return {\n    locationSearchResults: locationSearchResults.slice(0, 5),\n    locationSearchIsQuerying,\n    searchText,\n    locationName: locationDetails && locationDetails.displayCompositeName,\n  };\n};\n\nfunction mapActions(dispatch) {\n  return bindActionCreators(\n    {\n      searchLocationBySearchString,\n      loadDataForLatLong,\n      searchLocationSelected,\n    },\n    dispatch,\n  );\n}\n\nexport const LocationSearch = connect(\n  select,\n  mapActions,\n)(LocationSearchBare);\n\nconst IconContainer = styled.div`\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  height: 100%;\n  &:hover {\n    cursor: pointer;\n  }\n`;\n","// @flow\n\nimport React from 'react';\nimport styled from 'styled-components';\nimport moment from 'moment';\n\nimport { Icon } from '../shared/Icon';\n\nexport type AlertT = {\n  AlertId: string, // \"NwsVtec:KLOT-LS.Y-0006.2019~ILZ014-INZ001-002-192215-_191404\"\n  AlertPrimaryId: string, // \"NwsVtec:KLOT-LS.Y-0006.2019\"\n  AlertProviderId: string, // \"NwsVtec\"\n  AlertSecondaryId: string, // \"ILZ014-INZ001-002-192215-_191404\"\n  AlertType: string, // \"LS.Y\"\n  AlertTypeName: string, // \"Lakeshore Flood Advisory\"\n  ExpiredDateTimeLocalString: string, // \"2019-04-20T01:00:00\"\n  ExpiredDateTimeUtcString: string, // \"2019-04-20T06:00:00\"\n  IssuedDateTimeLocalString: string, // \"2019-04-19T09:04:00\"\n  IssuedDateTimeUtcString: string, // \"2019-04-19T14:04:00\"\n  EventIssuedDateTimeUtcString: string | null, // \"2019-04-19T14:04:00\"\n  EventIssuedDateTimeLocalString: string | null, // \"2019-04-19T09:04:00\"\n  EventBeginningDateTimeUtcString: string | null,\n  EventBeginningDateTimeLocalString: string | null,\n  EventEndingDateTimeUtcString: string | null, // \"2019-04-20T06:00:00\"\n  EventEndingDateTimeLocalString: string | null, // \"2019-04-20T01:00:00\"\n  ProductExpirationDateTimeUtcString: string | null, // \"2019-04-19T22:15:00\"\n  ProductExpirationDateTimeLocalString: string | null, // \"2019-04-19T17:15:00\"\n  Message: string,\n  RawText: string,\n};\n\ntype Props = {\n  onClick?: () => void,\n  alert: AlertT,\n  theme?: ?{\n    FillColor: string,\n    LineColor: string,\n  },\n};\nexport const AlertCard = function(props: Props) {\n  const { alert, onClick } = props;\n  const startLabel = !alert.IssuedDateTimeLocalString\n    ? 'In Progress'\n    : moment(alert.IssuedDateTimeLocalString).format('ddd LT');\n  const endLabel = !alert.ExpiredDateTimeLocalString\n    ? 'TBD'\n    : moment(alert.ExpiredDateTimeLocalString).format('ddd LT');\n  const alertProviderAbbreviation = alert.AlertProviderId.slice(0, 3);\n  const theme = props.theme || { FillColor: '#CCC', LineColor: 'transparent' };\n\n  return (\n    <Container onClick={onClick}>\n      <Circle fill={theme.FillColor} stroke={theme.LineColor}>\n        {alertProviderAbbreviation}\n      </Circle>\n      <Content>\n        <Title>{alert.AlertTypeName}</Title>\n\n        <Description>\n          <span>Start: {startLabel}</span>\n          <Icon name=\"ArrowRight\" size={14} color=\"#AAAAAA\" />\n          <span>End: {endLabel}</span>\n        </Description>\n      </Content>\n    </Container>\n  );\n};\n\nconst Container = styled.div`\n  padding: 16px;\n  display: flex;\n  flex-direction: row;\n`;\nconst Circle = styled.div`\n  width: 32px;\n  height: 32px;\n  border: 1px solid transparent;\n  border-radius: 100%;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  font-size: 10px;\n  text-transform: uppercase;\n  align-self: center;\n  color: white;\n  background-color: ${props => {\n    if (props.fill === '#000000') {\n      // try to use the stroke color, otherwise transparent\n      return props.stroke === '#000000' ? 'transparent' : props.stroke;\n    } else {\n      return props.fill || '#ccc';\n    }\n  }}\n  border-color: ${props => (props.stroke === '#000000' ? 'transparent' : props.stroke || '#666')};\n`;\nconst Content = styled.div`\n  flex-grow: 1;\n  margin-left: 16px;\n`;\nexport const Title = styled.div`\n  color: #666;\n  font-size: 16px;\n  margin-bottom: 8px;\n`;\nexport const Description = styled.div`\n  font-size: 13px;\n  color: #aaaaaa;\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n  ${Icon} {\n    margin: 0 8px;\n  }\n`;\n","/* @flow */\nimport { dataLayer } from '@weatherbug/common';\n\nimport { getStandardApiConfigFromStore } from '../../common/config/getStandardApiConfig';\nimport { AppStateManager } from '../../common/utilities/appStateManager';\nimport {\n  getAppId,\n  getAppVersion,\n  getSuggestedAppInstanceId,\n} from '../../modules/main/AppRegistration';\n\nimport type { ReduxState } from '../reducers/index.js';\n\nexport function logEvent(eventType: string, data?: Object) {\n  return async (dispatch, getStore: () => ReduxState) => {\n    const store = getStore();\n    const appInstanceId = await getSuggestedAppInstanceId(store);\n    const { LOGGING_API_URL, authId, secret } = getStandardApiConfigFromStore(store);\n\n    dataLayer.actions.logEvent(\n      LOGGING_API_URL,\n      authId,\n      secret,\n      eventType,\n      { deviceid: appInstanceId, schemaVersion: '1.0.0' },\n      data || {},\n      {\n        // additional metadata here\n        schemaVersion: '1.0.0',\n        os: AppStateManager._getOs(),\n        appVersion: getAppVersion(),\n        appInstanceId,\n        appId: getAppId(),\n        osVersion: AppStateManager._getOsVersion() || 'unknown',\n        formFactor: 'website',\n      },\n    );\n  };\n}\n","// @flow\n\nimport React, { useState, useEffect } from 'react';\nimport styled from 'styled-components';\nimport { connect } from 'react-redux';\nimport { bindActionCreators } from 'redux';\nimport OutsideClickHandler from 'react-outside-click-handler';\n\nimport { getAlertsLegend } from '../../common/actions/alertsActions';\nimport { Icon } from '../shared/Icon';\nimport { Popover } from '../shared/Popover';\nimport { Box } from '../shared/Box';\nimport { AlertCard, Title, Description } from '../alerts/AlertCard';\nimport { logEvent } from '../../common/actions/logActions';\n\nimport type { AlertT } from '../alerts/AlertCard';\n\ntype Props = {\n  alerts: Array<AlertT>,\n  latitude: number,\n  longitude: number,\n  locationSlugName: string,\n  logEvent: typeof logEvent,\n  getAlertsLegend: typeof getAlertsLegend,\n};\n\nconst _AlertsWidget = function(props: Props) {\n  const { alerts, locationSlugName, latitude, longitude, getAlertsLegend } = props;\n  const [isOpen, setIsOpen] = useState(false);\n  const [alertColorMap, setAlertColorMap] = useState({});\n\n  useEffect(() => {\n    const fetchData = async () => {\n      const legendResults = await getAlertsLegend(latitude, longitude);\n      const legendMap = legendResults.reduce((obj, item) => {\n        obj[item.Type] = item;\n        return obj;\n      }, {});\n      setAlertColorMap(legendMap);\n    };\n    if (latitude && longitude && alerts.length > 0) {\n      fetchData();\n    }\n  }, [latitude, longitude, alerts.length, getAlertsLegend]);\n\n  function toggleAlertPopover() {\n    setIsOpen(!isOpen);\n  }\n\n  function onClickAlert() {\n    const newTab = window.open('about:blank', '_blank');\n    if (newTab && newTab.location && locationSlugName) {\n      const url = `https://www.weatherbug.com/alerts/${locationSlugName}`;\n      props.logEvent('user.link.clicked', {\n        url,\n      });\n      newTab.location.href = url;\n    }\n  }\n\n  return (\n    <Container>\n      <OutsideClickHandler\n        onOutsideClick={() => {\n          setIsOpen(false);\n        }}\n      >\n        <InnerContainer>\n          <Popover\n            isOpen={isOpen}\n            offset={{ top: 4, right: 4 }}\n            anchorElement={\n              <IconContainer onClick={toggleAlertPopover}>\n                <Icon\n                  name=\"WarningEmpty\"\n                  size={28}\n                  color={alerts.length === 0 ? '#2f6f8c' : '#d25858'}\n                />\n                <IconLabel>{alerts.length}</IconLabel>\n              </IconContainer>\n            }\n          >\n            <Box width={365}>\n              {alerts.length === 0 && (\n                <Box padding={2} display=\"flex\" direction=\"row\" alignItems=\"center\">\n                  <Box width={50} height={50} marginRight={2}>\n                    <img src={require('../../assets/sun.svg')} alt=\"sun\" />\n                  </Box>\n                  <Box onClick={onClickAlert}>\n                    <Title>Enjoy the Weather</Title>\n                    <Description>There are no alerts in your area.</Description>\n                  </Box>\n                </Box>\n              )}\n              {alerts.map(alert => (\n                <AlertCard\n                  key={alert.AlertId}\n                  theme={alertColorMap[alert.AlertTypeName]}\n                  alert={alert}\n                  onClick={onClickAlert}\n                />\n              ))}\n            </Box>\n          </Popover>\n        </InnerContainer>\n      </OutsideClickHandler>\n    </Container>\n  );\n};\n\nconst Container = styled.div`\n  align-self: stretch;\n  &:hover {\n    cursor: pointer;\n    background-color: rgb(245, 245, 245);\n  }\n  & > div {\n    // this is the outside click handler\n    height: 100%;\n  }\n`;\nconst InnerContainer = styled.div`\n  position: relative;\n  display: flex;\n  align-items: center;\n  height: 100%;\n`;\n\nconst IconLabel = styled.div`\n  color: white;\n  font-size: 12px;\n  font-weight: bold;\n`;\n\nconst IconContainer = styled.div`\n  padding: 0 16px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  align-self: stretch;\n\n  ${IconLabel} {\n    position: absolute;\n    margin-top: 1px;\n  }\n`;\n\nconst select = function(store) {\n  const { alerts, locationDetails } = store;\n  return {\n    alerts: (alerts && alerts.alerts && alerts.alerts.alertList) || [],\n    latitude:\n      locationDetails &&\n      locationDetails.locationDetails &&\n      locationDetails.locationDetails.latitude,\n    longitude:\n      locationDetails &&\n      locationDetails.locationDetails &&\n      locationDetails.locationDetails.longitude,\n    locationSlugName:\n      locationDetails &&\n      locationDetails.locationDetails &&\n      locationDetails.locationDetails.slugName,\n  };\n};\n\nfunction mapActions(dispatch) {\n  return bindActionCreators(\n    {\n      getAlertsLegend,\n      logEvent,\n    },\n    dispatch,\n  );\n}\n\nexport const AlertsWidget = connect(\n  select,\n  mapActions,\n)(_AlertsWidget);\n","// @flow\n\nimport React, { memo } from 'react';\nimport styled from 'styled-components';\n\ntype Props = {\n  className?: any,\n};\nexport const WeatherBugLogo = styled(memo(({ className } : Props) => {\n  return <LogoImg className={className} src={require('../../assets/wb-color-logo.svg')} />;\n}))``;\n\nconst LogoImg = styled.img`\n  object-fit: contain;\n  height: 32px;\n`;\n","// @flow\n\nimport React from 'react';\nimport styled from 'styled-components';\n\nimport { Box } from '../shared/Box';\nimport { LocationSearch } from './LocationSearch';\nimport { AlertsWidget } from './AlertsWidget';\nimport { WeatherBugLogo } from '../shared/WeatherBugLogo';\n\ntype Props = {};\nexport const HeaderBar = function(props: Props) {\n  return (\n    <Container>\n      <WeatherBugLogo />\n      <Box flex={1} />\n      <LocationSearch />\n      <AlertsWidget />\n    </Container>\n  );\n};\n\nconst Container = styled.div`\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n  flex-shrink: 0;\n  height: 50px;\n  background-color: white;\n  box-shadow: 0 1px 2px rgba(0, 0, 0, 0.2);\n  padding-left: 8px;\n\n  @media screen and (max-width: 635px) {\n    & > ${WeatherBugLogo} {\n      width: 30px;\n      object-fit: cover;\n      object-position: 0 0;\n    }\n  }\n`;\n","const SET_CCPA_OPT_STATUS = 'SET_CCPA_OPT_STATUS';\n\nexport function setCCPAOptOutStatus(optOutStatus) {\n  return {\n    type: SET_CCPA_OPT_STATUS,\n    payload: optOutStatus,\n  };\n}\n\nexport function clearCCPAOptStatus() {\n  return {\n    type: SET_CCPA_OPT_STATUS,\n  };\n}\n","import React, { memo, useState, useEffect } from 'react';\nimport styled from 'styled-components';\nimport { bindActionCreators } from 'redux';\nimport { setCCPAOptOutStatus } from '../../common/actions/ccpaActions';\nimport { updateCustomSettings } from '../../common/actions/entityManagementActions';\nimport { connect } from 'react-redux';\nimport LocalStorage from '../shared/LocalStorage';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { getComplianceInfo } from '../../common/actions/complianceActions';\n\nconst _CCPABanner = memo(\n  ({ className, logEvent, setCCPAOptOutStatus, updateCustomSettings, latitude, longitude }) => {\n    const TEXT_DONT_SELL = 'Do not sell';\n    const TEXT_NOT_SELLING = 'Not Selling your Data';\n    const TEXT_CONFIRMED = 'Confirmed';\n    const ifOptedOut = LocalStorage.getCCPAOptOutStatus();\n    const [ccpaText, setCcpaText] = useState(ifOptedOut ? TEXT_NOT_SELLING : TEXT_DONT_SELL);\n    const isCCPAEnabled = useSelector(store => {\n      if (store && store.complianceInfo.complianceInfo) {\n        return store.complianceInfo.complianceInfo.ccpa;\n      }\n      return false;\n    });\n    const dispatch = useDispatch();\n    useEffect(() => {\n      if (latitude && longitude) {\n        dispatch(getComplianceInfo(latitude, longitude));\n      }\n    }, [latitude, longitude, dispatch]);\n\n    const onCCPAClicked = () => {\n      if (LocalStorage.getCCPAOptOutStatus()) {\n        return;\n      }\n      updateSettings();\n      setCCPAOptOutStatus(true);\n      LocalStorage.setCCPAOptOutStatus(true);\n      setCcpaText(TEXT_CONFIRMED);\n      setTimeout(() => {\n        changeCCPAText();\n      }, 10000);\n    };\n\n    async function updateSettings() {\n      const appInstanceId = await LocalStorage.getAppInstanceId();\n      updateCustomSettings({\n        appInstanceId,\n        key: 'CCPA',\n        value: { value: isCCPAEnabled },\n        verbose: true,\n      });\n    }\n\n    const changeCCPAText = () => {\n      if (LocalStorage.getCCPAOptOutStatus()) {\n        setCcpaText(TEXT_NOT_SELLING);\n      } else {\n        setCcpaText(TEXT_DONT_SELL);\n      }\n    };\n\n    return (\n      <Container className={Container}>\n        {isCCPAEnabled && (\n          <>\n            | &nbsp;\n            <Label onClick={onCCPAClicked}>{ccpaText}</Label>\n          </>\n        )}\n      </Container>\n    );\n  },\n);\n\nconst select = store => {\n  const { complianceInfo } = store.complianceInfo || {};\n  const { latitude, longitude } = store.locationDetails.userDefaultLocation || {};\n  return { complianceInfo, latitude, longitude };\n};\n\nfunction mapActions(dispatch) {\n  return bindActionCreators(\n    {\n      setCCPAOptOutStatus,\n      updateCustomSettings,\n    },\n    dispatch,\n  );\n}\n\nexport const CCPABanner = connect(\n  select,\n  mapActions,\n)(_CCPABanner);\n\nCCPABanner.displayName = 'CCPABanner';\n\nconst Container = styled.div`\n  font-size: 14px;\n  display: inline;\n  font-color: #0083c6;\n  cursor: pointer;\n`;\n\nconst Label = styled.span`\n  text-decoration-line: underline;\n}`;\n","/* @flow */\nimport { dataLayer } from '@weatherbug/common';\nimport { getStandardApiConfig, type StandardApiConfigT } from '../config/getStandardApiConfig';\n\nexport function getComplianceInfo(latitude, longitude) {\n  return dispatch => {\n    const apiConfig: StandardApiConfigT = dispatch(getStandardApiConfig());\n    const { LEGAL_API_URL, authId, secret, stdParameters } = apiConfig;\n\n    return dispatch(\n      dataLayer.actions.getComplianceInfo(\n        LEGAL_API_URL,\n        authId,\n        secret,\n        undefined,\n        undefined,\n        stdParameters,\n        false,\n        true,\n        'LatitudeLongitude',\n        ` ${latitude},${longitude}`,\n      ),\n    );\n  };\n}\n","import React, { memo } from 'react';\nimport PropTypes from 'prop-types';\nimport styled from 'styled-components';\nimport { Box } from '../shared/Box';\n\nconst errorStyle = {\n  color: 'red',\n};\nconst ErrorMessage = styled.div`\n  color: red;\n  font-size: 12px;\n`;\nconst FormButtonContainer = styled.div`\n  display: flex;\n  flex: 1;\n  flex-direction: row;\n  justify-content: space-between;\n  width: 60%;\n  margin: 0 auto;\n`;\n\nconst FormCancelButton = styled.button.attrs({ type: 'button' })`\n  display: block;\n  background: #999999;\n  border-radius: 4px;\n  font-size: 14px;\n  line-height: 24px;\n  align-items: center;\n  letter-spacing: 0.09em;\n  text-transform: uppercase;\n  margin-bottom: 28px;\n  color: #ffffff;\n  height: 36px;\n  width: 98px;\n`;\n\nconst FormSubmitButton = styled.button.attrs({ type: 'submit' })`\n  display: block;\n  background: #f8971d;\n  border-radius: 4px;\n  font-size: 14px;\n  line-height: 24px;\n  align-items: center;\n  letter-spacing: 0.09em;\n  text-transform: uppercase;\n  margin-bottom: 28px;\n  color: #ffffff;\n  height: 36px;\n  width: 98px;\n`;\n\nconst OtherTextbox = styled.textarea`\n  height: 132px;\n  margin-bottom: 2px;\n  border: 1px solid #999999;\n  box-sizing: border-box;\n  border-radius: 4px;\n  background: transparent;\n  width: 418px;\n`;\n\nexport const EmailTextBox = styled.input.attrs({ type: 'text' })`\n  width: 418px;\n  height: 40px;\n  border: 1px solid #999999;\n  box-sizing: border-box;\n  border-radius: 4px;\n  background-color: transparent;\n  margin-bottom: 2px;\n  padding-left: 4px;\n  &::placeholder {\n    padding-left: 4px;\n    color: grey;\n  }\n`;\nconst FormLabel = styled.label`\n  font-weight: normal;\n  font-size: 18px;\n  line-height: 24px;\n  margin-bottom: 18px;\n  text-align: left;\n`;\nconst TopLabel = styled.div`\n  margin-bottom: 2px;\n  font-weight: normal;\n  font-size: 15px;\n  line-height: 17px;\n`;\n\nconst FormSubTitle = styled.div`\n  font-weight: normal;\n  font-size: 18px;\n  line-height: 32px;\n  display: flex;\n  align-items: center;\n  margin-bottom: 12px;\n`;\n\nconst FormHeadder = styled.div`\n  font-size: 24px;\n  margin-bottom: 10px;\n  display: flex;\n  align-items: center;\n`;\n\nconst MainFormContainer = styled.div`\n  margin-top: 10px;\n  margin-bottom: 10px;\n  padding: 10px;\n  display: flex;\n  flex-direction: column;\n`;\nconst Form = styled.form`\n  color: black;\n  width: 430px;\n`;\n\nconst Thankyou = styled.div`\n  flex-grow: 2;\n  padding: 40px;\n  font-size: 20px;\n`;\n\nexport const FeedbackFormView = memo(\n  ({\n    isSubmitted,\n    handleEmailChange,\n    handleNameChange,\n    handleMessageChange,\n    handleFormSubmit,\n    isValid,\n    userName,\n    userEmail,\n    comments,\n    handleCloseButton,\n    errorMessage,\n  }) => {\n    if (!isSubmitted) {\n      return (\n        <Form onSubmit={handleFormSubmit}>\n          <MainFormContainer>\n            <FormHeadder>Contact Us</FormHeadder>\n            <FormSubTitle>Tell us about your experience</FormSubTitle>\n            <FormSubTitle>\n              <span style={errorStyle}>*</span> Indicates a required field\n            </FormSubTitle>\n            <FormLabel>\n              <TopLabel>\n                Your Name<span style={errorStyle}>*</span>\n              </TopLabel>\n              <EmailTextBox onChange={handleNameChange} placeholder=\"Your Name\" name=\"userName\" />\n              {!isValid && !userName && <ErrorMessage>Name is required</ErrorMessage>}\n            </FormLabel>\n            <FormLabel>\n              <TopLabel>\n                Your Email<span style={errorStyle}>*</span>\n              </TopLabel>\n              <EmailTextBox\n                onChange={handleEmailChange}\n                placeholder=\"Your-email@example.com\"\n                name=\"email\"\n              />\n              {!isValid && !userEmail && <ErrorMessage>{errorMessage}</ErrorMessage>}\n            </FormLabel>\n            <FormLabel>\n              <TopLabel>\n                Details<span style={errorStyle}>*</span>\n              </TopLabel>\n              <OtherTextbox\n                onChange={handleMessageChange}\n                placeholder=\"What would you like to say?\"\n                name=\"details\"\n              />\n              {!isValid && !comments && <ErrorMessage>Comments are required</ErrorMessage>}\n            </FormLabel>\n          </MainFormContainer>\n          <FormButtonContainer>\n            <FormSubmitButton>Submit</FormSubmitButton>\n            <FormCancelButton onClick={handleCloseButton}>Cancel</FormCancelButton>\n          </FormButtonContainer>\n        </Form>\n      );\n    }\n    return (\n      <Box padding={1} display=\"flex\" justifyContent=\"center\" height={250}>\n        <Box display=\"flex\" flexDirection=\"column\" height=\"100%\" margin-top={50}>\n          <Thankyou>\n            Thank you for submitting your information we will get back to you very soon!\n          </Thankyou>\n          <Box flexGrow={1} margin=\"0 auto\">\n            <FormCancelButton style={{ margin: '0 auto' }} onClick={handleCloseButton}>\n              Close\n            </FormCancelButton>\n          </Box>\n        </Box>\n      </Box>\n    );\n  },\n);\n\nFeedbackFormView.displayName = 'UninstallFormView';\nFeedbackFormView.propTypes = {\n  isSubmitted: PropTypes.bool,\n  handleEmailChange: PropTypes.func,\n  handleNameChange: PropTypes.func,\n  handleMessageChange: PropTypes.func,\n  handleFormSubmit: PropTypes.func,\n  isValid: PropTypes.bool,\n  userName: PropTypes.string,\n  userEmail: PropTypes.string,\n  comments: PropTypes.string,\n  handleCloseButton: PropTypes.func,\n  errorMessage: PropTypes.string,\n};\n","export const validateEmail = (email) => {\n  const emailValidationRegex = /^(([^<>()[\\]\\\\.,;:\\s@\"]+(\\.[^<>()[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/;\n  return emailValidationRegex.test(String(email).toLowerCase());\n};\n","import React, { memo, useState } from 'react';\nimport PropTypes from 'prop-types';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { dataLayer } from '@weatherbug/common';\nimport { FeedbackFormView } from './FeedbackFormView';\nimport { validateEmail } from '../../common/utilities/email';\n\nimport { getAppId, getAppVersion } from '../../modules/main/AppRegistration';\n\nimport {\n  getStandardApiConfig,\n  type StandardApiConfigT,\n} from '../../common/config/getStandardApiConfig';\nimport { AppStateManager } from '../../common/utilities/appStateManager';\nconst { sendFeedback } = dataLayer.actions;\n\nexport const FeedbackForm = memo(({ setFeedbackFormOpen }) => {\n  const [isSubmitted, setIsSubmitted] = useState(false);\n  const [comments, setComments] = useState('');\n  const [userEmail, setEmail] = useState('');\n  const [userName, setName] = useState('');\n  const [errorMessage, setErrorMessage] = useState(undefined);\n  const [isValid, setValid] = useState(true);\n  const dispatch = useDispatch();\n\n  const { location, appInstanceId, station } = useSelector((state) => ({\n    location: state.locationDetails?.locationDetails,\n    appInstanceId: state.entityManagement.appInstanceId,\n    station: state.currentStationObs?.currentStationObs,\n  }));\n\n  const handleEmailChange = (event) => {\n    event.preventDefault();\n    setEmail(event.target.value);\n  };\n\n  const handleNameChange = (event) => {\n    event.preventDefault();\n    setName(event.target.value);\n  };\n\n  const handleMessageChange = (event) => {\n    event.preventDefault();\n    setComments(event.target.value);\n  };\n\n  //TECHDEBT: Move to constants file when one exists\n  const pushToken = '0000000000000000000000000000000000000000000000000000000011111111';\n\n  const apiConfig: StandardApiConfigT = dispatch(getStandardApiConfig());\n  const { authId, secret, stdParameters } = apiConfig;\n\n  const validateForm = () => {\n    let error = undefined;\n    let valid = true;\n    if (!userEmail) {\n      error = 'Email is required';\n      valid = false;\n    }\n    if (!validateEmail(userEmail)) {\n      error = 'Invalid Email Address';\n      valid = false;\n    }\n    if (!userName) {\n      valid = false;\n    }\n    if (!userEmail) {\n      valid = false;\n    }\n    if (!comments) {\n      valid = false;\n    }\n    setValid(valid);\n    setErrorMessage(error);\n    return valid;\n  };\n\n  const handleCloseButton = (event) => {\n    event.preventDefault();\n    setIsSubmitted(false);\n    setErrorMessage(undefined);\n    setEmail(undefined);\n    setName(undefined);\n    setComments(undefined);\n    setFeedbackFormOpen();\n    setValid(true);\n  };\n\n  const handleFormSubmit = (formSubmitEvent) => {\n    formSubmitEvent.preventDefault();\n\n    if (!validateForm()) {\n      return;\n    } else {\n      if (appInstanceId && station && apiConfig) {\n        const feedbackBody = {\n          User: {\n            RawFeedbackMessage: comments,\n            EmailAddress: userEmail,\n            AppInstanceId: appInstanceId,\n            CultureInfo: 'en-us',\n            Name: userName,\n            SignInId: userEmail,\n          },\n          App: {\n            Id: getAppId(),\n            Version: getAppVersion(),\n            Name: 'WeatherBug Browser Extension',\n          },\n          Os: {\n            Type: AppStateManager._getOs(),\n            Version: AppStateManager._getOsVersion(),\n          },\n          Device: {},\n          Legal: {\n            PrivacyPolicyVersion: 'PP-US-EN-20180523-00',\n            TermsOfUsageVersion: 'TOU-US-EN-20180523-00',\n          },\n          Location: {\n            Selected: {\n              Coordinates: {\n                Latitude: location?.latitude,\n                Longitude: location?.longitude,\n              },\n              City: location?.cityName,\n              StateProvidence: location?.territoryName,\n              Country: location?.countryIso2Code,\n              Station: {\n                ProviderId: station?.station?.providerId,\n                StationId: station?.station?.stationId,\n                StationName: station?.station?.stationName,\n              },\n              LocationName: `${location?.cityName}, ${location?.territoryName}`,\n            },\n          },\n          Push: {\n            PushToken: pushToken,\n          },\n        };\n\n        dispatch(\n          sendFeedback(apiConfig?.FEEDBACK_URL, authId, secret, feedbackBody, stdParameters, true),\n        );\n        setIsSubmitted(true);\n      }\n    }\n  };\n\n  return (\n    <FeedbackFormView\n      isSubmitted={isSubmitted}\n      handleEmailChange={handleEmailChange}\n      handleNameChange={handleNameChange}\n      handleMessageChange={handleMessageChange}\n      handleFormSubmit={handleFormSubmit}\n      isValid={isValid}\n      userName={userName}\n      userEmail={userEmail}\n      comments={comments}\n      handleCloseButton={handleCloseButton}\n      errorMessage={errorMessage}\n    />\n  );\n});\n\nFeedbackForm.displayName = 'FeedbackForm';\n\nFeedbackForm.propTypes = {\n  setFeedbackFormOpen: PropTypes.func,\n};\n","import React, { memo, useState } from 'react';\nimport styled from 'styled-components';\nimport { Popover } from '../shared/Popover';\nimport { Box } from '../shared/Box';\nimport { FeedbackForm } from './FeedbackForm';\n\nexport const FeedbackBanner = memo(() => {\n  const [isFeedbackOpen, setIsOpen] = useState(false);\n\n  const setFeedbackFormOpen = () => {\n    setIsOpen(!isFeedbackOpen);\n  };\n\n  return (\n    <Popover\n      isOpen={isFeedbackOpen}\n      isCentered={true}\n      width={440}\n      anchorElement={<ClickLink onClick={setFeedbackFormOpen}>Contact Us</ClickLink>}\n    >\n      <Box width={440}>\n        <FeedbackForm setFeedbackFormOpen={setFeedbackFormOpen} />\n      </Box>\n    </Popover>\n  );\n});\n\nconst ClickLink = styled.span`\n  background-color: white;\n  padding: 8px;\n  text-align: center;\n  color: #0083c6;\n  font-size: 14px;\n  text-decoration: underline;\n  margin-left: -2px;\n`;\n","import React, { memo } from 'react';\nimport styled from 'styled-components';\nimport { bindActionCreators } from 'redux';\nimport { logEvent } from '../../common/actions/logActions';\nimport { connect } from 'react-redux';\nimport { CCPABanner } from './ccpaBanner';\nimport { FeedbackBanner } from './FeedbackBanner';\n\nconst TERMS_URL = 'https://www.weatherbug.com/legal/terms';\nconst PRIVACY_POLICY_URL = 'https://www.weatherbug.com/legal/privacy';\n\nconst _LegalBanner = memo(({ className, logEvent }) => {\n  const currentYear = new Date().getFullYear();\n\n  function onTermsOrPolicyClick(url) {\n    logEvent('user.link.clicked', {\n      url,\n    });\n  }\n\n  return (\n    <Container className={className}>\n      <span>\n        &copy; GroundTruth, {currentYear}. WeatherBug is a brand of GroundTruth. All Rights\n        Reserved. &nbsp;\n      </span>\n      <a href={TERMS_URL} onClick={() => onTermsOrPolicyClick(TERMS_URL)}>\n        Terms\n      </a>{' '}\n      |{' '}\n      <a href={PRIVACY_POLICY_URL} onClick={() => onTermsOrPolicyClick(PRIVACY_POLICY_URL)}>\n        Policy\n      </a>{' '}\n      <CCPABanner />\n      <FeedbackBanner />\n    </Container>\n  );\n});\n\nfunction mapActions(dispatch) {\n  return bindActionCreators(\n    {\n      logEvent,\n    },\n    dispatch,\n  );\n}\n\nexport const LegalBanner = connect(null, mapActions)(_LegalBanner);\n\nconst Container = styled.div`\n  background-color: white;\n  padding: 8px;\n  text-align: center;\n  color: #0083c6;\n  font-size: 14px;\n  a {\n    color: #0083c6;\n  }\n`;\n","import React, { PureComponent } from 'react';\n\nexport class TaboolaAd extends PureComponent {\n  componentDidMount() {\n    const { modeId, containerId, placementId, targetType, isLastSnippet, cdnsStatus } = this.props;\n    window._taboola = window._taboola || [];\n    window._taboola.push({\n      mode: modeId,\n      container: containerId,\n      placement: placementId,\n      target_type: targetType,\n      cdns: cdnsStatus,\n    });\n\n    if (isLastSnippet) {\n      window._taboola = window._taboola || [];\n      window._taboola.push({\n        flush: true,\n      });\n    }\n  }\n\n  render() {\n    const { divId, adWidth, adHeight } = this.props;\n    let adStyle = { margin: 'auto', maxWidth: '1200px' };\n    if (adWidth) {\n      adStyle = { width: adWidth, height: adHeight, margin: 'auto' };\n    }\n    return <div id={divId} style={adStyle} />;\n  }\n}\n","/* @flow */\n\nimport React, { memo, useState } from 'react';\nimport styled from 'styled-components';\nimport Measure from 'react-measure';\nimport { TaboolaAd } from './TaboolaAd';\nimport LocalStorage from '../shared/LocalStorage';\nimport { useSelector } from 'react-redux';\n\ntype Props = {\n  className?: string,\n};\nexport const TaboolaView = styled(\n  memo(\n    ({\n      className,\n      shouldRenderAdView = false,\n      modeId,\n      containerId,\n      placementId,\n      targetType,\n      divId,\n      adHeight,\n      adWidth,\n      isLastSnippet,\n      ccpa,\n      shouldSpan,\n    }: Props) => {\n      const [ccpaClicked, setCcpaClicked] = useState(false);\n      useSelector((store) => {\n        if (store && store.ccpaReducer.ccpaOptStatus) {\n          if (ccpaClicked !== store.ccpaReducer.ccpaOptStatus) {\n            setCcpaClicked(!ccpaClicked);\n          }\n        }\n      });\n      let cdnsStatus = 'none';\n      if (ccpa) {\n        cdnsStatus = LocalStorage.getCCPAOptOutStatus() ? 'true' : 'false';\n      }\n      return (\n        <div className={className}>\n          {shouldRenderAdView && (\n            <Measure>\n              {({ measureRef, contentRect }) => {\n                return (\n                  <Container ref={measureRef}>\n                    <Content>\n                      <div style={{ padding: shouldSpan ? 34 : 0 }}>\n                        <TaboolaAd\n                          modeId={modeId} //'thumbnails-a'\n                          containerId={containerId} //'taboola-below-content-thumbnails---now-forecast'\n                          placementId={placementId} //'Below Content Thumbnails - Now Forecast'\n                          targetType={targetType} //'mix'\n                          divId={divId} //'taboola-below-content-thumbnails---now-forecast'\n                          isLastSnippet={isLastSnippet} //true\n                          shouldRenderAdView={shouldRenderAdView}\n                          cdns={cdnsStatus}\n                        />\n                      </div>\n                    </Content>\n                  </Container>\n                );\n              }}\n            </Measure>\n          )}\n        </div>\n      );\n    },\n  ),\n)``;\n\nconst Container = styled.div`\n  ${TaboolaAd} {\n    margin: 0 auto;\n  }\n`;\nconst Content = styled.div`\n  padding: 8px;\n`;\n","// @flow\n\nimport { dataLayer } from '@weatherbug/common';\n\nimport {\n  getStandardApiConfig,\n  type StandardApiConfigT,\n} from '../../common/config/getStandardApiConfig';\n\nconst DEFAULT_VERBOSE = true;\n\ntype Datestring = string;\n\nexport type GetAllIconUrlsPayload = {\n  Height: 168,\n  IconByCodeUrl: 'https://d2erwcr27wae6d.cloudfront.net/resources/v1/resource/IconByCodeV1?iconset=forecast&iconSize=4&iconCode={iconCode}&token=1c08bc8a-76dc-425b-a367-46c75cec42de',\n  IconByCodeUrlValidForSeconds: 518400,\n  Icons: Array<{\n    IconCode: number,\n    Url: string,\n  }>,\n  LastUpdatedDateTimeUtc: Datestring,\n  Width: number,\n  ZipUrl: string,\n  responseTime: number,\n};\nexport function getAllIconUrls({\n  iconSet = 'forecast',\n  iconSize = 4,\n  contrast = null,\n  verbose = DEFAULT_VERBOSE,\n  refresh = false,\n}: {\n  iconSet?: 'forecast' | string,\n  iconSize?: 4 | number,\n  contrast?: null,\n  verbose?: boolean,\n  refresh?: boolean,\n}) {\n  return function getAllIconUrlsThunk(dispatch) {\n    const apiConfig: StandardApiConfigT = dispatch(getStandardApiConfig());\n    const { ICON_API_URL, authId, secret, stdParameters } = apiConfig;\n    return dispatch(\n      dataLayer.actions.getAllIconUrls(\n        iconSet,\n        iconSize,\n        contrast,\n        ICON_API_URL,\n        authId,\n        secret,\n        stdParameters,\n        verbose,\n        refresh,\n      ),\n    );\n  };\n}\n","// @flow\n\nimport React from 'react';\nimport styled from 'styled-components';\n\nimport { Text3 } from '../shared/Typography';\n\nconst RowItem = styled.div`\n  display: flex;\n  flex-direction: row;\n  justify-content: space-between;\n  align-items: center;\n  margin: 4px 0;\n`;\n\nexport const Table = styled.div`\n  width: 100%;\n  align-self: stretch;\n  ${RowItem}:last-child {\n    margin-bottom: 0;\n  }\n`;\n\ntype Props = {\n  label: string,\n  value: string,\n};\nexport const TableRow = ({ label, value }: Props) => {\n  return (\n    <RowItem>\n      <Text3>{label}</Text3>\n      <Text3 emphasize>{value}</Text3>\n    </RowItem>\n  );\n};\n","// @flow\n\nimport styled from 'styled-components';\n\nexport const HourlyItemBox = styled.div`\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  text-align: center;\n  width: 120px;\n  height: 248px;\n  background-color: rgba(0, 0, 0, 0.4);\n  border: 1px solid rgba(255, 255, 255, 0.1);\n  padding: 8px;\n  flex-shrink: 0;\n`;\n","/* @flow */\n\nimport React, { Component } from 'react';\nimport styled from 'styled-components';\n\nimport { utilities } from '@weatherbug/common';\n\nimport { WeatherIcon } from '../shared/WeatherIcon';\nimport { Text1, Text2, Text3 } from '../shared/Typography';\nimport { Box } from '../shared/Box';\nimport { Table, TableRow } from './Table';\nimport { HourlyItemBox } from './HourlyItemBox';\n\nimport { TemperatureLabel } from '../shared/TemperatureLabel';\nimport type { HourlyForecastEntry } from '../../common/actions/forecastAction';\n\ntype Pick<Origin: Object, Keys: Object> = $ObjMapi<\n  Keys,\n  <Key>(k: Key) => $ElementType<Origin, Key>,\n>;\n\nexport type HourEntry = Pick<\n  HourlyForecastEntry,\n  {\n    iconCode: any,\n    temperature: any,\n    forecastDateLocalStr: any,\n    precipProbability: any,\n    description: any,\n    relativeHumidity: any,\n    windDirectionDegrees: any,\n    windSpeed: any,\n  },\n>;\n\ntype Props = {\n  hourEntry: HourEntry,\n};\nexport class HourlyWeatherColumn extends Component<Props> {\n  render() {\n    const { hourEntry } = this.props;\n    const {\n      iconCode,\n      temperature,\n      description,\n      precipProbability,\n      relativeHumidity,\n      windDirectionDegrees,\n      windSpeed,\n    } = hourEntry;\n    const date = new Date(hourEntry.forecastDateLocalStr);\n    const rawHourNum = date.getHours();\n    const hourNum = rawHourNum % 12 === 0 ? 12 : rawHourNum % 12;\n    const title = hourNum + ' ' + (rawHourNum < 12 ? 'AM' : 'PM');\n    const wind = `${utilities.getWindDirection(windDirectionDegrees)} ${windSpeed}`;\n\n    return (\n      <HourlyItemBox>\n        <Box marginBottom={1}>\n          <Text2>{title}</Text2>\n        </Box>\n\n        <Box marginBottom={1}>\n          <Text1>\n            <TemperatureLabel value={temperature} />\n          </Text1>\n        </Box>\n\n        <Box height={32} display=\"flex\" alignItems=\"center\">\n          <Text3 lineClamp={2}>{description || '--'}</Text3>\n        </Box>\n\n        <Box display=\"flex\" flex={1} alignItems=\"center\" justifyContent=\"center\">\n          <IconContainer>\n            {iconCode && (\n              <WeatherIcon size=\"small\" iconCode={hourEntry.iconCode}>\n                {({ src }) => <IconImg src={src} />}\n              </WeatherIcon>\n            )}\n          </IconContainer>\n        </Box>\n\n        <Table>\n          {typeof precipProbability === 'number' && (\n            <TableRow label=\"Precip.\" value={precipProbability + '%'} />\n          )}\n          {typeof relativeHumidity === 'number' && (\n            <TableRow label=\"Humidity\" value={relativeHumidity + '%'} />\n          )}\n          {!!wind && <TableRow label=\"Wind\" value={wind} />}\n        </Table>\n      </HourlyItemBox>\n    );\n  }\n}\n\nconst IconImg = styled.img`\n  width: 100%;\n`;\n\nconst IconContainer = styled.div`\n  width: 64px;\n  height: 64px;\n  border-radius: 100%;\n  overflow: hidden;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  // background: rgba(255, 255, 255, 0.2);\n`;\n","// @flow\n\nimport React from 'react';\n\nimport { Text2 } from '../shared/Typography';\nimport { Box } from '../shared/Box';\nimport { HourlyItemBox } from './HourlyItemBox';\nimport { MONTHS, DAYS } from '../../common/utilities/date';\n\ntype Props = {\n  date: Date,\n};\n\nexport const DayColumn = ({ date }: Props) => {\n  const dateLabel = MONTHS[date.getMonth()] + ' ' + date.getDate();\n  const dayOfWeek = DAYS[date.getDay()];\n  return (\n    <HourlyItemBox>\n      <Box\n        flex={1}\n        display=\"flex\"\n        flexDirection=\"column\"\n        justifyContent=\"center\"\n        alignItems=\"center\"\n      >\n        <Box marginBottom={2}>\n          <Text2 semiBold>{dateLabel}</Text2>\n        </Box>\n        <Text2 semiBold>{dayOfWeek}</Text2>\n      </Box>\n    </HourlyItemBox>\n  );\n};\n","import React, { Fragment } from 'react';\nimport { connect } from 'react-redux';\nimport { bindActionCreators } from 'redux';\nimport _ from 'lodash';\n\nimport { HourlyWeatherColumn } from './HourlyWeatherColumn';\nimport { DayColumn } from './DayColumn';\nimport { HourlyItemBox } from './HourlyItemBox';\nimport { getHourlyForecastByLatLon } from '../../common/actions/forecastAction';\n\nimport type { HourEntry } from './HourlyWeatherColumn';\n\nimport { Title3 } from '../shared/Typography';\nimport { Carousel } from '../shared/Carousel';\n\ntype Props = {\n  match: Match,\n  history: History,\n  location: Location,\n  loading: boolean,\n  getHourlyForecastByLatLon: typeof getHourlyForecastByLatLon,\n  hourlyEntries: Array<HourEntry>,\n};\n\nconst HourlyViewBare = (props: Props) => {\n  const { hourlyEntries } = props;\n  return (\n    <Carousel header={<Title3>HOURLY</Title3>}>\n      {hourlyEntries.length === 0 &&\n        _.times(10, i => {\n          return <HourlyItemBox key={i} />;\n        })}\n      {hourlyEntries.map(hourEntry => {\n        const date = new Date(hourEntry.forecastDateLocalStr);\n        const rawHourNum = date.getHours();\n        return (\n          <Fragment key={hourEntry.forecastDateLocalStr}>\n            {rawHourNum === 0 && <DayColumn date={date} />}\n            <HourlyWeatherColumn hourEntry={hourEntry} />\n          </Fragment>\n        );\n      })}\n    </Carousel>\n  );\n};\n\nconst select = store => {\n  const { forecast } = store;\n  const hourlyForecast = (forecast && forecast.hourly) || undefined;\n\n  const hourlyEntries = ((hourlyForecast && hourlyForecast.hourlyForecastPeriod) || []).map(\n    hourlyEntry => {\n      if (!hourlyEntry) {\n        return null;\n      }\n      return {\n        iconCode: hourlyEntry.iconCode,\n        temperature: hourlyEntry.temperature,\n        forecastDateLocalStr: hourlyEntry.forecastDateLocalStr,\n        precipProbability: hourlyEntry.precipProbability,\n        relativeHumidity: hourlyEntry.relativeHumidity,\n        windSpeed: hourlyEntry.windSpeed,\n        windDirectionDegrees: hourlyEntry.windDirectionDegrees,\n        description: hourlyEntry.description,\n      };\n    },\n  );\n  return {\n    hourlyEntries,\n  };\n};\n\nfunction mapActions(dispatch) {\n  return bindActionCreators(\n    {\n      getHourlyForecastByLatLon,\n    },\n    dispatch,\n  );\n}\n\nexport const HourlyView = connect(\n  select,\n  mapActions,\n)(HourlyViewBare);\n","// @flow\n\nconst cache = {};\n\nconst add = (url: string, onLoad?: () => void) => {\n  if (!cache[url]) {\n    const image = new Image();\n    cache[url] = image; //new Image();\n    image.src = url; // This allows the image to pre-load\n    if (onLoad) {\n      image.addEventListener('load', onLoad, { once: true });\n    }\n  } else {\n    onLoad && onLoad();\n  }\n\n  return cache[url];\n};\n\nconst get = (url: string) => {\n  return add(url);\n};\n\nconst has = (url: string) => {\n  return !!cache[url];\n};\n\nconst ImageCache = {\n  add,\n  get,\n  has,\n  cache,\n};\n\nexport default ImageCache;\n","// @flow\n\nimport { dataLayer } from '@weatherbug/common';\n\nimport {\n  getStandardApiConfig,\n  type StandardApiConfigT,\n} from '../../common/config/getStandardApiConfig';\n\nconst DEFAULT_VERBOSE = false;\n\nexport function getBackgroundImageByLatLon({\n  latitude,\n  longitude,\n  setId,\n  verbose = DEFAULT_VERBOSE,\n  refresh = false,\n}: {\n  latitude: number,\n  longitude: number,\n  setId?: string,\n  verbose?: boolean,\n  refresh?: boolean,\n}) {\n  return dispatch => {\n    const apiConfig: StandardApiConfigT = dispatch(getStandardApiConfig());\n    const { BACKGROUND_IMAGE_API_URL, authId, secret, stdParameters } = apiConfig;\n    return dispatch(\n      dataLayer.actions.getBackgroundImageByLatLon(\n        latitude,\n        longitude,\n        setId,\n        BACKGROUND_IMAGE_API_URL,\n        authId,\n        secret,\n        stdParameters,\n        verbose,\n        refresh,\n      ),\n    );\n  };\n}\n","/* @flow */\n\nimport React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport { bindActionCreators } from 'redux';\nimport { TransitionGroup, CSSTransition } from 'react-transition-group';\nimport styled, { css } from 'styled-components';\nimport _ from 'lodash';\n\nimport ImageCache from './ImageCache';\nimport { getBackgroundImageByLatLon } from '../../common/actions/backgroundImageActions';\n\ntype Props = {\n  backgroundUrl?: string,\n  latitude: number,\n  longitude: number,\n  getBackgroundImageByLatLon: typeof getBackgroundImageByLatLon,\n  children: React$Node,\n  withOverlay: boolean,\n  onBackgroundImageUrlLoaded: Function,\n};\ntype State = {\n  hasLoadedMap: {\n    [key: string]: boolean,\n  },\n};\n\nclass _WBBackgroundImage extends Component<Props, State> {\n  state = {\n    hasLoadedMap: {},\n  };\n\n  componentDidUpdate(prevProps) {\n    const { latitude, longitude } = this.props;\n    if (prevProps.latitude !== latitude || prevProps.longitude !== longitude) {\n      this.maybeLoadBackgroundByLatLong(latitude, longitude);\n    }\n  }\n\n  async componentDidMount() {\n    this.maybeLoadBackgroundByLatLong(this.props.latitude, this.props.longitude);\n  }\n\n  async maybeLoadBackgroundByLatLong(latitude: number, longitude: number) {\n    if (typeof latitude === 'number' && typeof longitude === 'number') {\n      const response = await this.props.getBackgroundImageByLatLon({\n        latitude,\n        longitude,\n      });\n      const backgroundUrl = getImageUrlFromEntries(response.value.u || []);\n      this.props.onBackgroundImageUrlLoaded(backgroundUrl);\n      if (ImageCache.has(backgroundUrl)) {\n        this.setState({ hasLoadedMap: { [backgroundUrl]: true } });\n      } else {\n        ImageCache.add(backgroundUrl, () => {\n          this.setState({ hasLoadedMap: { [backgroundUrl]: true } });\n        });\n      }\n    }\n  }\n\n  render() {\n    const { children, backgroundUrl, withOverlay } = this.props;\n    const { hasLoadedMap } = this.state;\n    const imageHasLoaded = hasLoadedMap[backgroundUrl || ''];\n    return (\n      <Container>\n        <TransitionGroup component={null}>\n          {imageHasLoaded && (\n            <CSSTransition key={backgroundUrl} timeout={350} classNames=\"item\">\n              <ImageView backgroundUrl={backgroundUrl} />\n            </CSSTransition>\n          )}\n        </TransitionGroup>\n        {withOverlay && <Overlay />}\n        <ContentContainer>{children}</ContentContainer>\n      </Container>\n    );\n  }\n}\n\nconst Container = styled.div`\n  position: relative;\n  height: 100vh;\n`;\n\nconst Overlay = styled.div`\n  position: fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background-color: rgba(0, 0, 0, 0.2);\n`;\n\nconst ContentContainer = styled.div`\n  position: relative;\n  z-index: 1;\n`;\n\nconst ImageView = styled.div`\n  position: fixed;\n  z-index: 0;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background-color: #2f6f8c;\n  background-size: cover;\n  background-repeat: no-repeat;\n  ${(props: Props) =>\n    props.backgroundUrl &&\n    css`\n    background-image: url('${props.backgroundUrl}');\n  `};\n\n  &.item-enter {\n    opacity: 0;\n  }\n  &.item-enter-active {\n    opacity: 1;\n    transition: opacity 350ms ease-in;\n  }\n  &.item-exit {\n    opacity: 1;\n  }\n  &.item-exit-active {\n    opacity: 0;\n    transition: opacity 350ms ease-in;\n  }\n`;\n\nconst getImageUrlFromEntries = function(entries): string {\n  const landscapeBackgrounds = entries.filter(entry => entry.o === 'Landscape');\n  const backgroundEntry = _.find(landscapeBackgrounds, entry => entry.sid === 'AndroidLargeTablet');\n\n  return (backgroundEntry && backgroundEntry.u) || '';\n};\n\nconst select = store => {\n  const { backgroundImage } = store;\n\n  let backgroundUrl;\n  if (backgroundImage && backgroundImage.images) {\n    const backgroundEntries = store.backgroundImage.images.u || [];\n    backgroundUrl = getImageUrlFromEntries(backgroundEntries);\n  }\n\n  return {\n    backgroundUrl,\n  };\n};\n\nfunction mapActions(dispatch) {\n  return bindActionCreators(\n    {\n      getBackgroundImageByLatLon,\n    },\n    dispatch,\n  );\n}\n\nexport const WBBackgroundImage = connect(\n  select,\n  mapActions,\n)(_WBBackgroundImage);\n","/* @flow */\n\nimport React from 'react';\n\ntype Props = {\n  children: any,\n};\ntype State = {\n  width: number,\n  height: number,\n};\nexport class WindowSize extends React.Component<Props, State> {\n  state: State = {\n    width: window.innerWidth,\n    height: window.innerHeight,\n  };\n\n  componentDidMount() {\n    window.addEventListener('resize', this.updateWindowDimensions);\n  }\n\n  componentWillUnmount() {\n    window.removeEventListener('resize', this.updateWindowDimensions);\n  }\n\n  updateWindowDimensions = () => {\n    this.setState({ width: window.innerWidth, height: window.innerHeight });\n  };\n\n  render() {\n    return this.props.children(this.state);\n  }\n}\n","/* @flow */\n\nimport React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport { bindActionCreators } from 'redux';\nimport styled from 'styled-components';\n\nimport { LoadingSpinner } from '../shared/LoadingSpinner';\nimport { MapView } from './MapView';\nimport { NowView } from './NowView';\nimport { AppRegistration } from './AppRegistration';\nimport { DailyView } from '../daily/DailyView';\nimport { HeaderBar } from '../header-bar/HeaderBar';\nimport { LegalBanner } from './LegalBanner';\nimport { TaboolaView } from './TaboolaView';\nimport {\n  getHourlyForecastByLatLon,\n  getDailyForecastByLatLon,\n} from '../../common/actions/forecastAction';\nimport { getUsersLocation } from '../../common/actions/locationSearchActions';\nimport { getCurrentStationObsByLatLon } from '../../common/actions/currentStationObsAction';\nimport { getLocationDetailsByLatLon } from '../../common/actions/locationDetailsAction';\nimport { getAllIconUrls } from '../../common/actions/iconActions';\nimport { loadDataForLatLong } from '../../common/actions/appActions';\nimport { getAppInstance } from '../../common/actions/entityManagementActions';\nimport { logEvent } from '../../common/actions/logActions';\n\nimport { HourlyView } from '../hourly/HourlyView';\nimport { WBBackgroundImage } from '../shared/WBBackgroundImage';\nimport { Box } from '../shared/Box';\nimport { WindowSize } from '../shared/WindowSize';\nimport LocalStorage from '../shared/LocalStorage';\n\nimport type { Match, History, Location } from 'react-router';\nimport { TaboolaAd } from './TaboolaAd';\n\n// if you change REFRESH_AFTER_MIN to be <15 minutes (the current cache time TTL), then you'll need to add logic to force-refresh the various API calls\n// made it current cache + 1 minute in case of slow responses, which would make the refresh get called after only 14 minutes\nconst REFRESH_AFTER_MIN = 16;\n\ntype Props = {\n  match: Match,\n  history: History,\n  location: Location,\n  loading: boolean,\n  getHourlyForecastByLatLon: typeof getHourlyForecastByLatLon,\n  getDailyForecastByLatLon: typeof getDailyForecastByLatLon,\n  getCurrentStationObsByLatLon: typeof getCurrentStationObsByLatLon,\n  getLocationDetailsByLatLon: typeof getLocationDetailsByLatLon,\n  loadDataForLatLong: typeof loadDataForLatLong,\n  getAllIconUrls: typeof getAllIconUrls,\n  getUsersLocation: typeof getUsersLocation,\n  logEvent: typeof logEvent,\n  latitude: ?number,\n  longitude: ?number,\n};\ntype State = {\n  loading: boolean,\n  isLocationLoaded: boolean,\n};\n\nclass _MainView extends Component<Props, State> {\n  state = {\n    loading: true,\n    isLocationLoaded: false,\n    isNight: false,\n  };\n\n  refreshTimeout: ?TimeoutID;\n\n  componentDidMount() {\n    this.setupRefreshTimer();\n\n    this.props.logEvent('app.page.load', {\n      busDomain: 'Forecast Summary',\n      pageName: 'ForecastSummary',\n    });\n\n    this.checkForLifecycleEvents();\n\n    this.props.getAllIconUrls({});\n\n    const previousLocation = LocalStorage.getUserSelectedLocation();\n    if (previousLocation && previousLocation.Latitude && previousLocation.Longitude) {\n      // we can use the previous location\n      const { Latitude: latitude, Longitude: longitude } = previousLocation;\n\n      this.setState({\n        isLocationLoaded: true,\n      });\n\n      this.props.loadDataForLatLong(latitude, longitude);\n    } else {\n      this.props.getUsersLocation({ refresh: false }).then((response) => {\n        if (!response) {\n          return null;\n        }\n\n        const {\n          value: { latitude, longitude },\n        } = response;\n\n        this.setState({\n          isLocationLoaded: true,\n        });\n\n        this.props.loadDataForLatLong(latitude, longitude);\n      });\n    }\n  }\n\n  async checkForLifecycleEvents() {\n    const entries: Array<{ localStorageKey: string, eventName: string, data?: Object }> = [\n      {\n        localStorageKey: 'webext-lifecycle-app.install',\n        eventName: 'app.install',\n      },\n      {\n        localStorageKey: 'webext-lifecycle-app.upgrade',\n        eventName: 'app.upgrade',\n      },\n      {\n        localStorageKey: 'webext-lifecycle-app.start',\n        eventName: 'app.start',\n        data: {\n          source: '',\n          pushMessageId: '',\n        },\n      },\n      {\n        localStorageKey: 'webext-lifecycle-app.close',\n        eventName: 'app.close',\n      },\n    ];\n\n    const results = await Promise.all(\n      entries.map((entry) => localStorage.getItem(entry.localStorageKey)),\n    );\n    entries.forEach((entry, index) => {\n      const jsonStr = results[index];\n      if (jsonStr) {\n        const jsonObj = JSON.parse(jsonStr);\n        if (jsonObj) {\n          if (entry.eventName === 'app.upgrade') {\n            this.props.logEvent('app.upgrade', {\n              timestamp: jsonObj.timestamp || undefined,\n              previousVersion: jsonObj.previousVersion,\n              ...(entry.data || {}),\n            });\n          } else {\n            this.props.logEvent(entry.eventName, {\n              timestamp: jsonObj.timestamp || undefined,\n              ...(entry.data || {}),\n            });\n          }\n          localStorage.removeItem(entry.localStorageKey);\n        }\n      }\n    });\n  }\n\n  setupRefreshTimer() {\n    if (this.refreshTimeout) {\n      return;\n    }\n\n    this.refreshTimeout = setTimeout(() => {\n      this.refreshTimeout = clearTimeout(this.refreshTimeout);\n      const { latitude, longitude } = this.props;\n      this.props.loadDataForLatLong(latitude, longitude);\n      this.setupRefreshTimer();\n    }, REFRESH_AFTER_MIN * 60 * 1000);\n  }\n\n  renderLoading() {\n    return (\n      <div>\n        <LoadingSpinner />\n      </div>\n    );\n  }\n\n  onBackgroundImageUrlFetched = (backgroundUrl) => {\n    const url = backgroundUrl;\n    this.setState({ isNight: url && url.includes('night') });\n  };\n\n  renderMain() {\n    const { latitude, longitude, complianceInfo } = this.props;\n    const shouldDisplayAd = complianceInfo && !complianceInfo.gdpr;\n    const { isNight } = this.state;\n    const modeIdRightRail = isNight ? 'thumbnails-d-300x250' : 'thumbnails-b-300x250';\n    const modeIdBelowThumbnail = isNight ? 'thumbnails-c' : 'thumbnails-a';\n    const ccpaStatus = complianceInfo && complianceInfo.ccpa;\n    return (\n      <Container>\n        {this.state.isLocationLoaded && <AppRegistration />}\n        <WBBackgroundImage\n          latitude={latitude}\n          longitude={longitude}\n          onBackgroundImageUrlLoaded={this.onBackgroundImageUrlFetched}\n        >\n          <WindowSize>\n            {() => {\n              return (\n                <LayoutContainer>\n                  <HeaderBar />\n                  <ScrollContainer>\n                    <div style={{ padding: 24 }}>\n                      <MainContent>\n                        <ResponsiveContent>\n                          <NowView />\n\n                          <MapView\n                            locationName={'locationName'}\n                            defaultLayerId=\"Radar.Global\"\n                            defaultZoom={8}\n                            latitude={latitude}\n                            longitude={longitude}\n                            pageTitle=\"Radar\"\n                            sidebarContent={undefined}\n                          />\n                          <TaboolaView\n                            modeId={modeIdRightRail}\n                            containerId=\"taboola-right-rail-thumbnails---now-forecast-1x1\"\n                            placementId=\"Right Rail Thumbnails - Now Forecast\"\n                            targetType=\"mix\"\n                            divId=\"taboola-right-rail-thumbnails---now-forecast-1x1\"\n                            adHeight={250}\n                            adWidth={300}\n                            isLastSnippet={false}\n                            shouldRenderAdView={shouldDisplayAd}\n                            ccpa={ccpaStatus}\n                          />\n                        </ResponsiveContent>\n\n                        <Box marginBottom={3}>\n                          <HourlyView />\n                        </Box>\n\n                        <DailyView />\n                      </MainContent>\n                    </div>\n                    <TaboolaView\n                      modeId={modeIdBelowThumbnail}\n                      containerId=\"taboola-below-content-thumbnails---now-forecast\"\n                      placementId=\"Below Content Thumbnails - Now Forecast\"\n                      targetType={'mix'}\n                      divId=\"taboola-below-content-thumbnails---now-forecast\"\n                      isLastSnippet={true}\n                      shouldRenderAdView={shouldDisplayAd}\n                      ccpa={ccpaStatus}\n                      shouldSpan={true}\n                    />\n                  </ScrollContainer>\n                  <LegalBanner />\n                </LayoutContainer>\n              );\n            }}\n          </WindowSize>\n        </WBBackgroundImage>\n      </Container>\n    );\n  }\n\n  render() {\n    return <div>{this.renderMain()}</div>;\n  }\n}\n\nconst Container = styled.div`\n  background-color: #2f6f8c;\n`;\n\nconst LayoutContainer = styled.div`\n  display: flex;\n  flex-direction: column;\n  height: 100vh;\n`;\n\nconst ResponsiveContent = styled.div`\n  margin-bottom: 32px;\n  display: grid;\n  grid-template-columns: 346px 1fr 300px;\n  grid-template-areas: 'NowView MapView AdView';\n  grid-gap: 24px;\n  flex-grow: 1;\n\n  & > ${NowView} {\n    grid-area: NowView;\n  }\n\n  & > ${MapView} {\n    grid-area: MapView;\n    height: 250px;\n  }\n\n  & > ${TaboolaAd} {\n    grid-area: AdView;\n    margin: 0 auto;\n  }\n\n  @media screen and (max-width: 1024px) {\n    grid-template-columns: 1fr 300px;\n    grid-template-rows: 1fr 1fr;\n    grid-template-areas:\n      'NowView NowView'\n      'MapView AdView';\n  }\n\n  @media screen and (max-width: 635px) {\n    grid-template-columns: 1fr;\n    grid-template-areas:\n      'NowView'\n      'MapView'\n      'AdView';\n  }\n`;\n\nconst ScrollContainer = styled.div`\n  flex-grow: 1;\n  overflow-y: scroll;\n`;\n\nconst MainContent = styled.div`\n  max-width: 1200px;\n  margin: 0 auto;\n`;\n\nconst select = (store) => {\n  const { complianceInfo } = store.complianceInfo || {};\n\n  if (!store || !store.locationDetails || !store.locationDetails.locationDetails) {\n    return {\n      loading: true,\n    };\n  }\n\n  const latitude =\n    (store.locationDetails.locationDetails && store.locationDetails.locationDetails.latitude) ||\n    undefined;\n  const longitude =\n    (store.locationDetails.locationDetails && store.locationDetails.locationDetails.longitude) ||\n    undefined;\n\n  return { loading: false, latitude, longitude, complianceInfo };\n};\n\nfunction mapActions(dispatch) {\n  return bindActionCreators(\n    {\n      getAllIconUrls,\n      getUsersLocation,\n      loadDataForLatLong,\n      getAppInstance,\n      logEvent,\n    },\n    dispatch,\n  );\n}\n\nexport const MainView = connect(select, mapActions)(_MainView);\n","// @flow\nimport React, { Component } from 'react';\nimport { BrowserRouter as Router, Route, Switch } from 'react-router-dom';\nimport { Provider } from 'react-redux';\nimport { Storage } from '@weatherbug/common';\n\nimport configureStore from './common/config/store';\nimport { getConfigSetting } from './common/actions/remoteConfigActions';\nimport './App.css';\n\nimport { MainView } from './modules/main/MainView';\n\nconst store = configureStore();\n\nconst storage = new Storage({\n  // maximum capacity, default 1000\n  size: 1000,\n  // Use AsyncStorage for RN, or window.localStorage for web. If not set, data would be lost after reload.\n  storageBackend: window.localStorage,\n  //30 minutes\n  defaultExpires: 1000 * 900,\n  // cache data in the memory. default is true.\n  enableCache: true,\n});\nwindow.storage = storage;\n\nclass App extends Component<{}> {\n  loadConfig() {\n    const url = process.env.REACT_APP_CONFIG_URL;\n    if (!url) {\n      console.error('Missing REACT_APP_CONFIG_URL');\n      return;\n    }\n    store.dispatch(getConfigSetting(url, false));\n  }\n\n  componentDidMount() {\n    this.loadConfig();\n  }\n\n  render() {\n    return (\n      <Provider store={store}>\n        <Router>\n          <div className=\"App\">\n            <Switch>\n              <Route path=\"/\" component={MainView} />\n            </Switch>\n          </div>\n        </Router>\n      </Provider>\n    );\n  }\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(/^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/),\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA',\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.',\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log('No internet connection found. App is running in offline mode.');\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nimport './index.css';\nimport '../node_modules/mapbox-gl/dist/mapbox-gl.css';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}